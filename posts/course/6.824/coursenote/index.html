<!doctype html><html lang=en>
<head>
<title>
Coursenote ::
Esoye — My note blog
</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="随堂笔记 #  Why do people build distributed systems? to increase capacity via parallel processing to tolerate faults via replication to match distribution of physical devices e.g. sensors to achieve security via isolation
分布式的困难点：
 大量的并发操作 具有容错性 难于实现  Lab 1: distributed big-data framework (like MapReduce) Lab 2: fault tolerance library using replication (Raft) Lab 3: a simple fault-tolerant database Lab 4: scalable database performance via sharding
A big goal: hide the complexity of distribution from applications.">
<meta name=keywords content="数据库">
<meta name=robots content="noodp">
<link rel=canonical href=https://askyx.github.io/posts/course/6.824/coursenote/>
<link rel=stylesheet href=https://askyx.github.io/assets/style.css>
<link rel=stylesheet href=https://askyx.github.io/style.css>
<link rel=apple-touch-icon-precomposed sizes=144x144 href=https://askyx.github.io/img/apple-touch-icon-144-precomposed.png>
<link rel="shortcut icon" href=https://askyx.github.io/img/favicon.png>
<link href=https://askyx.github.io/assets/fonts/Inter-Italic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://askyx.github.io/assets/fonts/Inter-Regular.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://askyx.github.io/assets/fonts/Inter-Medium.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://askyx.github.io/assets/fonts/Inter-MediumItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://askyx.github.io/assets/fonts/Inter-Bold.woff2 rel=preload type=font/woff2 as=font crossorigin>
<link href=https://askyx.github.io/assets/fonts/Inter-BoldItalic.woff2 rel=preload type=font/woff2 as=font crossorigin>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Coursenote">
<meta name=twitter:description content="随堂笔记 #  Why do people build distributed systems? to increase capacity via parallel processing to tolerate faults via replication to match distribution of physical devices e.g. sensors to achieve security via isolation
分布式的困难点：
 大量的并发操作 具有容错性 难于实现  Lab 1: distributed big-data framework (like MapReduce) Lab 2: fault tolerance library using replication (Raft) Lab 3: a simple fault-tolerant database Lab 4: scalable database performance via sharding
A big goal: hide the complexity of distribution from applications.">
<meta property="og:title" content="Coursenote">
<meta property="og:description" content="随堂笔记 #  Why do people build distributed systems? to increase capacity via parallel processing to tolerate faults via replication to match distribution of physical devices e.g. sensors to achieve security via isolation
分布式的困难点：
 大量的并发操作 具有容错性 难于实现  Lab 1: distributed big-data framework (like MapReduce) Lab 2: fault tolerance library using replication (Raft) Lab 3: a simple fault-tolerant database Lab 4: scalable database performance via sharding
A big goal: hide the complexity of distribution from applications.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://askyx.github.io/posts/course/6.824/coursenote/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2022-05-17T13:17:04+08:00">
<meta property="article:modified_time" content="2022-05-17T13:17:04+08:00"><meta property="og:site_name" content="Esoye">
</head>
<body class=light-theme>
<div class=container>
<header class=header>
<span class=header__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Esoye</span>
<span class=logo__cursor></span>
</a>
<span class=header__right>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/archive>Archive</a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/archive>Archive</a></li>
</ul>
</nav>
<span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>
</span>
<span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg>
</span>
</span>
</span>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>Coursenote</h1>
<div class=post-meta>
<span class=post-date>
2022-05-17
</span>
</div>
<div class=post-content>
<h2 id=随堂笔记>
随堂笔记
<a href=#%e9%9a%8f%e5%a0%82%e7%ac%94%e8%ae%b0 class=h-anchor aria-hidden=true>#</a>
</h2>
<p>Why do people build distributed systems?
to increase capacity via parallel processing
to tolerate faults via replication
to match distribution of physical devices e.g. sensors
to achieve security via isolation</p>
<p>分布式的困难点：</p>
<ol>
<li>大量的并发操作</li>
<li>具有容错性</li>
<li>难于实现</li>
</ol>
<p>Lab 1: distributed big-data framework (like MapReduce)
Lab 2: fault tolerance library using replication (Raft)
Lab 3: a simple fault-tolerant database
Lab 4: scalable database performance via sharding</p>
<p>A big goal: hide the complexity of distribution from applications.</p>
<p>Topic: fault tolerance
1000s of servers, big network -> always something broken
We&rsquo;d like to hide these failures from the application.<br>
&ldquo;High availability&rdquo;: service continues despite failures<br>
Big idea: replicated servers.
If one server crashes, can proceed using the other(s).
Labs 2 and 3</p>
<p>Topic: consistency
General-purpose infrastructure needs well-defined behavior.
E.g. &ldquo;Get(k) yields the value from the most recent Put(k,v).&rdquo;
Achieving good behavior is hard!
&ldquo;Replica&rdquo; servers are hard to keep identical.</p>
<p>Topic: performance
The goal: scalable throughput
Nx servers -> Nx total throughput via parallel CPU, disk, net.
Scaling gets harder as N grows:
Load imbalance.
Slowest-of-N latency.
Some things don&rsquo;t speed up with N: initialization, interaction.
Labs 1, 4</p>
<p>Topic: tradeoffs
Fault-tolerance, consistency, and performance are enemies.
Fault tolerance and consistency require communication
e.g., send data to backup
e.g., check if my data is up-to-date
communication is often slow and non-scalable
Many designs provide only weak consistency, to gain speed.
e.g. Get() does <em>not</em> yield the latest Put()!
Painful for application programmers but may be a good trade-off.
We&rsquo;ll see many design points in the consistency/performance spectrum.</p>
<p>Topic: implementation
RPC, threads, concurrency control, configuration.
The labs&mldr;</p>
<h2 id=gfs>
GFS
<a href=#gfs class=h-anchor aria-hidden=true>#</a>
</h2>
<p>Why is distributed storage hard?<br>
high performance -> shard data over many servers<br>
many servers -> constant faults<br>
fault tolerance -> replication<br>
replication -> potential inconsistencies<br>
better consistency -> low performance</p>
<p>是一个闭环问题，高性能需要更多的机器，更多的机器导致更高的故障率，解决这个问题一般使用多副本解决，但是多副本又带来不一致的问题，而为了更高的一致性，又会导致性能下降</p>
<h3 id=consistency>
consistency
<a href=#consistency class=h-anchor aria-hidden=true>#</a>
</h3>
<p>在单机上，多个用户同时写一个数据，最终的结果可能是其中一个，但是后续所有的用户都会得到同一个数据，这是强一致性<br>
但是在分布式集群上，用户写数据，之后的用户在不同的机器上得到的数据需要看此时集群的一致性协议</p>
<ul>
<li>分布式的核心问题是一致性以及其他限制之间的博弈</li>
</ul>
<p>master记录文件块的元数据信息，例如文件所在的服务器，文件分片信息等<br>
server保存文件，文件使用3副本</p>
<p>What are the steps when client C wants to read a file?</p>
<ol>
<li>C sends filename and offset to coordinator (CO) (if not cached)</li>
<li>CO finds chunk handle for that offset</li>
<li>CO replies with list of chunkhandles + chunkservers
only those with latest version</li>
<li>C caches handle + chunkserver list</li>
<li>C sends request to nearest chunkserver
chunk handle, offset</li>
<li>chunk server reads from chunk file on disk, returns to client</li>
</ol>
</div>
<div class=pagination>
<div class=pagination__title>
<span class=pagination__title-h>Read other posts</span>
<hr>
</div>
<div class=pagination__buttons>
<span class="button previous">
<a href=https://askyx.github.io/posts/languange/go_1/>
<span class=button__icon>←</span>
<span class=button__text>A Tour of Go速通</span>
</a>
</span>
<span class="button next">
<a href=https://askyx.github.io/posts/readbooks/leveldb/>
<span class=button__text>LevelDB源码阅读</span>
<span class=button__icon>→</span>
</a>
</span>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<a href=/ class=logo style=text-decoration:none>
<span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg>
</span>
<span class=logo__text>Esoye</span>
<span class=logo__cursor></span>
</a>
<div class=copyright>
<span>© 2024 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span>
</div>
</div>
</footer>
<script src=https://askyx.github.io/assets/main.js></script>
<script src=https://askyx.github.io/assets/prism.js></script>
</div>
</body>
</html>