<!doctype html><html lang=en><head><title>A Tour of Goé€Ÿé€š ::
Asky â€” My note blog
</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="2022-05-17 åŸºç¡€è¯­æ³• 2022-05-24 å¤åˆç±»å‹ï¼Œgoroutineï¼Œchannel åŸºç¡€è¯­æ³• # Packages # goä½¿ç”¨Packagesç»´æŠ¤æ¨¡å—ï¼Œä½¿ç”¨importå¯¼å…¥æ¨¡å—ï¼Œimportæœ€åä¸€ä¸ªå…ƒç´ æ‰æ˜¯éœ€è¦å¯¼å…¥çš„æ¨¡å—
import ( &amp;#34;fmt&amp;#34; &amp;#34;math/rand&amp;#34; ) import å¯ä»¥å•ç‹¬ä¸€ä¸ªå¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡å¯¼å…¥ï¼Œ ä¸ä¹‹å¯¹åº”çš„æ˜¯exportï¼Œgoä¸æ˜¾ç¤ºå£°æ˜exportï¼Œé¦–å­—æ¯å¤§å†™çš„å˜é‡æˆ–æ–¹æ³•è‡ªåŠ¨exportï¼Œå¤–éƒ¨åªèƒ½ä½¿ç”¨å¯¼å‡ºçš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œç±»ä¼¼c++ä¸­ç±»çš„ç§æœ‰å’Œå…±æœ‰çš„æ¦‚å¿µã€‚
Functions # ä¸c++æˆ–è€…Javaæˆ–è€…å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgoçš„å‡½æ•°ç­¾åæ ¼å¼ä¸ºfunc func_name(parm1 [type], parm2 [type]....) retype {}ï¼Œå…ˆå£°æ˜åå­—ï¼Œå†å£°æ˜å˜é‡çš„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨ä¸­æœ‰å¤šä¸ªå‚æ•°ä¸”ç±»å‹ä¸€è‡´çš„æ—¶å€™ï¼Œå‰é¢çš„å‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œåªéœ€è¦ä¿ç•™ä¹‹åä¸€ä¸ª
func add(x, y int) int { return x + y } ä¸”goå¯ä»¥å¾ˆè½»æ˜“çš„å®ç°å¤šè¿”å›å€¼çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹
func swap(x, y string) (string, string) { return y, x } func main() { a, b := swap(&amp;#34;hello&amp;#34;, &amp;#34;world&amp;#34;) fmt.Println(a, b) } ä¸Šé¢çš„åŠŸèƒ½åœ¨c++ä¸­éœ€è¦ä½¿ç”¨ç»“æ„ä½“æˆ–è€…tupleæˆ–è€…Parisæ‰èƒ½å®ç°ã€‚
goçš„returnè¿˜å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ &amp;ldquo;naked&amp;rdquo; returnï¼Œæ­¤æ—¶è¦æ±‚å‡½æ•°ç­¾åä¸­çš„returnå‚æ•°å¿…é¡»æœ‰åå­—ï¼Œä¸”åœ¨å‡½æ•°ä½“ä¸­å¿…é¡»ä¸ºå‚æ•°èµ‹å€¼ï¼Œæ­¤æ—¶ä½¿ç”¨returnç›´æ¥è¿”å›ï¼Œå‚æ•°å¯ä»¥ç›´æ¥ä¼ é€’åˆ°å¤–éƒ¨ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œå¦‚æœå‡½æ•°ä½“è¿‡äºåºå¤§ä¸”æœ‰å¤šä¸ªå‡ºå£ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œéš¾äºé˜…è¯»
func split(sum int) (x, y int) { x = sum * 4 / 9 y = sum - x return } å˜é‡ # ä½¿ç”¨varå£°æ˜å˜é‡ï¼Œå£°æ˜å¤šä¸ªå˜é‡çš„æ—¶å€™å¯ä»¥ç±»ä¼¼å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ï¼Œå‰é¢å‚æ•°ä¸éœ€è¦å£°æ˜ç±»å‹ã€‚åˆå§‹åŒ–çš„æ—¶å€™æŒ‰é¡ºåºåˆå§‹åŒ–ï¼Œä¸”åˆå§‹åŒ–çš„å‚æ•°ä¸ªæ•°å¿…é¡»å‰åä¸€è‡´
var i, j, k int = 1,2,0 // true var i, j, k int = 1,2 // false åˆå§‹åŒ–çš„æ—¶å€™è¿˜å¯ä»¥çœç•¥ç±»å‹ï¼Œç¨‹åºä¼šè¿›è¡Œå‚æ•°æ¨å¯¼ã€‚ å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥ä½¿ç”¨ :=æ›¿æ¢varå£°æ˜å˜é‡ï¼Œæ­¤æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“å¤–éƒ¨ï¼Œç”±äºgoè§„å®šï¼Œæ¯æ¡è¯­å¥å¿…é¡»ç”±ç‰¹å®šçš„å…³é”®å­—å¼€å¤´ï¼Œæ‰€ä»¥å¤–éƒ¨ä¸å¯ä½¿ç”¨æ­¤è¯­æ³•ã€‚"><meta name=keywords content="ç¨‹åºå‘˜ã€ç å†œã€databaseã€C++"><meta name=robots content="noodp"><link rel=canonical href=https://askyx.github.io/posts/go_1/><link rel=stylesheet href=//cdn.staticfile.org/lxgw-wenkai-screen-webfont/1.6.0/lxgwwenkaiscreen.css media=print onload='this.media="all"'><link rel=stylesheet href=https://askyx.github.io/assets/style.css><link rel=stylesheet href=https://askyx.github.io/style.css><link rel=apple-touch-icon-precomposed sizes=144x144 href=https://askyx.github.io/img/apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=https://askyx.github.io/favicon.ico><link rel=apple-touch-icon href=https://askyx.github.io/favicon.ico><link rel=bookmark href=https://askyx.github.io/favicon.ico><link rel=apple-touch-icon-precomposed sizes=180x180 href=https://askyx.github.io/favicon.ico><meta name=twitter:card content="summary"><meta name=twitter:title content="A Tour of Goé€Ÿé€š"><meta name=twitter:description content="2022-05-17 åŸºç¡€è¯­æ³• 2022-05-24 å¤åˆç±»å‹ï¼Œgoroutineï¼Œchannel åŸºç¡€è¯­æ³• # Packages # goä½¿ç”¨Packagesç»´æŠ¤æ¨¡å—ï¼Œä½¿ç”¨importå¯¼å…¥æ¨¡å—ï¼Œimportæœ€åä¸€ä¸ªå…ƒç´ æ‰æ˜¯éœ€è¦å¯¼å…¥çš„æ¨¡å—
import ( &#34;fmt&#34; &#34;math/rand&#34; ) import å¯ä»¥å•ç‹¬ä¸€ä¸ªå¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡å¯¼å…¥ï¼Œ ä¸ä¹‹å¯¹åº”çš„æ˜¯exportï¼Œgoä¸æ˜¾ç¤ºå£°æ˜exportï¼Œé¦–å­—æ¯å¤§å†™çš„å˜é‡æˆ–æ–¹æ³•è‡ªåŠ¨exportï¼Œå¤–éƒ¨åªèƒ½ä½¿ç”¨å¯¼å‡ºçš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œç±»ä¼¼c++ä¸­ç±»çš„ç§æœ‰å’Œå…±æœ‰çš„æ¦‚å¿µã€‚
Functions # ä¸c++æˆ–è€…Javaæˆ–è€…å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgoçš„å‡½æ•°ç­¾åæ ¼å¼ä¸ºfunc func_name(parm1 [type], parm2 [type]....) retype {}ï¼Œå…ˆå£°æ˜åå­—ï¼Œå†å£°æ˜å˜é‡çš„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨ä¸­æœ‰å¤šä¸ªå‚æ•°ä¸”ç±»å‹ä¸€è‡´çš„æ—¶å€™ï¼Œå‰é¢çš„å‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œåªéœ€è¦ä¿ç•™ä¹‹åä¸€ä¸ª
func add(x, y int) int { return x + y } ä¸”goå¯ä»¥å¾ˆè½»æ˜“çš„å®ç°å¤šè¿”å›å€¼çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹
func swap(x, y string) (string, string) { return y, x } func main() { a, b := swap(&#34;hello&#34;, &#34;world&#34;) fmt.Println(a, b) } ä¸Šé¢çš„åŠŸèƒ½åœ¨c++ä¸­éœ€è¦ä½¿ç”¨ç»“æ„ä½“æˆ–è€…tupleæˆ–è€…Parisæ‰èƒ½å®ç°ã€‚
goçš„returnè¿˜å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ &ldquo;naked&rdquo; returnï¼Œæ­¤æ—¶è¦æ±‚å‡½æ•°ç­¾åä¸­çš„returnå‚æ•°å¿…é¡»æœ‰åå­—ï¼Œä¸”åœ¨å‡½æ•°ä½“ä¸­å¿…é¡»ä¸ºå‚æ•°èµ‹å€¼ï¼Œæ­¤æ—¶ä½¿ç”¨returnç›´æ¥è¿”å›ï¼Œå‚æ•°å¯ä»¥ç›´æ¥ä¼ é€’åˆ°å¤–éƒ¨ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œå¦‚æœå‡½æ•°ä½“è¿‡äºåºå¤§ä¸”æœ‰å¤šä¸ªå‡ºå£ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œéš¾äºé˜…è¯»
func split(sum int) (x, y int) { x = sum * 4 / 9 y = sum - x return } å˜é‡ # ä½¿ç”¨varå£°æ˜å˜é‡ï¼Œå£°æ˜å¤šä¸ªå˜é‡çš„æ—¶å€™å¯ä»¥ç±»ä¼¼å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ï¼Œå‰é¢å‚æ•°ä¸éœ€è¦å£°æ˜ç±»å‹ã€‚åˆå§‹åŒ–çš„æ—¶å€™æŒ‰é¡ºåºåˆå§‹åŒ–ï¼Œä¸”åˆå§‹åŒ–çš„å‚æ•°ä¸ªæ•°å¿…é¡»å‰åä¸€è‡´
var i, j, k int = 1,2,0 // true var i, j, k int = 1,2 // false åˆå§‹åŒ–çš„æ—¶å€™è¿˜å¯ä»¥çœç•¥ç±»å‹ï¼Œç¨‹åºä¼šè¿›è¡Œå‚æ•°æ¨å¯¼ã€‚ å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥ä½¿ç”¨ :=æ›¿æ¢varå£°æ˜å˜é‡ï¼Œæ­¤æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“å¤–éƒ¨ï¼Œç”±äºgoè§„å®šï¼Œæ¯æ¡è¯­å¥å¿…é¡»ç”±ç‰¹å®šçš„å…³é”®å­—å¼€å¤´ï¼Œæ‰€ä»¥å¤–éƒ¨ä¸å¯ä½¿ç”¨æ­¤è¯­æ³•ã€‚"><meta property="og:title" content="A Tour of Goé€Ÿé€š"><meta property="og:description" content="2022-05-17 åŸºç¡€è¯­æ³• 2022-05-24 å¤åˆç±»å‹ï¼Œgoroutineï¼Œchannel åŸºç¡€è¯­æ³• # Packages # goä½¿ç”¨Packagesç»´æŠ¤æ¨¡å—ï¼Œä½¿ç”¨importå¯¼å…¥æ¨¡å—ï¼Œimportæœ€åä¸€ä¸ªå…ƒç´ æ‰æ˜¯éœ€è¦å¯¼å…¥çš„æ¨¡å—
import ( &#34;fmt&#34; &#34;math/rand&#34; ) import å¯ä»¥å•ç‹¬ä¸€ä¸ªå¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡å¯¼å…¥ï¼Œ ä¸ä¹‹å¯¹åº”çš„æ˜¯exportï¼Œgoä¸æ˜¾ç¤ºå£°æ˜exportï¼Œé¦–å­—æ¯å¤§å†™çš„å˜é‡æˆ–æ–¹æ³•è‡ªåŠ¨exportï¼Œå¤–éƒ¨åªèƒ½ä½¿ç”¨å¯¼å‡ºçš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œç±»ä¼¼c++ä¸­ç±»çš„ç§æœ‰å’Œå…±æœ‰çš„æ¦‚å¿µã€‚
Functions # ä¸c++æˆ–è€…Javaæˆ–è€…å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgoçš„å‡½æ•°ç­¾åæ ¼å¼ä¸ºfunc func_name(parm1 [type], parm2 [type]....) retype {}ï¼Œå…ˆå£°æ˜åå­—ï¼Œå†å£°æ˜å˜é‡çš„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨ä¸­æœ‰å¤šä¸ªå‚æ•°ä¸”ç±»å‹ä¸€è‡´çš„æ—¶å€™ï¼Œå‰é¢çš„å‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œåªéœ€è¦ä¿ç•™ä¹‹åä¸€ä¸ª
func add(x, y int) int { return x + y } ä¸”goå¯ä»¥å¾ˆè½»æ˜“çš„å®ç°å¤šè¿”å›å€¼çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹
func swap(x, y string) (string, string) { return y, x } func main() { a, b := swap(&#34;hello&#34;, &#34;world&#34;) fmt.Println(a, b) } ä¸Šé¢çš„åŠŸèƒ½åœ¨c++ä¸­éœ€è¦ä½¿ç”¨ç»“æ„ä½“æˆ–è€…tupleæˆ–è€…Parisæ‰èƒ½å®ç°ã€‚
goçš„returnè¿˜å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ &ldquo;naked&rdquo; returnï¼Œæ­¤æ—¶è¦æ±‚å‡½æ•°ç­¾åä¸­çš„returnå‚æ•°å¿…é¡»æœ‰åå­—ï¼Œä¸”åœ¨å‡½æ•°ä½“ä¸­å¿…é¡»ä¸ºå‚æ•°èµ‹å€¼ï¼Œæ­¤æ—¶ä½¿ç”¨returnç›´æ¥è¿”å›ï¼Œå‚æ•°å¯ä»¥ç›´æ¥ä¼ é€’åˆ°å¤–éƒ¨ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œå¦‚æœå‡½æ•°ä½“è¿‡äºåºå¤§ä¸”æœ‰å¤šä¸ªå‡ºå£ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œéš¾äºé˜…è¯»
func split(sum int) (x, y int) { x = sum * 4 / 9 y = sum - x return } å˜é‡ # ä½¿ç”¨varå£°æ˜å˜é‡ï¼Œå£°æ˜å¤šä¸ªå˜é‡çš„æ—¶å€™å¯ä»¥ç±»ä¼¼å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ï¼Œå‰é¢å‚æ•°ä¸éœ€è¦å£°æ˜ç±»å‹ã€‚åˆå§‹åŒ–çš„æ—¶å€™æŒ‰é¡ºåºåˆå§‹åŒ–ï¼Œä¸”åˆå§‹åŒ–çš„å‚æ•°ä¸ªæ•°å¿…é¡»å‰åä¸€è‡´
var i, j, k int = 1,2,0 // true var i, j, k int = 1,2 // false åˆå§‹åŒ–çš„æ—¶å€™è¿˜å¯ä»¥çœç•¥ç±»å‹ï¼Œç¨‹åºä¼šè¿›è¡Œå‚æ•°æ¨å¯¼ã€‚ å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥ä½¿ç”¨ :=æ›¿æ¢varå£°æ˜å˜é‡ï¼Œæ­¤æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“å¤–éƒ¨ï¼Œç”±äºgoè§„å®šï¼Œæ¯æ¡è¯­å¥å¿…é¡»ç”±ç‰¹å®šçš„å…³é”®å­—å¼€å¤´ï¼Œæ‰€ä»¥å¤–éƒ¨ä¸å¯ä½¿ç”¨æ­¤è¯­æ³•ã€‚"><meta property="og:type" content="article"><meta property="og:url" content="https://askyx.github.io/posts/go_1/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-05-17T22:34:11+08:00"><meta property="article:modified_time" content="2022-05-17T22:34:11+08:00"></head><body class=light-theme><div class=container><header class=header><span class=header__inner><a href=https://askyx.github.io/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Asky</span>
<span class=logo__cursor></span>
</a><span class=header__right><nav class=menu><ul class="menu__inner menu__inner--desktop"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/books/duckdb_internal>DuckDB</a></li><li><a href=/search>ğŸ”</a></li><li><a href=javascript:; onclick=randomPost() title=éšæœºè®¿é—®ä¸€ç¯‡æ–‡ç« ><svg t="1660103436159" class="icon search-box-icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" p-id="1184" width="32" height="32"><path d="M421.376 481.28s117.248 24.576 175.104-8.704c0 0-89.6 70.144-89.6 166.4.512-.512-8.192-121.344-85.504-157.696zm17.408 487.936s68.608 6.656 68.608-80.896c0 0 3.072 88.576 65.024 78.336.0.512-50.688 22.016-133.632 2.56zM161.28 238.08s-30.208 65.536 11.264 91.648c0 0-67.072-17.408-81.408 37.376.0.0 8.704-82.944 70.144-129.024zM857.6 227.328s49.152 50.176 1.024 81.408c0 0 58.88-18.432 66.56 36.352.0.0 5.12-69.632-67.584-117.76z" p-id="1185"/><path d="M443.392 970.752c-5.632.0-10.752-1.024-15.36-3.072L157.184 810.496l-1.536-1.024s-1.024-1.024-4.608-2.56c-51.2-29.184-62.976-94.208-65.536-120.832V386.56c0-3.072.512-7.168 1.024-11.264l.512-3.584 1.024-2.56c19.456-50.688 76.8-51.2 103.936-44.032l-1.536 5.632 4.096-6.144L476.16 486.4l18.944 37.888c20.992 36.864 29.184 77.824 32.768 99.84v258.048c-4.608 56.32-36.864 76.288-55.808 82.944-1.024.512-15.36 5.632-28.672 5.632zM181.248 774.656l263.168 152.576c12.288-.512 36.864-6.656 40.448-48.128V628.736c-4.608-31.744-20.992-103.936-72.192-128L322.56 445.44l1.536 3.072L181.76 366.08c-2.048-.512-40.448-9.216-52.736 15.872-.512 2.56-.512 4.608-.512 6.144v294.4c1.536 16.896 9.728 67.072 43.52 86.528 3.584 2.048 6.656 4.096 9.216 5.632z" p-id="1186"/><path d="M837.632 212.992c6.656 4.096 12.8 7.168 18.432 10.752l1.536 1.024 1.536 1.536c5.12 4.096 10.752 9.216 16.384 15.36 6.144 11.776 5.632 33.28 4.608 49.152-1.024 12.288-6.656 30.208-26.624 44.544l-1.024.512-247.808 156.672c-26.624 14.336-62.976 18.432-96.256 18.432-40.96.0-77.824-6.656-89.088-8.704l-3.072-.512-245.248-142.336c-39.424-29.696-28.16-85.504-15.36-113.664l2.56-6.144 263.68-166.912c29.184-14.336 104.448-43.008 173.056-1.024 3.584 2.56 58.368 34.304 119.296 69.632M431.616 460.8c40.448 7.168 114.176 13.824 152.576-6.144L828.928 299.52c7.168-5.632 8.192-10.24 8.704-12.8 1.024-11.264-9.728-26.624-15.36-32.768-55.808-32.256-243.712-141.312-250.368-145.408-49.664-30.72-107.008-9.216-130.048 2.56L192.512 268.8c-4.096 12.288-12.288 42.496 3.584 55.808L431.616 460.8z" p-id="1187"/><path d="M831.488 299.008c4.096-1.024 38.4-11.264 66.048 6.144 7.168 4.608 17.92 11.776 24.064 24.576 1.024 5.632 4.096 10.752 4.608 16.896v2.048l-1.024 323.072c-5.12 35.328-22.528 91.648-77.312 125.44l-5.12 3.584h-1.024L579.584 966.656l-4.608.512c-4.096.512-8.704 1.024-12.8 1.024-15.872.0-30.208-5.12-41.984-14.848-24.576-20.48-32.768-55.808-35.328-73.728l-1.024-252.928h1.536c6.144-96.768 88.576-164.864 96.768-171.008l-.512-.512L829.44 299.52M528.384 867.328c.512 10.24 5.12 41.472 19.968 53.76 3.072 2.56 7.68 5.632 16.384 5.12L829.44 758.272c56.32-38.4 53.76-115.712 53.76-116.224l-.512-32.256 1.024-250.368h-.512c-1.536-12.8-7.168-16.384-8.704-17.408-8.704-5.632-23.552-3.072-28.672-2.048L610.304 488.96c-1.024.512-80.896 65.024-80.896 149.504h-1.536l.512 228.864zM435.2 264.192c0 27.648 31.744 50.176 71.168 50.176s71.168-22.528 71.168-50.176-31.744-50.176-71.168-50.176S435.2 236.544 435.2 264.192z" p-id="1188"/><path d="M663.552 782.848c0 30.72-22.528 67.072-49.664 80.384-27.648 13.824-50.176-.512-50.176-31.232s22.528-67.072 50.176-80.384c27.136-13.824 49.664.0 49.664 31.232zM760.32 602.624c0 30.72-22.528 67.072-49.664 80.384-27.648 13.824-49.664-.512-49.664-31.232s22.528-67.072 49.664-80.384c27.136-13.824 49.664.512 49.664 31.232zM867.84 428.032c0 30.72-22.528 67.072-49.664 80.384C790.528 522.24 768 507.904 768 477.184s22.528-67.072 50.176-80.384c27.136-13.824 49.664.0 49.664 31.232zM270.848 538.112c0 30.72-22.016 41.984-48.64 24.576-27.136-16.896-48.64-55.808-48.64-86.528s22.016-41.984 48.64-24.576c26.624 16.896 48.64 55.808 48.64 86.528zm161.28 285.184c0 30.72-22.016 41.984-48.64 24.576-26.624-17.408-48.64-55.808-48.64-86.528s22.016-41.984 48.64-24.576c26.624 16.896 48.64 55.808 48.64 86.528z" p-id="1189"/></svg></a></li></ul><ul class="menu__inner menu__inner--mobile"><li><a href=/about>About</a></li><li><a href=/archive>Archive</a></li><li><a href=/books/duckdb_internal>DuckDB</a></li><li><a href=/search>ğŸ”</a></li></ul></nav><span class=menu-trigger><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span><span class=theme-toggle><svg class="theme-toggler" width="24" height="24" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M22 41c10.4934.0 19-8.5066 19-19C41 11.5066 32.4934 3 22 3 11.5066 3 3 11.5066 3 22s8.5066 19 19 19zM7 22C7 13.7157 13.7157 7 22 7V37C13.7157 37 7 30.2843 7 22z"/></svg></span></span></span></header><div class=content><div class=post><div class=breadcrumb><li><a href=https://askyx.github.io/>é¦–é¡µ</a></li><li><a href=https://askyx.github.io/posts/>Posts</a></li><li class=active><a href=https://askyx.github.io/posts/go_1/>A Tour of Goé€Ÿé€š</a></li></div><h2 class=post-title><a href=https://askyx.github.io/posts/go_1/>A Tour of Goé€Ÿé€š</a></h2><div class=post-meta><span class=post-date>2022-05-17</span></div><div class=post-content><ul><li>2022-05-17 åŸºç¡€è¯­æ³•</li><li>2022-05-24 å¤åˆç±»å‹ï¼Œgoroutineï¼Œchannel</li></ul><h2 id=åŸºç¡€è¯­æ³•>åŸºç¡€è¯­æ³•
<a href=#%e5%9f%ba%e7%a1%80%e8%af%ad%e6%b3%95 class=h-anchor aria-hidden=true>#</a></h2><h3 id=packages>Packages
<a href=#packages class=h-anchor aria-hidden=true>#</a></h3><p>goä½¿ç”¨Packagesç»´æŠ¤æ¨¡å—ï¼Œä½¿ç”¨importå¯¼å…¥æ¨¡å—ï¼Œimportæœ€åä¸€ä¸ªå…ƒç´ æ‰æ˜¯éœ€è¦å¯¼å…¥çš„æ¨¡å—</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;math/rand&#34;</span>
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><p>import å¯ä»¥å•ç‹¬ä¸€ä¸ªå¯¼å…¥ä¸€ä¸ªæ¨¡å—ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡å¯¼å…¥ï¼Œ
ä¸ä¹‹å¯¹åº”çš„æ˜¯exportï¼Œgoä¸æ˜¾ç¤ºå£°æ˜exportï¼Œé¦–å­—æ¯å¤§å†™çš„å˜é‡æˆ–æ–¹æ³•è‡ªåŠ¨exportï¼Œå¤–éƒ¨åªèƒ½ä½¿ç”¨å¯¼å‡ºçš„å˜é‡æˆ–è€…æ–¹æ³•ï¼Œç±»ä¼¼c++ä¸­ç±»çš„ç§æœ‰å’Œå…±æœ‰çš„æ¦‚å¿µã€‚</p><h3 id=functions>Functions
<a href=#functions class=h-anchor aria-hidden=true>#</a></h3><p>ä¸c++æˆ–è€…Javaæˆ–è€…å…¶ä»–è¯­è¨€ä¸åŒçš„æ˜¯ï¼Œgoçš„å‡½æ•°ç­¾åæ ¼å¼ä¸º<code>func func_name(parm1 [type], parm2 [type]....) retype {}</code>ï¼Œå…ˆå£°æ˜åå­—ï¼Œå†å£°æ˜å˜é‡çš„ç±»å‹ï¼Œå‚æ•°åˆ—è¡¨ä¸­æœ‰å¤šä¸ªå‚æ•°ä¸”ç±»å‹ä¸€è‡´çš„æ—¶å€™ï¼Œå‰é¢çš„å‚æ•°ç±»å‹å¯ä»¥çœç•¥ï¼Œåªéœ€è¦ä¿ç•™ä¹‹åä¸€ä¸ª</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>add</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä¸”goå¯ä»¥å¾ˆè½»æ˜“çš„å®ç°å¤šè¿”å›å€¼çš„åŠŸèƒ½ï¼Œå¦‚ä¸‹</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swap</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>string</span>) (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>swap</span>(<span style=color:#e6db74>&#34;hello&#34;</span>, <span style=color:#e6db74>&#34;world&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä¸Šé¢çš„åŠŸèƒ½åœ¨c++ä¸­éœ€è¦ä½¿ç”¨ç»“æ„ä½“æˆ–è€…tupleæˆ–è€…Parisæ‰èƒ½å®ç°ã€‚</p><p>goçš„returnè¿˜å¯ä»¥ä½¿ç”¨ä¸å¸¦å‚æ•°çš„ &ldquo;naked&rdquo; returnï¼Œæ­¤æ—¶è¦æ±‚å‡½æ•°ç­¾åä¸­çš„returnå‚æ•°å¿…é¡»æœ‰åå­—ï¼Œä¸”åœ¨å‡½æ•°ä½“ä¸­å¿…é¡»ä¸ºå‚æ•°èµ‹å€¼ï¼Œæ­¤æ—¶ä½¿ç”¨returnç›´æ¥è¿”å›ï¼Œå‚æ•°å¯ä»¥ç›´æ¥ä¼ é€’åˆ°å¤–éƒ¨ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ—¶å€™ï¼Œå¦‚æœå‡½æ•°ä½“è¿‡äºåºå¤§ä¸”æœ‰å¤šä¸ªå‡ºå£ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œéš¾äºé˜…è¯»</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>split</span>(<span style=color:#a6e22e>sum</span> <span style=color:#66d9ef>int</span>) (<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>x</span> = <span style=color:#a6e22e>sum</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>4</span> <span style=color:#f92672>/</span> <span style=color:#ae81ff>9</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>y</span> = <span style=color:#a6e22e>sum</span> <span style=color:#f92672>-</span> <span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=å˜é‡>å˜é‡
<a href=#%e5%8f%98%e9%87%8f class=h-anchor aria-hidden=true>#</a></h3><p>ä½¿ç”¨varå£°æ˜å˜é‡ï¼Œå£°æ˜å¤šä¸ªå˜é‡çš„æ—¶å€™å¯ä»¥ç±»ä¼¼å‚æ•°åˆ—è¡¨ä¸­çš„å‚æ•°ï¼Œå‰é¢å‚æ•°ä¸éœ€è¦å£°æ˜ç±»å‹ã€‚åˆå§‹åŒ–çš„æ—¶å€™æŒ‰é¡ºåºåˆå§‹åŒ–ï¼Œä¸”åˆå§‹åŒ–çš„å‚æ•°ä¸ªæ•°å¿…é¡»å‰åä¸€è‡´</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>k</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>0</span> <span style=color:#75715e>// true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span>, <span style=color:#a6e22e>k</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>   <span style=color:#75715e>// false
</span></span></span></code></pre></div><p>åˆå§‹åŒ–çš„æ—¶å€™è¿˜å¯ä»¥çœç•¥ç±»å‹ï¼Œç¨‹åºä¼šè¿›è¡Œå‚æ•°æ¨å¯¼ã€‚
å‡½æ•°å†…éƒ¨è¿˜å¯ä»¥ä½¿ç”¨ <code>:=</code>æ›¿æ¢varå£°æ˜å˜é‡ï¼Œæ­¤æ—¶å¿…é¡»åˆå§‹åŒ–ï¼Œä½†æ˜¯åœ¨å‡½æ•°ä½“å¤–éƒ¨ï¼Œç”±äºgoè§„å®šï¼Œæ¯æ¡è¯­å¥å¿…é¡»ç”±ç‰¹å®šçš„å…³é”®å­—å¼€å¤´ï¼Œæ‰€ä»¥å¤–éƒ¨ä¸å¯ä½¿ç”¨æ­¤è¯­æ³•ã€‚</p><p>goæœ‰ä»¥ä¸‹åŸºç¡€ç±»å‹ï¼Œé™¤äº†é¢å¤–çš„complexç±»å‹ä¹‹å¤–å…¶ä»–çš„å’Œc++ç±»ä¼¼ï¼Œé›¶å€¼ä¹Ÿå’Œc++ç±»ä¼¼ï¼Œcomplexçš„é›¶å€¼ä¸º<code>(0+0i)</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>int</span>  <span style=color:#66d9ef>int8</span>  <span style=color:#66d9ef>int16</span>  <span style=color:#66d9ef>int32</span>  <span style=color:#66d9ef>int64</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>uint</span> <span style=color:#66d9ef>uint8</span> <span style=color:#66d9ef>uint16</span> <span style=color:#66d9ef>uint32</span> <span style=color:#66d9ef>uint64</span> <span style=color:#66d9ef>uintptr</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>byte</span> <span style=color:#75715e>// alias for uint8
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>rune</span> <span style=color:#75715e>// alias for int32
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>     <span style=color:#75715e>// represents a Unicode code point
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>float32</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>complex64</span> <span style=color:#66d9ef>complex128</span>
</span></span></code></pre></div><p>goå¯ä»¥ä½¿ç”¨cçš„è¯­æ³•è¿›è¡Œç±»å‹è½¬æ¢ï¼Œä½†æ˜¯cå…è®¸éšå¼è½¬æ¢ï¼Œè€Œgoå¿…é¡»å£°æ˜è½¬æ¢çš„ç±»å‹ï¼Œå¦åˆ™è¯­æ³•é”™è¯¯
goä¸­ä½¿ç”¨nilä½œä¸ºnull</p><h3 id=å¸¸é‡>å¸¸é‡
<a href=#%e5%b8%b8%e9%87%8f class=h-anchor aria-hidden=true>#</a></h3><p>ç›´æ¥ä½¿ç”¨<code>const xx = y</code>çš„è¯­æ³•å£°æ˜ï¼Œä¸å…è®¸ä½¿ç”¨<code>:=</code>ï¼Œå› ä¸ºä»–éšå«æœ‰å˜é‡å£°æ˜çš„æ„æ€ï¼Œ</p><h2 id=è¯­å¥>è¯­å¥
<a href=#%e8%af%ad%e5%8f%a5 class=h-anchor aria-hidden=true>#</a></h2><h3 id=for>for
<a href=#for class=h-anchor aria-hidden=true>#</a></h3><p>goåªæœ‰forä¸€ç§å¾ªç¯ç»“æ„ï¼Œä¸c++ç›¸æ¯”ï¼Œgoçš„()æ˜¯çœç•¥æ‰çš„ï¼Œ{}æ˜¯å¿…é¡»çš„ï¼Œå…¶ä¸­init statementå’Œpost statementæ˜¯å¯ä»¥çœç•¥çš„ï¼Œ condition expressionä¸å¯çœç•¥ï¼Œè¿™å’Œc++ä¸€æ ·ï¼Œä¸”åœ¨init statementå’Œpost statementçœç•¥çš„æ—¶å€™ï¼Œ;ä¹Ÿå¯ä»¥çœç•¥ï¼Œæ­¤æ—¶forå¾ªç¯ç±»ä¼¼c++ä¸­çš„whileå¾ªç¯</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// the init statement: executed before the first iteration    å¯çœç•¥
</span></span></span><span style=display:flex><span><span style=color:#75715e>// the condition expression: evaluated before every iteration ä¸å¯çœç•¥
</span></span></span><span style=display:flex><span><span style=color:#75715e>// the post statement: executed at the end of every iteration å¯çœç•¥
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>sum</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>i</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> ;<span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>sum</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>i</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>sum</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>i</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>å¦‚æœæ¡ä»¶è¯­å¥å»æ‰ï¼Œåˆ™æ­¤æ—¶æ˜¯ä¸ªæ­»å¾ªç¯ï¼Œä¸‹é¢çš„ä»£ç è¡¨ç°æ˜¯ä¸€æ ·çš„</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#66d9ef>true</span> {
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=if>if
<a href=#if class=h-anchor aria-hidden=true>#</a></h3><p>ç±»ä¼¼forï¼Œè¡¨è¾¾æ˜¯çš„æ‹¬å·æ˜¯å¯çœç•¥çš„ï¼Œ{}æ˜¯å¿…é¡»çš„ï¼Œå‰é¢çš„forçš„()å…¶å®ä¹Ÿæ˜¯å¯é€‰çš„ï¼Œä½†æ˜¯å¿…é¡»æ˜¯åªæœ‰æ¡ä»¶è¡¨è¾¾å¼çš„æ—¶å€™ï¼Œ<em>æ‰€ä»¥çŒœæµ‹æ˜¯å¦æ˜¯åªæœ‰ä¸€ä¸ªè¯­å¥è¡¨è¾¾å¼çš„æ—¶å€™æ‰å¯ä»¥ä½¿ç”¨æ‹¬å·</em>ï¼Œifåœ¨æ¡ä»¶è¯­å¥ä¹‹å‰ä¹Ÿå¯ä»¥ä½¿ç”¨initè¯­å¥ï¼Œæ­¤æ—¶åˆå§‹åŒ–çš„å‚æ•°åªèƒ½åœ¨ifèŒƒå›´å†…ä½¿ç”¨</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>pow</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>lim</span> <span style=color:#66d9ef>float64</span>) <span style=color:#66d9ef>float64</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Pow</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>n</span>); <span style=color:#a6e22e>v</span> &lt; <span style=color:#a6e22e>lim</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>lim</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=switch>Switch
<a href=#switch class=h-anchor aria-hidden=true>#</a></h3><p>å’Œå‰é¢ç±»ä¼¼ï¼Œè¡¨è¾¾æ˜¯çš„æ‹¬å·æ˜¯å¯çœç•¥çš„ï¼Œ{}æ˜¯å¿…é¡»çš„ï¼ŒSwitchåé¢åŒ…å«init è¯­å¥å’Œéœ€è¦åŒ¹é…çš„è¡¨è¾¾å¼ï¼Œinitè¯­å¥å¯ä»¥åœ¨å¤–éƒ¨å®ç°ï¼Œcaseè¯­å¥å’Œå…¶ä»–è¯­è¨€çš„å®ç°ä¸ä¸€æ ·ï¼Œæ²¡æœ‰é»˜è®¤fallthrohï¼Œä»–çš„æ¯ä¸€ä¸ªcaseä¸éœ€è¦å†™breakï¼Œé»˜è®¤è¡Œä¸ºå°±æ˜¯breakçš„ï¼Œçš„ä¸”caseçš„è¡¨è¾¾å¼è¦æ±‚æ˜¯constantï¼Œä¸è¦æ±‚æ˜¯æ•´å½¢</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;Go runs on &#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>os</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>runtime</span>.<span style=color:#a6e22e>GOOS</span>; <span style=color:#a6e22e>os</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;darwin&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;OS X.&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;linux&#34;</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Linux.&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%s.\n&#34;</span>, <span style=color:#a6e22e>os</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼ŒcaseåŒ¹é…è¡¨è¾¾å¼æˆåŠŸçš„åˆ†æ”¯</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>today</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>().<span style=color:#a6e22e>Weekday</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Saturday</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>today</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Today.&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>today</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Tomorrow.&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>today</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>2</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;In two days.&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Too far away.&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>Switchæ˜¯ä¸€ä¸ªç­‰å€¼åŒ¹é…è¿‡ç¨‹ï¼Œæ‰€ä»¥Switchåé¢çš„è¯­å¥æ˜¯caseè®¡ç®—çš„ç»“æœï¼Œå¦‚æœæ­¤æ—¶Switchä¹‹åçš„ç»“æœæ˜¯trueï¼Œåˆ™å¯ä»¥çœç•¥ï¼Œæ­¤æ—¶å°±æ˜¯ä¸€å †caseåœ¨åˆ¤æ–­æ˜¯å¦ä¸ºtrueï¼Œç›¸å½“äºå¤§é‡çš„è¿ä½“if-else</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>t</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Hour</span>() &lt; <span style=color:#ae81ff>12</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Good morning!&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>Hour</span>() &lt; <span style=color:#ae81ff>17</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Good afternoon.&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Good evening.&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><h3 id=defer>defer
<a href=#defer class=h-anchor aria-hidden=true>#</a></h3><p>æŠŠdeferä¿®é¥°çš„è¯­è¨€å»¶è¿Ÿåˆ°å‡½æ•°è¿”å›ä¹‹åæ‰è¿”å›ï¼Œæ‰€æœ‰çš„deferä¿®é¥°çš„è¯­å¥ä½¿ç”¨æ ˆç»´æŠ¤ï¼Œæœ€åè°ƒç”¨çš„deferè¯­å¥æœ€å…ˆæ‰§è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;counting&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;done&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=æŒ‡é’ˆå¤åˆç±»å‹>æŒ‡é’ˆï¼Œå¤åˆç±»å‹
<a href=#%e6%8c%87%e9%92%88%e5%a4%8d%e5%90%88%e7%b1%bb%e5%9e%8b class=h-anchor aria-hidden=true>#</a></h2><h3 id=æŒ‡é’ˆ>æŒ‡é’ˆ
<a href=#%e6%8c%87%e9%92%88 class=h-anchor aria-hidden=true>#</a></h3><p>å’ŒC/C++çš„æŒ‡é’ˆç±»ä¼¼ï¼Œä½¿ç”¨*å£°æ˜æŒ‡é’ˆï¼Œä½¿ç”¨&å–åœ°å€ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>  <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>j</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>42</span>, <span style=color:#ae81ff>2701</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>i</span>         <span style=color:#75715e>// point to i
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>p</span>) <span style=color:#75715e>// read i through the pointer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#f92672>*</span><span style=color:#a6e22e>p</span> = <span style=color:#ae81ff>21</span>         <span style=color:#75715e>// set i through the pointer
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>i</span>)  <span style=color:#75715e>// see the new value of i
</span></span></span></code></pre></div><h3 id=structs>Structs
<a href=#structs class=h-anchor aria-hidden=true>#</a></h3><p>ç»“æ„ä½“ï¼Œå’ŒC/C++ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨.è®¿é—®å˜é‡ï¼Œç»“æ„ä½“æ˜¯è‡ªå®šä¹‰å¤åˆç±»å‹ï¼Œå‚æ•°ä¼ é€’çš„æ—¶å€™éœ€è¦åŒºåˆ†å€¼ä¼ é€’å’Œå¼•ç”¨ä¼ é€’ï¼Œæ‰€ä»¥å»ºè®®ç»“æ„ä½“ä½¿ç”¨æŒ‡é’ˆæ“ä½œï¼Œç»“æ„ä½“ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™æŒ‡é’ˆçš„*å¯ä»¥çœç•¥ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨<code>pointer.filed</code>çš„è¯­æ³•ï¼Œä¸€ä¸ªè¯­æ³•ç³–</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>X</span> = <span style=color:#ae81ff>1e9</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ç»“æ„ä½“åˆå§‹åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥æŒ‰ç…§ç»“æ„ä½“å­—æ®µå£°æ˜çš„é¡ºåºåˆå§‹åŒ–ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å­—æ®µåæŒ‡å®šåˆå§‹åŒ–ï¼Œæ­¤æ—¶å…¶ä»–æ²¡æœ‰åˆå§‹åŒ–çš„å­—æ®µä¸ºé›¶å€¼ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>v2</span> = <span style=color:#a6e22e>Vertex</span>{<span style=color:#a6e22e>Y</span>: <span style=color:#ae81ff>1</span>}  <span style=color:#75715e>// Y:0 is implicit
</span></span></span></code></pre></div><p>å¦å¤–ï¼Œgoé‡Œé¢åˆå§‹åŒ–å˜é‡çš„æ—¶å€™è¯­æ³•æ˜¯ <code>x := 1</code>ï¼Œåˆå§‹åŒ–åŸºç¡€ç±»å‹çš„æ—¶å€™ç±»å‹å¯ä»¥çœç•¥ï¼Œä¼šè¿›è¡Œç±»å‹æ¨å¯¼ï¼Œä½†æ˜¯å¯¹äºéåŸºç¡€ç±»å‹ï¼Œéœ€è¦æ˜¾ç¤ºå£°æ˜ç±»å‹ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>i</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>b</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>	}{<span style=color:#ae81ff>2</span>, <span style=color:#66d9ef>true</span>}
</span></span></code></pre></div><h3 id=arrays>Arrays
<a href=#arrays class=h-anchor aria-hidden=true>#</a></h3><p>ç±»ä¼¼C/C++ä¸­çš„æ™®é€šæ•°ç»„ï¼Œåˆå§‹åŒ–ä¹‹åæ— æ³•ç›´æ¥æ”¹å˜å¤§å°ï¼Œc++æä¾›vectoræ¥æ‰©å±•æ•°ç»„çš„åŠŸèƒ½ï¼Œè€Œgoä½¿ç”¨æ–°ç±»å‹sliceä¸æ•°ç»„ç»“åˆä½¿ç”¨</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>primes</span> <span style=color:#f92672>:=</span> [<span style=color:#ae81ff>6</span>]<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>13</span>}
</span></span></code></pre></div><p>å’Œç»“æ„ä½“ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>i</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>b</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>	}{
</span></span><span style=display:flex><span>		{<span style=color:#ae81ff>2</span>, <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>		{<span style=color:#ae81ff>3</span>, <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>		{<span style=color:#ae81ff>5</span>, <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>		{<span style=color:#ae81ff>7</span>, <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>		{<span style=color:#ae81ff>11</span>, <span style=color:#66d9ef>false</span>},
</span></span><span style=display:flex><span>		{<span style=color:#ae81ff>13</span>, <span style=color:#66d9ef>true</span>},
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><h3 id=slice>slice
<a href=#slice class=h-anchor aria-hidden=true>#</a></h3><p>åˆ‡ç‰‡ç±»å‹ï¼Œå¯ä»¥ç†è§£ä¸ºæ•°ç»„çš„çª—å£æ“ä½œï¼Œåœ¨æ•°ç»„ä¸Šä½¿ç”¨è¯­æ³•<code>arr[low : high]</code>å¯ä»¥æ„é€ ä¸€ä¸ªæ•°ç»„ä¸Š<code>[low : high)</code>çš„ç‰‡æ®µï¼Œå†…éƒ¨æ•°æ®è¿˜æ˜¯åœ¨åŸæ¥çš„åœ°å€ä¸Šï¼Œåˆ‡ç‰‡çš„æ•°æ®çš„å˜åŠ¨å°±æ˜¯ç›´æ¥åœ¨æ›´æ”¹å…ƒæ•°æ®ï¼Œåœ¨æ•°ç»„çš„æ‰€æœ‰çš„åˆ‡ç‰‡æˆ–è€…æ•°ç»„æœ¬èº«çš„æ•°æ®å˜åŠ¨ï¼Œéƒ½ä¼šå°è±¡åˆ°å…¶ä»–å¯¹è±¡ï¼Œç±»ä¼¼C++çš„string_viewï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦æ³¨æ„ã€‚èŒƒå›´éœ€è¦æ˜¯åœ¨arrçš„åˆç†èŒƒå›´ï¼Œä¸å…è®¸è¶Šç•Œï¼Œä¸å…è®¸ä½¿ç”¨è´Ÿæ•°ï¼Œä¸¤ä¸ªå…ƒç´ ï¼Œå¯ä»¥çœç•¥å…¶ä¸­ä¸€ä¸ªæˆ–è€…ä¸¤ä¸ªéƒ½çœç•¥ï¼Œæ­¤æ—¶çœç•¥çš„å…ƒç´ å°±æ˜¯0æˆ–è€…æ˜¯arr.size()</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>names</span> <span style=color:#f92672>:=</span> [<span style=color:#ae81ff>4</span>]<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;John&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;Paul&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;George&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;Ringo&#34;</span>,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>names</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>names</span>[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>names</span>[<span style=color:#ae81ff>1</span>:<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>b</span>[<span style=color:#ae81ff>0</span>] = <span style=color:#e6db74>&#34;XXX&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>names</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>-----------</span>
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>John</span> <span style=color:#a6e22e>Paul</span> <span style=color:#a6e22e>George</span> <span style=color:#a6e22e>Ringo</span>]
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>John</span> <span style=color:#a6e22e>Paul</span>] [<span style=color:#a6e22e>Paul</span> <span style=color:#a6e22e>George</span>]
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>John</span> <span style=color:#a6e22e>XXX</span>] [<span style=color:#a6e22e>XXX</span> <span style=color:#a6e22e>George</span>]
</span></span><span style=display:flex><span>[<span style=color:#a6e22e>John</span> <span style=color:#a6e22e>XXX</span> <span style=color:#a6e22e>George</span> <span style=color:#a6e22e>Ringo</span>]
</span></span></code></pre></div><p>åˆ‡ç‰‡è¿˜å¯ä»¥ä½¿ç”¨åˆ‡ç‰‡åˆå§‹åŒ–ã€‚åˆ‡ç‰‡å¯ä»¥ä½¿ç”¨ç±»ä¼¼æ•°ç»„çš„æ–¹å¼å£°æ˜ï¼Œ æ²¡æœ‰å£°æ˜é•¿åº¦çš„æ—¶å€™æ˜¯åˆ‡ç‰‡ç±»å‹ï¼Œä¸‹é¢æ˜¯å‡ ä¸ªåˆ‡ç‰‡åˆå§‹åŒ–çš„ä¾‹å­</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> [<span style=color:#ae81ff>10</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>a</span>[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>10</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>a</span>[:<span style=color:#ae81ff>10</span>]
</span></span><span style=display:flex><span><span style=color:#a6e22e>a</span>[<span style=color:#ae81ff>0</span>:]
</span></span><span style=display:flex><span><span style=color:#a6e22e>a</span>[:]
</span></span></code></pre></div><p>åˆ‡ç‰‡å¯ä»¥ä½¿ç”¨<code>len</code>å’Œ<code>cap</code>æŸ¥çœ‹å¤§å°å’Œå®¹é‡ï¼Œlenæ˜¯å½“å‰åˆ‡ç‰‡çš„å…ƒç´ æ•°é‡ï¼Œcapæ˜¯åˆ‡ç‰‡å½“å‰startåˆ°æ•°ç»„endçš„å¤§å°ï¼Œåˆ‡ç‰‡è°ƒæ•´çš„æ—¶å€™ï¼Œåªèƒ½åœ¨å½“å‰åˆ‡ç‰‡startçš„ä½ç½®åˆ°capä¹‹é—´è°ƒæ•´ï¼Œæ— æ³•ç›´æ¥è°ƒæ•´åˆ°åˆ‡ç‰‡ä¹‹å‰çš„ä½ç½®</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// len=6 cap=6 [2 3 5 7 11 13]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>7</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>13</span>}
</span></span><span style=display:flex><span><span style=color:#75715e>// len=0 cap=6 []
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> = <span style=color:#a6e22e>s</span>[:<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>// len=4 cap=6 [2 3 5 7]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> = <span style=color:#a6e22e>s</span>[:<span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>// len=2 cap=4 [5 7]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> = <span style=color:#a6e22e>s</span>[<span style=color:#ae81ff>2</span>:]
</span></span><span style=display:flex><span><span style=color:#75715e>// len=4 cap=4 [5 7 11 13]
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> = <span style=color:#a6e22e>s</span>[:<span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span><span style=color:#75715e>// error
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>s</span> = <span style=color:#a6e22e>s</span>[:<span style=color:#ae81ff>5</span>]
</span></span></code></pre></div><ul><li>å¯ä»¥ä½¿ç”¨makeæ„é€ åˆ‡ç‰‡ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¸ºåˆ‡ç‰‡çš„lenï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºåˆ‡ç‰‡çš„capï¼Œcapé»˜è®¤ä¸ºlen</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>int</span>, <span style=color:#ae81ff>5</span>)  <span style=color:#75715e>// len(a)=5
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>int</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>5</span>) <span style=color:#75715e>// len(b)=0, cap(b)=5
</span></span></span></code></pre></div><ul><li>åˆ‡ç‰‡å¯ä»¥åŒ…å«ä»»ä½•ç±»å‹ï¼Œä¾‹å¦‚åˆ‡ç‰‡çš„åˆ‡ç‰‡</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>board</span> <span style=color:#f92672>:=</span> [][]<span style=color:#66d9ef>string</span>{
</span></span><span style=display:flex><span>		[]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;_&#34;</span>, <span style=color:#e6db74>&#34;_&#34;</span>, <span style=color:#e6db74>&#34;_&#34;</span>},
</span></span><span style=display:flex><span>		[]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;_&#34;</span>, <span style=color:#e6db74>&#34;_&#34;</span>, <span style=color:#e6db74>&#34;_&#34;</span>},
</span></span><span style=display:flex><span>		[]<span style=color:#66d9ef>string</span>{<span style=color:#e6db74>&#34;_&#34;</span>, <span style=color:#e6db74>&#34;_&#34;</span>, <span style=color:#e6db74>&#34;_&#34;</span>},
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>å¯ä»¥ä½¿ç”¨appendåŠ¨æ€æ‰©å±•åˆ‡ç‰‡ï¼Œç±»ä¼¼vectorï¼Œä½†æ˜¯åœ¨goä¸­ï¼Œç®€å•çš„å®éªŒä¹‹åï¼Œæ²¡æœ‰å‘ç°æ‰©å®¹ä¹‹åå†…å­˜åœ°å€å‘ç”Ÿå˜åŒ–ï¼Œå°šä¸”ä¸æ¸…æ¥šå†…å­˜è¶…å‡ºå®¹é‡ä¹‹åæ˜¯å¦é‡æ–°åˆ†é…ç©ºé—´äº†</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#a6e22e>s</span> = append(<span style=color:#a6e22e>s</span>, <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>printSlice</span>(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p3</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%p\n&#34;</span>, <span style=color:#a6e22e>p3</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// We can add more than one element at a time.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>s</span> = append(<span style=color:#a6e22e>s</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>printSlice</span>(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>p4</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>s</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%p\n&#34;</span>, <span style=color:#a6e22e>p4</span>)
</span></span><span style=display:flex><span><span style=color:#f92672>------</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>len</span>=<span style=color:#ae81ff>2</span> <span style=color:#a6e22e>cap</span>=<span style=color:#ae81ff>2</span> [<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span><span style=color:#ae81ff>0xc0000b4018</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>len</span>=<span style=color:#ae81ff>5</span> <span style=color:#a6e22e>cap</span>=<span style=color:#ae81ff>6</span> [<span style=color:#ae81ff>0</span> <span style=color:#ae81ff>1</span> <span style=color:#ae81ff>2</span> <span style=color:#ae81ff>3</span> <span style=color:#ae81ff>4</span>]
</span></span><span style=display:flex><span><span style=color:#ae81ff>0xc0000b4018</span>
</span></span></code></pre></div><blockquote><p>TIPS: goä¸­ï¼Œä¼˜å…ˆä½¿ç”¨åˆ‡ç‰‡ç±»å‹</p></blockquote><h3 id=exercise-slices>Exercise: Slices
<a href=#exercise-slices class=h-anchor aria-hidden=true>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Pic</span>(<span style=color:#a6e22e>dx</span>, <span style=color:#a6e22e>dy</span> <span style=color:#66d9ef>int</span>) [][]<span style=color:#66d9ef>uint8</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> make([][]<span style=color:#66d9ef>uint8</span>, <span style=color:#a6e22e>dy</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>x</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>s</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>s</span>[<span style=color:#a6e22e>x</span>] = make([]<span style=color:#66d9ef>uint8</span>, <span style=color:#a6e22e>dx</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>y</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>s</span>[<span style=color:#a6e22e>x</span>] {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>s</span>[<span style=color:#a6e22e>x</span>][<span style=color:#a6e22e>y</span>] = uint8((<span style=color:#a6e22e>x</span>^<span style=color:#a6e22e>y</span>))
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>s</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>pic</span>.<span style=color:#a6e22e>Show</span>(<span style=color:#a6e22e>Pic</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=range>range
<a href=#range class=h-anchor aria-hidden=true>#</a></h3><p>å¯¹äºåˆ‡ç‰‡ï¼Œåœ¨forå¾ªç¯ä¸­ä½¿ç”¨rangeå¯ä»¥è·å¾—åˆ‡ç‰‡çš„ä¸‹æ ‡å’Œå¯¹åº”çš„å€¼ï¼Œå¯ä»¥ä½¿ç”¨<code>_</code>çœç•¥ä¸æƒ³ä½¿ç”¨çš„å‚æ•°ï¼Œæˆ–è€…ç›´æ¥ä½¿ç”¨ä¸€ä¸ªå‚æ•°æ¥æ”¶index</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>pow</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>int</span>, <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>pow</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>pow</span>[<span style=color:#a6e22e>value</span>] = <span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;&lt;</span> uint(<span style=color:#a6e22e>value</span>) <span style=color:#75715e>// == 2**i
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>value</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>pow</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%d\n&#34;</span>, <span style=color:#a6e22e>value</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=map>map
<a href=#map class=h-anchor aria-hidden=true>#</a></h3><p>é”®å€¼å¯¹ï¼Œè¯­æ³•ä¸º<code>map[ktype]vtype</code>ï¼Œä½¿ç”¨makeæ„å»ºï¼Œå’ŒC++çš„mapä½¿ç”¨ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨<code>[]</code>æ¥è®¿é—®æˆ–è€…è®¾ç½®ä¸€ä¸ªå€¼ï¼Œå…¶ä¸­å¯ä»¥ä½¿ç”¨è¯­æ³•<code>ele, ok = map[key]</code>æ¥æµ‹è¯•keyæ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™okä¸ºtrueï¼Œå…¶eleè·å¾—å€¼ï¼Œå¦åˆ™eleä¸ºé›¶å€¼ä¸”okä¸ºfalseã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;Answer&#34;</span>] = <span style=color:#ae81ff>42</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;The value:&#34;</span>, <span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;Answer&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;Answer&#34;</span>] = <span style=color:#ae81ff>48</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;The value:&#34;</span>, <span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;Answer&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	delete(<span style=color:#a6e22e>m</span>, <span style=color:#e6db74>&#34;Answer&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;The value:&#34;</span>, <span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;Answer&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;Answer&#34;</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;The value:&#34;</span>, <span style=color:#a6e22e>v</span>, <span style=color:#e6db74>&#34;Present?&#34;</span>, <span style=color:#a6e22e>ok</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=func-as-value>func as value
<a href=#func-as-value class=h-anchor aria-hidden=true>#</a></h3><p>ç±»ä¼¼å‡½æ•°æŒ‡é’ˆï¼Œå‡½æ•°å¯ä»¥ä½¿ç”¨å‡½æ•°ä½œä¸ºå‚æ•°ï¼Œä½†æ˜¯C++ä¸­å¯ä»¥ä½¿ç”¨æŒ‡é’ˆæˆ–è€…functionè¡¨è¾¾å¼ä½œä¸ºå‚æ•°å£°æ˜ï¼Œgoä¸­åˆ™éœ€è¦ä½¿å®Œæ•´çš„å‚æ•°ç­¾åã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>compute</span>(<span style=color:#a6e22e>fn</span> <span style=color:#66d9ef>func</span>(<span style=color:#66d9ef>float64</span>, <span style=color:#66d9ef>float64</span>) <span style=color:#66d9ef>float64</span>) <span style=color:#66d9ef>float64</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fn</span>(<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>hypot</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>float64</span>) <span style=color:#66d9ef>float64</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Sqrt</span>(<span style=color:#a6e22e>x</span><span style=color:#f92672>*</span><span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span><span style=color:#f92672>*</span><span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>hypot</span>(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>12</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>compute</span>(<span style=color:#a6e22e>hypot</span>))
</span></span></code></pre></div><p>å‡½æ•°è¿˜å¯ä»¥ä½¿ç”¨é—­åŒ…çš„ç‰¹æ€§ï¼Œä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œadderçš„è¿”å›å€¼æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œä»–æ•è·äº†adderä¸­çš„sumå˜é‡ã€‚ä¹‹åå¯¹äºæ¯ä¸€ä¸ªadderåŠ¿åŠ›ï¼Œä»–å†…éƒ¨çš„suméƒ½æ˜¯ç‹¬ç«‹å­˜åœ¨çš„ï¼Œä¸”ä¼šè¢«ä¹‹å‰çš„è°ƒç”¨å½±å“åˆ°ï¼Œç›´è§‚çš„ç†è§£å°±æ˜¯ä»–å®ç°äº†ä¸€ä¸ªç®€å•çš„ç±»ï¼Œæ‰“åŒ…äº†ç±»å±æ€§å’Œæ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>adder</span>() <span style=color:#66d9ef>func</span>(<span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>sum</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>sum</span> <span style=color:#f92672>+=</span> <span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>sum</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>pos</span>, <span style=color:#a6e22e>neg</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>adder</span>(), <span style=color:#a6e22e>adder</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>pos</span>(<span style=color:#a6e22e>i</span>),
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>neg</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span><span style=color:#f92672>*</span><span style=color:#a6e22e>i</span>),
</span></span><span style=display:flex><span>		)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Exercise: Fibonacci closure</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>fibonacci</span>() <span style=color:#66d9ef>func</span>() <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>() <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>ret</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> = <span style=color:#a6e22e>y</span>, (<span style=color:#a6e22e>x</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>y</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>ret</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>f</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>fibonacci</span>()
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>f</span>())
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=è‡³æ­¤å°±æ˜¯goçš„åŸºç¡€è¯­æ³•ä¸ç»“æ„æœ‰å…¶ä»–è¯­è¨€åŸºç¡€å‡ ä¹ä¸€éè¿‡æ¥ä¸‹æ¥æ˜¯æ¯”è¾ƒé«˜çº§ç‚¹çš„çŸ¥è¯†å¯èƒ½éœ€è¦æ›´å¤šçš„æ€è€ƒ>è‡³æ­¤å°±æ˜¯goçš„åŸºç¡€è¯­æ³•ä¸ç»“æ„ï¼Œæœ‰å…¶ä»–è¯­è¨€åŸºç¡€å‡ ä¹ä¸€éè¿‡ï¼Œæ¥ä¸‹æ¥æ˜¯æ¯”è¾ƒé«˜çº§ç‚¹çš„çŸ¥è¯†ï¼Œå¯èƒ½éœ€è¦æ›´å¤šçš„æ€è€ƒ
<a href=#%e8%87%b3%e6%ad%a4%e5%b0%b1%e6%98%afgo%e7%9a%84%e5%9f%ba%e7%a1%80%e8%af%ad%e6%b3%95%e4%b8%8e%e7%bb%93%e6%9e%84%e6%9c%89%e5%85%b6%e4%bb%96%e8%af%ad%e8%a8%80%e5%9f%ba%e7%a1%80%e5%87%a0%e4%b9%8e%e4%b8%80%e9%81%8d%e8%bf%87%e6%8e%a5%e4%b8%8b%e6%9d%a5%e6%98%af%e6%af%94%e8%be%83%e9%ab%98%e7%ba%a7%e7%82%b9%e7%9a%84%e7%9f%a5%e8%af%86%e5%8f%af%e8%83%bd%e9%9c%80%e8%a6%81%e6%9b%b4%e5%a4%9a%e7%9a%84%e6%80%9d%e8%80%83 class=h-anchor aria-hidden=true>#</a></h2><h2 id=high-level>high level
<a href=#high-level class=h-anchor aria-hidden=true>#</a></h2><h3 id=æ–¹æ³•>æ–¹æ³•
<a href=#%e6%96%b9%e6%b3%95 class=h-anchor aria-hidden=true>#</a></h3><p>goæ²¡æœ‰ç±»ï¼Œä¸åƒC++å¯ä»¥å®šä¹‰è‡ªå·±çš„åŸºç¡€ç±»å‹ï¼Œä½†æ˜¯å¯ä»¥ä½¿ç”¨å…¶ä»–æœºåˆ¶å®ç°ç±»ä¼¼C++çš„å¯¹è±¡è°ƒç”¨æ–¹æ³•çš„å®ç°ï¼Œåœ¨å‡½æ•°åç§°ä¹‹å‰å£°æ˜receiverï¼Œè°ƒç”¨çš„æ—¶å€™ä½¿ç”¨receiver ç±»å‹è°ƒç”¨å‡½æ•°ï¼Œ<br>è¯­æ³•ä¸º<code>func (v receivertype) func_name(args ...) ret.. {}</code>ï¼Œå…·ä½“ä¾‹å­ä¸º</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span>, <span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>Abs</span>() <span style=color:#66d9ef>float64</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Sqrt</span>(<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>*</span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>*</span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Abs</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>å¯ä»¥çœ‹è§ï¼Œè¯­æ³•å’ŒC++çš„ç±»è°ƒç”¨æ–¹æ³•ä¸€æ ·ï¼Œè™½ç„¶å®ç°ä¸ä¸€æ ·ï¼ŒC++å®ç°ç±»æ–¹æ³•çš„åº•å±‚åŸç†æ˜¯æ–¹æ³•çš„ç¬¬ä¸€ä¸ªéšè—çš„å‚æ•°æ˜¯thisæŒ‡é’ˆï¼Œè°ƒç”¨çš„æ—¶å€™ä½¿ç”¨obj.funcçš„è¯­æ³•è°ƒç”¨ï¼Œä½†æ˜¯å®é™…ä¸Šçš„è°ƒç”¨æ˜¯<code>func(obj...)</code>ï¼Œåªæ˜¯ä¸ºäº†ä½“ç°OOPçš„æ€æƒ³ï¼Œè¯­æ³•æŒ‰ç…§ç°åœ¨çš„å®ç°æœºåˆ¶å®ç°ï¼Œå…¶å®éƒ½å·®ä¸å¤šã€‚goçš„æ˜¯å®ç°æ˜¯æŠŠç±»å‹å’Œæ–¹æ³•åˆ†ç¦»ï¼Œæœ€ç»ˆå®ç°çš„æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼Œã€‚</p><p>æ­¤å¤–ï¼Œgoçš„receiveræ˜¯é€šè¿‡æ‹·è´çš„æ–¹å¼è°ƒç”¨çš„ï¼Œæ‰€ä»¥å‡½æ•°å†…çš„æ“ä½œæ— æ³•ç›´æ¥å½±å“åˆ°receiverï¼Œä½†æ˜¯å¯ä»¥æŠŠreceiverå£°æ˜ä¸ºæŒ‡é’ˆï¼Œæ­¤æ—¶å°±æ˜¯åœ¨ä½¿ç”¨æŒ‡é’ˆè°ƒç”¨å‡½æ•°äº†ï¼Œå¯ä»¥å®ç°å’ŒC++å¸¸è§„è°ƒç”¨ä¸€æ ·çš„æ•ˆæœï¼Œå…¶ç”±äºGOçš„æŒ‡é’ˆå’Œå€¼çš„è°ƒç”¨ä¸€æ ·ï¼Œæ‰€ä»¥å‡ ä¹åœ¨ä»£ç ä¸Šæ²¡æœ‰å·®åˆ«</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span>, <span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>Abs</span>() <span style=color:#66d9ef>float64</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Sqrt</span>(<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>*</span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>*</span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>Scale</span>(<span style=color:#a6e22e>f</span> <span style=color:#66d9ef>float64</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span> = <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>f</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span> = <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>f</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Scale</span>(<span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Abs</span>())
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ä½†æ˜¯å½“å‡½æ•°ä¸­çš„å‚æ•°ä½¿ç”¨æŒ‡é’ˆçš„æ—¶å€™ï¼Œç›´æ¥è°ƒç”¨çš„æ—¶å€™å¿…é¡»ä½¿ç”¨æŒ‡é’ˆç±»å‹ï¼Œ æ­¤æ—¶ç¼–è¯‘å™¨æ²¡æœ‰åšç›´æ¥æ›¿æ¢ï¼Œreceiverè°ƒç”¨çš„æ—¶å€™ï¼Œæ˜¯ä¼šè‡ªåŠ¨è½¬æ¢çš„ï¼Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>v</span> <span style=color:#a6e22e>Vertex</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ScaleFunc</span>(<span style=color:#a6e22e>v</span>, <span style=color:#ae81ff>5</span>)  <span style=color:#75715e>// Compile error!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>ScaleFunc</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>v</span>, <span style=color:#ae81ff>5</span>) <span style=color:#75715e>// OK
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#f92672>------</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>v</span> <span style=color:#a6e22e>Vertex</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Scale</span>(<span style=color:#ae81ff>5</span>)  <span style=color:#75715e>// OK
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>p</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>v</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>Scale</span>(<span style=color:#ae81ff>10</span>) <span style=color:#75715e>// OK
</span></span></span></code></pre></div><blockquote><p>ç®€è€Œè¨€ä¹‹ï¼Œä½¿ç”¨receiverçš„æ—¶å€™ï¼Œå‡½æ•°æ— è®ºå£°æ˜receiverä¸ºæŒ‡é’ˆæˆ–è€…å€¼ï¼Œéƒ½å¯ä»¥è‡ªç”±è°ƒç”¨ï¼Œå…·ä½“è¡Œä¸ºæœ‰receiverçš„å£°æ˜æ–¹å¼å†³å®šï¼Œä½†æ˜¯ä½œä¸ºå‚æ•°çš„æ—¶å€™ï¼Œå£°æ˜ä¸ºæŒ‡é’ˆï¼Œåˆ™å¿…é¡»ä½¿ç”¨æŒ‡é’ˆå‚æ•°</p></blockquote><h3 id=interfaces>Interfaces
<a href=#interfaces class=h-anchor aria-hidden=true>#</a></h3><p>æ¥å£ï¼Œä¸€ç»„æŠ½çº¿æ–¹æ³•çš„å£°æ˜ï¼Œæ‰€æœ‰å®ç°å¯¹åº”çš„æ–¹æ³•çš„ç±»å‹éƒ½è§†ä¸ºå®ç°äº†æ¥å£ï¼Œæ­¤æ—¶å¯ä»¥æŠŠç›¸åº”çš„å…·ä½“çš„å¯¹è±¡èµ‹å€¼ç»™æ¥å£å¯¹è±¡</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Abser</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Abs</span>() <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span>, <span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>Abs</span>() <span style=color:#66d9ef>float64</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>math</span>.<span style=color:#a6e22e>Sqrt</span>(<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>*</span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>*</span><span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> <span style=color:#a6e22e>Abser</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>a</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>v</span>
</span></span></code></pre></div><p>æ¥å£å…·æœ‰å…·ä½“çš„å€¼å’Œå’Œç±»å‹ï¼Œè™½ç„¶åœ¨è°ƒç”¨çš„æ—¶å€™æ˜¯ç›´æ¥ä½¿ç”¨æ¥å£è°ƒç”¨å…·ä½“æ–¹æ³•ã€‚ä½†æ˜¯åº”è¯¥å’ŒC++çš„å¤šæ€ç±»ä¼¼ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶ä½¿ç”¨æŸä¿¡æ¯è¿›è¡Œå‡½æ•°è°ƒç”¨ï¼Œæ¥å£å¯ä»¥ä½¿ç”¨<code>%v</code>å’Œ<code>%T</code>æ‰“å°å€¼å’Œç±»å‹</p><p>å½“å®ç°æ¥å£çš„ç±»å‹çš„receiveræ˜¯æŒ‡é’ˆç±»å‹ä¸”æ˜¯nilï¼Œåˆ™æ­¤æ—¶è¿˜æ˜¯å¯ä»¥ç»§ç»­æ­£å¸¸è°ƒç”¨å‡½æ•°ï¼Œåªæ˜¯å¿…é¡»è‡ªå·±å¤„ç†nilã€‚ç±»ä¼¼C++ä¸­ï¼Œnullå¯¹è±¡ä¹Ÿå¯ä»¥æ­£å¸¸è°ƒç”¨ç±»çš„éé™æ€æ–¹æ³•ï¼Œåªè¦æ²¡æœ‰ä½¿ç”¨åˆ°ç±»çš„å…¶ä»–æˆå‘˜å˜é‡æˆ–è€…æˆå‘˜å‡½æ•°ï¼Œå°±å¯ä»¥æ­£å¸¸è¿è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>t</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>T</span>) <span style=color:#a6e22e>M</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>t</span> <span style=color:#f92672>==</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;&lt;nil&gt;&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>t</span>.<span style=color:#a6e22e>S</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>æ²¡æœ‰è¢«å®ç°çš„æ¥å£ç§°ä¸ºnil interfaceï¼Œæ­¤æ—¶å¯ä»¥æ­£å¸¸å®šä¹‰å¯¹è±¡ï¼Œä½†æ˜¯å€¼å’Œtypeéƒ½æ˜¯nilï¼Œä¸èƒ½è°ƒç”¨æ¥å£å‡½æ•°</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>I</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>M</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#a6e22e>I</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>describe</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>i</span>.<span style=color:#a6e22e>M</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>describe</span>(<span style=color:#a6e22e>i</span> <span style=color:#a6e22e>I</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;(%v, %T)\n&#34;</span>, <span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>--------------</span>
</span></span><span style=display:flex><span>(&lt;<span style=color:#66d9ef>nil</span>&gt;, &lt;<span style=color:#66d9ef>nil</span>&gt;)
</span></span><span style=display:flex><span><span style=color:#a6e22e>panic</span>: <span style=color:#a6e22e>runtime</span> <span style=color:#66d9ef>error</span>: <span style=color:#a6e22e>invalid</span> <span style=color:#a6e22e>memory</span> <span style=color:#a6e22e>address</span> <span style=color:#a6e22e>or</span> <span style=color:#66d9ef>nil</span> <span style=color:#a6e22e>pointer</span> <span style=color:#a6e22e>dereference</span>
</span></span></code></pre></div><p>empty interfaceå¯ä»¥æ¥å—ä»»ä½•å‚æ•°ï¼Œç±»ä¼¼C++ çš„voidæŒ‡é’ˆå¯ä»¥æ¥å—å…¨æŒ‡é’ˆç±»å‹ã€‚</p><p>æ­¤å¤–ï¼Œmapä¸­æœ‰ä¸ªè¯­æ³•å¯ä»¥æµ‹è¯•å¯¹åº”çš„keyæ˜¯å¦å­˜åœ¨ï¼Œinterfaceä¹Ÿæä¾›ç±»ä¼¼çš„åŠŸèƒ½ï¼Œæ£€éªŒæ¥å£æ˜¯å¦æ˜¯æŒ‡å®šç±»å‹ï¼Œè¯­æ³•ä¸º<code>v, ok := i.(type)</code>ï¼Œä½¿ç”¨è§„åˆ™å’Œmapç±»ä¼¼</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#66d9ef>interface</span>{} = <span style=color:#e6db74>&#34;hello&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>i</span>.(<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>i</span>.(<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>ok</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>f</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>i</span>.(<span style=color:#66d9ef>float64</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>f</span>)
</span></span></code></pre></div><p>è€ƒè™‘éœ€è¦æ£€ç´¢æ¥å£çš„ç±»å‹çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨å¾ªç¯è¯­å¥ä¸€ä¸ªä¸€ä¸ªçš„å®éªŒï¼Œä½†æ˜¯æœ€å¥½çš„åŠæ³•è¿˜æ˜¯æœ‰æ¥å£å¯ä»¥ä¸»åŠ¨çš„å‘Šè¯‰æˆ‘ä»¬ã€‚æ‰€ä»¥goæä¾›<code>i.(type)</code>å’Œswitchè¿ç”¨çš„æ–¹å¼ï¼Œè®©æˆ‘ä»¬å¯ä»¥å¿«é€Ÿçš„ç¼–å†™å‡ºä¸åŒç±»å‹æ¥å£çš„ä»£ç ï¼Œå¦‚ä¸‹æ¡ˆä¾‹ï¼Œå…¶ä¸­typeæ˜¯å›ºå®šè¯­æ³•ã€‚ä¸”åªèƒ½åœ¨switchä¸­ä½¿ç”¨ï¼Œæ— æ³•å•ç‹¬ä½¿ç”¨ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>do</span>(<span style=color:#a6e22e>i</span> <span style=color:#66d9ef>interface</span>{}) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>i</span>.(<span style=color:#66d9ef>type</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>int</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Twice %v is %v\n&#34;</span>, <span style=color:#a6e22e>v</span>, <span style=color:#a6e22e>v</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>case</span> <span style=color:#66d9ef>string</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%q is %v bytes long\n&#34;</span>, <span style=color:#a6e22e>v</span>, len(<span style=color:#a6e22e>v</span>))
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;I don&#39;t know about type %T!\n&#34;</span>, <span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>do</span>(<span style=color:#ae81ff>21</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>do</span>(<span style=color:#e6db74>&#34;hello&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>do</span>(<span style=color:#66d9ef>true</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=stdé¢„è®¾æ¥å£>stdé¢„è®¾æ¥å£
<a href=#std%e9%a2%84%e8%ae%be%e6%8e%a5%e5%8f%a3 class=h-anchor aria-hidden=true>#</a></h3><p>stdé¢„å®šä¹‰çš„æ¥å£Stringerï¼Œåªè¦è‡ªå®šä¹‰ç±»å‹å®ç°Stringæ–¹æ³•ï¼Œåˆ™å¯ä»¥è‡ªå®šä¹‰toStringçš„æ–¹æ³•ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Stringer</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>error æ¥å£ï¼Œå®šä¹‰Erroræ–¹æ³•ï¼Œç”¨äºå®ç°è‡ªå®šä¹‰é”™è¯¯ç±»å‹ï¼Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#66d9ef>error</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Error</span>() <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=exercise-stringers>Exercise: Stringers
<a href=#exercise-stringers class=h-anchor aria-hidden=true>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>IPAddr</span> [<span style=color:#ae81ff>4</span>]<span style=color:#66d9ef>byte</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>i</span> <span style=color:#a6e22e>IPAddr</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;%v.%v.%v.%v&#34;</span>, <span style=color:#a6e22e>i</span>[<span style=color:#ae81ff>0</span>], <span style=color:#a6e22e>i</span>[<span style=color:#ae81ff>1</span>], <span style=color:#a6e22e>i</span>[<span style=color:#ae81ff>2</span>], <span style=color:#a6e22e>i</span>[<span style=color:#ae81ff>3</span>])
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>hosts</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#a6e22e>IPAddr</span>{
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;loopback&#34;</span>:  {<span style=color:#ae81ff>127</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>0</span>, <span style=color:#ae81ff>1</span>},
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;googleDNS&#34;</span>: {<span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>8</span>, <span style=color:#ae81ff>8</span>},
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>ip</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>hosts</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%v: %v\n&#34;</span>, <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>ip</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=exercise-errors>Exercise: Errors
<a href=#exercise-errors class=h-anchor aria-hidden=true>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>ErrNegativeSqrt</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>e</span> <span style=color:#a6e22e>ErrNegativeSqrt</span>) <span style=color:#a6e22e>Error</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprintf</span>(<span style=color:#e6db74>&#34;cannot Sqrt negative number: %v&#34;</span>, float64(<span style=color:#a6e22e>e</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Sqrt</span>(<span style=color:#a6e22e>x</span> <span style=color:#66d9ef>float64</span>) (<span style=color:#66d9ef>float64</span>, <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>x</span> &lt; <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>, <span style=color:#a6e22e>ErrNegativeSqrt</span>(<span style=color:#a6e22e>x</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>Sqrt</span>(<span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>Sqrt</span>(<span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=goroutine>goroutine
<a href=#goroutine class=h-anchor aria-hidden=true>#</a></h3><h3 id=channels>Channels
<a href=#channels class=h-anchor aria-hidden=true>#</a></h3><h3 id=select>Select
<a href=#select class=h-anchor aria-hidden=true>#</a></h3></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://askyx.github.io/posts/mapreduce/><span class=button__icon>â†</span>
<span class=button__text>Mapreduce</span>
</a></span><span class="button next"><a href=https://askyx.github.io/posts/coursenote/><span class=button__text>Coursenote</span>
<span class=button__icon>â†’</span></a></span></div></div></div></div><footer class=footer><div class=footer__inner><a href=https://askyx.github.io/ class=logo style=text-decoration:none><span class=logo__mark><svg xmlns="http://www.w3.org/2000/svg" class="greater-icon" viewBox="0 0 44 44"><path fill="none" d="M15 8l14.729 14.382L15 35.367"/></svg></span><span class=logo__text>Asky</span>
<span class=logo__cursor></span></a><div class=copyright><span>Â© 2025 Powered by
<a href=https://gohugo.io target=_blank rel=noopener>Hugo</a></span>
<span>Theme created by
<a href=https://twitter.com/panr target=_blank rel=noopener>panr</a></span></div></div></footer><script src=https://askyx.github.io/assets/main.js></script><script src=https://askyx.github.io/assets/prism.js></script></div></body></html>