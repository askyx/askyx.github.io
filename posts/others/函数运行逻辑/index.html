<!doctype html><html lang=zh-Hans x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>| Askyx's Blog</title>
<link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ğŸŒ±</text></svg>"></link>
<link rel=canonical href=https://askyx.github.io/posts/others/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91/><meta name=author content="Askyx"><meta name=description content="predicate_refuted_by å’Œ make_new_qual_listçš„è¿è¡Œé€»è¾‘ä»¥åŠPARAM æ— æ³•é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„åŸå›  make_new_qual_listéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼å’Œåˆ†"><meta name=keywords content><meta name=generator content="Hugo 0.121.0"><meta property="og:title" content><meta property="og:description" content="predicate_refuted_by å’Œ make_new_qual_listçš„è¿è¡Œé€»è¾‘ä»¥åŠPARAM æ— æ³•é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„åŸå›  make_new_qual_listéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼å’Œåˆ†"><meta property="og:type" content="article"><meta property="og:url" content="https://askyx.github.io/posts/others/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91/"><meta property="og:image" content="https://askyx.github.io/img/global-background.jpg"><meta property="article:section" content="posts"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://askyx.github.io/img/global-background.jpg"><meta name=twitter:title content><meta name=twitter:description content="predicate_refuted_by å’Œ make_new_qual_listçš„è¿è¡Œé€»è¾‘ä»¥åŠPARAM æ— æ³•é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„åŸå›  make_new_qual_listéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼å’Œåˆ†"><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><link rel=stylesheet href=/css/custom.css><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js integrity="sha256-PtHu0lJIiSHfZeNj1nFd6wTX+Squ255SGZ/fc8seCtM=" crossorigin=anonymous></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!"><div class="h-10 rounded-full"><img src=/img/personal/avatar.jpg alt="Askyx's Blog"></div></div><div><a href=https://askyx.github.io/ class="text-lg font-semibold cursor-pointer">Askyx's Blog</a><div class="text-base-content/60 text-sm">life is short, use Python</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md"><li><div role=link tabindex=0 class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title=About><ion-icon name=information-circle></ion-icon>About</div></li><li><a class="group inline-flex items-center p-2 cursor-pointer" href=/search title=Search><ion-icon name=search></ion-icon>Search</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=https://github.com/askyx target=_blank title=GitHub><ion-icon name=logo-github></ion-icon>GitHub</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><div role=link tabindex=0 class="text-sm font-semibold cursor-pointer hover:underline" @click="flip = !flip" title=About>About</div><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/search title=Search><ion-icon class=group-hover:text-primary-content name=search></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=https://github.com/askyx target=_blank title=GitHub><ion-icon class=group-hover:text-primary-content name=logo-github></ion-icon></a><div class="dropdown dropdown-end dropdown-hover"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option"><ion-icon class="group-hover:text-primary-content text-xl" name=menu></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-xl"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li></ul></div></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content><meta itemprop=description content="predicate_refuted_by å’Œ make_new_qual_listçš„è¿è¡Œé€»è¾‘ä»¥åŠPARAM æ— æ³•é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„åŸå›  make_new_qual_listéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼å’Œåˆ†"><meta itemprop=wordCount content="1403"><meta itemprop=image content="https://askyx.github.io/img/global-background.jpg"><meta itemprop=keywords content><header><h1 itemprop=headline></h1><p class=text-sm><span data-format=luxon>0001-01-01T00:00:00Z</span>
| <span>3 minute read</span>
| <span>Updated at
<span data-format=luxon>0001-01-01T00:00:00Z</span></span></p><div class="flex justify-between"><div class="flex items-center"><span>@</span>
<span itemprop=author itemscope itemtype=https://schema.org/Person><span itemprop=name>Askyx</span></span></div><div class="flex items-center gap-2"><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://x.com/intent/post?text=&amp;url=https://askyx.github.io/posts/others/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91/" target=_blank rel="noopener noreferrer" title="Share on X"><ion-icon class=group-hover:text-primary-content name=logo-x></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://facebook.com/sharer/sharer.php?u=https://askyx.github.io/posts/others/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91/" target=_blank rel="noopener noreferrer" title="Share on Facebook"><ion-icon class=group-hover:text-primary-content name=logo-facebook></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href="https://wa.me/?text=%20https://askyx.github.io/posts/others/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91/" target=_blank rel="noopener noreferrer" title="Share on WhatsApp"><ion-icon class=group-hover:text-primary-content name=logo-whatsapp></ion-icon></a></div></div></header><section id=dream-single-post-content itemprop=articleBody><p>predicate_refuted_by å’Œ make_new_qual_listçš„è¿è¡Œé€»è¾‘ä»¥åŠPARAM æ— æ³•é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„åŸå› </p><p>make_new_qual_listéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼å’Œåˆ†åŒºä¿¡æ¯æ„é€ æ–°çš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯PARAMä¸æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥æ— æ³•æ„é€ ï¼Œ
æ‰€ä»¥predicate_refuted_byåˆ¤å®šå˜å¤§æ—¶å’Œçº¦æŸçš„æ—¶å€™æ— æ³•æ­£ç¡®çš„é€‰æ‹©èŠ‚ç‚¹ï¼ŒåŠ¨æ€è¯­å¥åªè¦ä½¿ç”¨åˆ°åˆ†åŒºé”®éƒ½ä¸è¡Œ</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span>node_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>                              Table <span style=color:#e6db74>&#34;public.bmsql_new_order&#34;</span>
</span></span><span style=display:flex><span> Column  <span style=color:#f92672>|</span>  Type   <span style=color:#f92672>|</span> Nullable <span style=color:#f92672>|</span> Storage <span style=color:#f92672>|</span>
</span></span><span style=display:flex><span><span style=color:#f92672>---------+---------+----------+---------+</span>
</span></span><span style=display:flex><span> no_w_id <span style=color:#f92672>|</span> integer <span style=color:#f92672>|</span> not null <span style=color:#f92672>|</span> plain   <span style=color:#f92672>|</span> 
</span></span><span style=display:flex><span> no_d_id <span style=color:#f92672>|</span> integer <span style=color:#f92672>|</span> not null <span style=color:#f92672>|</span> plain   <span style=color:#f92672>|</span> 
</span></span><span style=display:flex><span> no_o_id <span style=color:#f92672>|</span> integer <span style=color:#f92672>|</span> not null <span style=color:#f92672>|</span> plain   <span style=color:#f92672>|</span> 
</span></span><span style=display:flex><span>Indexes:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;bmsql_new_order_pkey&#34;</span> PRIMARY KEY, btree (no_w_id, no_d_id, no_o_id)
</span></span><span style=display:flex><span>Foreign<span style=color:#f92672>-</span>key constraints:
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;no_order_fkey&#34;</span> FOREIGN KEY (no_w_id, no_d_id, no_o_id) REFERENCES bmsql_oorder(o_w_id, o_d_id, o_id)
</span></span><span style=display:flex><span>DISTRIBUTE BY HASH(no_w_id) TO NODE(dn1, dn2)
</span></span><span style=display:flex><span>Access method: heap
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>æ•°æ®åˆ†å¸ƒ</span>
</span></span><span style=display:flex><span>benchmarksql<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>#</span> execute direct on (dn1) <span style=color:#960050;background-color:#1e0010>&#39;</span>select distinct no_w_id from <span style=color:#66d9ef>public</span>.bmsql_new_order<span style=color:#960050;background-color:#1e0010>&#39;</span>;
</span></span><span style=display:flex><span> no_w_id 
</span></span><span style=display:flex><span><span style=color:#f92672>---------</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>3</span> rows)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>benchmarksql<span style=color:#f92672>=</span><span style=color:#960050;background-color:#1e0010>#</span> execute direct on (dn2) <span style=color:#960050;background-color:#1e0010>&#39;</span>select distinct no_w_id from <span style=color:#66d9ef>public</span>.bmsql_new_order<span style=color:#960050;background-color:#1e0010>&#39;</span>;
</span></span><span style=display:flex><span> no_w_id 
</span></span><span style=display:flex><span><span style=color:#f92672>---------</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>2</span> rows)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>è¯­å¥</span>select no_o_id from bmsql_new_order where no_w_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> order by no_o_id asc;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>========================================</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(no_w_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>COALESCE(hash_combin_mod(<span style=color:#ae81ff>2</span>, hash(no_w_id)), <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> and (no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>hash(no_w_id) <span style=color:#f92672>%</span> node_count <span style=color:#f92672>=</span> hash(<span style=color:#ae81ff>4</span>) <span style=color:#f92672>%</span> node_count
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>===============</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(no_w_id, no_d_id, no_o_id) is not null 
</span></span><span style=display:flex><span>XC_NODE_ID is not null
</span></span><span style=display:flex><span>ABLE.XC_NODE_ID<span style=color:#f92672>=</span>id
</span></span><span style=display:flex><span>COALESCE(hash_combin_mod(<span style=color:#ae81ff>2</span>, hash(no_w_id))<span style=color:#960050;background-color:#1e0010>ï¼Œ</span> <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>ç¬¬ä¸€è½®ï¼Œæ£€æµ‹æ¡ä»¶</span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> <span style=color:#960050;background-color:#1e0010>é™åˆ¶æ¡ä»¶ä¸º</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1.</span> <span style=color:#960050;background-color:#1e0010>ä¸»é”®ä¸ä¸º</span>NULL<span style=color:#960050;background-color:#1e0010>ï¼Œ</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2.</span> <span style=color:#960050;background-color:#1e0010>èŠ‚ç‚¹</span>XC_NODE_IDä¸ä¸ºnull
</span></span><span style=display:flex><span><span style=color:#ae81ff>3.</span> XC_NODE_ID<span style=color:#f92672>=</span>loc_info.nodeid
</span></span><span style=display:flex><span><span style=color:#ae81ff>4.</span> hash(no_w_id) <span style=color:#f92672>%</span> node_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> <span style=color:#960050;background-color:#1e0010>è¾“å…¥è¡¨è¾¾å¼ä¸º</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1.</span> (no_w_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#ae81ff>2.</span> (hash(no_w_id) <span style=color:#f92672>%</span> node_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>) and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> (<span style=color:#960050;background-color:#1e0010>è¯­å¥æ¡ä»¶æ ¹æ®åˆ†å¸ƒæ–¹å¼è®¡ç®—çš„</span>hash)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>ç”±äº</span>hashå‡ºæ¥åˆ¤æ–­çš„èŠ‚ç‚¹ä¸ä¸€è‡´<span style=color:#960050;background-color:#1e0010>ï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡åˆ¤æ–­</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>=============================================</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(no_w_id, no_d_id, no_o_id) is not null 
</span></span><span style=display:flex><span>XC_NODE_ID is not null
</span></span><span style=display:flex><span>XC_NODE_ID<span style=color:#f92672>=</span>id
</span></span><span style=display:flex><span>COALESCE(hash_combin_mod(<span style=color:#ae81ff>2</span>, hash(no_w_id)), <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(no_w_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>COALESCE(hash_combin_mod(<span style=color:#ae81ff>2</span>, hash(no_w_id)), <span style=color:#ae81ff>0</span>) <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> and (no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>ç¬¬è€Œè½®ï¼Œæ£€æµ‹æ¡ä»¶</span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> <span style=color:#960050;background-color:#1e0010>é™åˆ¶æ¡ä»¶ä¸º</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1.</span> <span style=color:#960050;background-color:#1e0010>ä¸»é”®ä¸ä¸º</span>NULL<span style=color:#960050;background-color:#1e0010>ï¼Œ</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>2.</span> <span style=color:#960050;background-color:#1e0010>èŠ‚ç‚¹</span>XC_NODE_IDä¸ä¸ºnull
</span></span><span style=display:flex><span><span style=color:#ae81ff>3.</span> XC_NODE_ID<span style=color:#f92672>=</span>loc_info.nodeid
</span></span><span style=display:flex><span><span style=color:#ae81ff>4.</span> hash(no_w_id) <span style=color:#f92672>%</span> node_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>-</span> <span style=color:#960050;background-color:#1e0010>è¾“å…¥è¡¨è¾¾å¼ä¸º</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1.</span> (no_w_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>4</span> and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span><span style=color:#ae81ff>2.</span> (hash(no_w_id) <span style=color:#f92672>%</span> node_count <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>) and no_d_id <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span> (<span style=color:#960050;background-color:#1e0010>è¯­å¥æ¡ä»¶æ ¹æ®åˆ†å¸ƒæ–¹å¼è®¡ç®—çš„</span>hash)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>åˆ¤å®šè¡¨è¾¾å¼æ˜¯å¦å¯ä»¥é€šè¿‡çº¦æŸçš„æ£€æŸ¥</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>åˆ¤å®šé€šè¿‡</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// é€’å½’åœ°æ£€æŸ¥å­å¥clause_listä¸­çš„å­å¥æ˜¯å¦é©³æ–¥ç»™å®šçš„predicate_list(ä¹Ÿå°±æ˜¯è¯´ï¼Œè¯æ˜å®ƒä¸º false)ã€‚
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>predicate_list
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_w_id is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_d_id is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_o_id is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* XC_NODE_ID is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* XC_NODE_ID = nodeid
</span></span></span><span style=display:flex><span><span style=color:#75715e>* hash(no_w_id) % node_count = 0
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>clause_list
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_w_id = 4
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_d_id = 1
</span></span></span><span style=display:flex><span><span style=color:#75715e>* hash(no_w_id) % node_count = 1
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_d_id = 1
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>predicate_list
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_w_id is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_d_id is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_o_id is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* XC_NODE_ID is not null
</span></span></span><span style=display:flex><span><span style=color:#75715e>* XC_NODE_ID = nodeid
</span></span></span><span style=display:flex><span><span style=color:#75715e>* hash(no_w_id) % node_count = 0
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>clause_list
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_w_id = $1
</span></span></span><span style=display:flex><span><span style=color:#75715e>* no_d_id = $2
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>predicate_refuted_by(<span style=color:#f92672>*</span>predicate_list, <span style=color:#f92672>*</span>clause_list) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  predicate_refuted_by_recurse() {
</span></span><span style=display:flex><span>    pclass <span style=color:#f92672>=</span> predicate_classify(predicate, <span style=color:#f92672>&amp;</span>pred_info);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// æ‹†è§£è¡¨è¾¾å¼ï¼Œæœ€ç»ˆä¸èƒ½æ‹†è§£çš„è¡¨è¾¾ä¹¦ä¸ºatom
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>switch</span> (predicate_classify(clause, <span style=color:#f92672>&amp;</span>clause_info)) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>case</span> CLASS_AND:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> (pclass) {
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>case</span> CLASS_AND: 
</span></span><span style=display:flex><span>            iterate_begin(pitem, predicate, pred_info) {
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>if</span> (predicate_refuted_by_recurse(clause, pitem, weak)) {
</span></span><span style=display:flex><span>                result <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>            iterate_begin(citem, clause, clause_info) {
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>if</span> (predicate_refuted_by_recurse(citem, predicate, weak)) {
</span></span><span style=display:flex><span>                result <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>case</span> CLASS_OR:
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>case</span> CLASS_ATOM:
</span></span><span style=display:flex><span>            not_arg <span style=color:#f92672>=</span> extract_not_arg(predicate);
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> (not_arg <span style=color:#f92672>&amp;&amp;</span> predicate_implied_by_recurse(clause, not_arg, false))
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>return</span> true;
</span></span><span style=display:flex><span>            iterate_begin(citem, clause, clause_info) {
</span></span><span style=display:flex><span>              <span style=color:#66d9ef>if</span> (predicate_refuted_by_recurse(citem, predicate, weak)) {
</span></span><span style=display:flex><span>                result <span style=color:#f92672>=</span> true;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>;
</span></span><span style=display:flex><span>        .....
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>case</span> CLASS_ATOM: {
</span></span><span style=display:flex><span>          .....
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>case</span> CLASS_ATOM:
</span></span><span style=display:flex><span>            <span style=color:#75715e>// ä½¿ç”¨æ­¤æ–¹æ³•åˆ¤æ–­æœ€ç»ˆçš„atomè¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#66d9ef>return</span> predicate_refuted_by_simple_clause((Expr <span style=color:#f92672>*</span>) predicate, clause, weak) {
</span></span><span style=display:flex><span>              <span style=color:#75715e>// 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>if</span> (predicate <span style=color:#f92672>&amp;&amp;</span> IsA(predicate, NullTest) <span style=color:#f92672>&amp;&amp;</span> ((NullTest <span style=color:#f92672>*</span>) predicate)<span style=color:#f92672>-&gt;</span>nulltesttype <span style=color:#f92672>==</span> IS_NULL) {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// åˆ¤æ–­nullï¼Œargisrowç›´æ¥falseï¼Œä¸€ä¸ªæ˜¯is not nullï¼Œ æ‹ä¸€ä¸ªæ˜¯is nullï¼Œåˆ™ç›´æ¥true
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>              <span style=color:#75715e>// å¯¹ç®€å•è¡¨è¾¾å¼çš„åˆ¤æ–­ï¼Œç®€å•è¡¨è¾¾å¼è¿™é‡ŒæŒ‡çš„æ˜¯ op(left, right)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>              <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>operator_predicate_proof</span>(predicate, clause, true, weak) {
</span></span><span style=display:flex><span>                <span style=color:#75715e>// no_w_id is not null ä»è¿™é‡Œè·³å‡º
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>is_opclause(predicate))
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>                pred_opexpr <span style=color:#f92672>=</span> (OpExpr <span style=color:#f92672>*</span>) predicate;
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (list_length(pred_opexpr<span style=color:#f92672>-&gt;</span>args) <span style=color:#f92672>!=</span> <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>                ....(<span style=color:#66d9ef>do</span> same as clause)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (pred_opexpr<span style=color:#f92672>-&gt;</span>inputcollid <span style=color:#f92672>!=</span> clause_opexpr<span style=color:#f92672>-&gt;</span>inputcollid)
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> (equal(pred_leftop, clause_leftop)) {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>if</span> (equal(pred_rightop, clause_rightop)) {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> operator_same_subexprs_proof(pred_op, clause_op, refute_it);
</span></span><span style=display:flex><span>                  } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> (pred_rightop <span style=color:#f92672>==</span> NULL <span style=color:#f92672>||</span> <span style=color:#f92672>!</span>IsA(pred_rightop, Const))
</span></span><span style=display:flex><span>                      <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>                    pred_const <span style=color:#f92672>=</span> (Const <span style=color:#f92672>*</span>) pred_rightop;
</span></span><span style=display:flex><span>                    ....
</span></span><span style=display:flex><span>                    <span style=color:#75715e>// ä¸‹é¢ä½¿ç”¨const_væ„é€ ä¸€ä¸ª ï¼ˆl_const != r_contï¼‰å¹¶è®¡ç®—ï¼Œç›´æ¥è¿”å›è®¡ç®—ç»“æœï¼Œä¸‹é¢çš„æ­¥éª¤ç±»ä¼¼
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>//  ä½¿ç”¨
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>//    hash(no_w_id) % node_count = 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>//  å’Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>//    hash(no_w_id) % node_count = 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                    <span style=color:#75715e>//   ä¸ºä¾‹ã€‚æœ€ç»ˆæ‰§è¡Œåˆ°è¿™é‡Œï¼Œconstå¯¹æ¯”ä¸ä¸€æ ·ï¼Œè¿”å›false
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>                  }
</span></span><span style=display:flex><span>                  
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (equal(pred_rightop, clause_rightop)) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (equal(pred_leftop, clause_rightop)) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (equal(pred_rightop, clause_leftop)) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>                  <span style=color:#66d9ef>return</span> false;
</span></span><span style=display:flex><span>                }
</span></span><span style=display:flex><span>              }
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>  çº¦æŸä½¿ç”¨åˆ†åŒºæ–¹å¼å’ŒèŠ‚ç‚¹åºå·æ„é€ è¡¨è¾¾å¼ï¼ŒæŸ¥è¯¢çš„whereè¡¨è¾¾å¼éœ€è¦åˆ¤æ–­èŠ‚ç‚¹ï¼Œä¹Ÿéœ€è¦æ„é€ ç±»ä¼¼çš„è¡¨è¾¾å¼
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>make_new_qual_list() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>  * let column=val to (like) hash(column)%remote_count = hash(value)%remote_count to hash(column)%remote_count = new_value
</span></span></span><span style=display:flex><span><span style=color:#75715e>  *   column [not] in (v1,v2) to hash(column)%remote [not] in (new_v1,new_v2)
</span></span></span><span style=display:flex><span><span style=color:#75715e>  */</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// è¡¨è¾¾å¼ä½¿ç”¨åˆ†åŒºä¿¡æ¯æ„é€  æ–°çš„clauseï¼Œè§„åˆ™å¦‚ä¸Š 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//  ä¾‹å¦‚ ï¼ˆno_w_id = 4 and no_d_id = 1ï¼‰ï¼Œä½¿ç”¨è¡¨çš„åˆ†åŒºä¿¡æ¯ä¼šå¯¹no_w_id = 4æ„é€ ä¸€ä¸ªæ–°çš„è¡¨è¾¾å¼ï¼Œ
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//   hash(column)%remote_count = hash(value)%remote_count
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//   hash(no_w_id)%remote_count = hash(4)%remote_count
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//  æ‰€ä»¥æœ€ç»ˆçš„clauseæ„é€ å‡ºæ¥æ˜¯ (hash(no_w_id) % node_count = 1)
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  <span style=color:#75715e>//  åŠ¨æ€å‚æ•°æ—¶ï¼Œæ­¤å¤„æ— æ³•æ„é€ 
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>  mutator_equal_expr() {
</span></span><span style=display:flex><span>    get_var_equal_const(op<span style=color:#f92672>-&gt;</span>args, op<span style=color:#f92672>-&gt;</span>opno, context<span style=color:#f92672>-&gt;</span>relid, context<span style=color:#f92672>-&gt;</span>varattno, <span style=color:#f92672>&amp;</span>var) <span style=color:#f92672>==</span> null;
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>goto</span> next_mutator_equal_expr_;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  next_mutator_equal_expr_:
</span></span><span style=display:flex><span>	  <span style=color:#66d9ef>return</span> expression_tree_mutator(node, mutator_equal_expr, context);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a role=button class="btn btn-outline h-12" href=/posts/others/log/ title><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 text-xs font-normal">Previous page</span>
<span class="max-w-48 truncate"></span></div></a><a role=button class="btn btn-outline h-12" href=/posts/personal/%E7%AE%80%E5%8E%86/ title><div class="inline-flex flex-col items-end"><span class="text-base-content/60 text-xs font-normal">Next page</span>
<span class="max-w-48 truncate"></span></div><ion-icon name=chevron-forward></ion-icon></a></div><div class=divider></div><section class=space-y-4><template x-if="['localhost', '127.0.0.1'].indexOf(window.location.hostname) == -1"><article><script src=https://utteranc.es/client.js repo=https://askyx.github.io/ issue-term=og:title theme=github-light crossorigin=anonymous async></script></article></template></section></article></div><div x-data=tocHighlighter() @scroll.window=debouncedScroll class="hidden lg:flex lg:flex-col lg:items-end lg:self-start"><nav id=TableOfContents></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>Â© 2016 - 2025 Askyx's Blog</p><p class=text-sm>ğŸŒ±
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"><div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column"><article class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"><div class=card-body><div class=card-title>About Me</div><div class="prose dark:prose-invert"><p>Hi, my name is Yue Yang.</p><p>This is my blog.</p><h2 id=ãƒ¾Ï‰o>ãƒ¾(â€¢Ï‰â€¢`)o</h2><p>æ¯”è¾ƒèƒ†å°ï¼Œå‡ºé—¨éƒ½å¾—è´´å¢™èµ°</p></div></div></article></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>Â© 2016 - 2025 Askyx's Blog</p><p class=text-sm>ğŸŒ±
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"en"}).toFormat("yyyyå¹´MMæœˆddæ—¥")})}</script><script src=/js/toc.min.js></script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img', {
        background: 'oklch(var(--b1))',
        margin: 24,
      })
    </script><script type=module src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin=anonymous></script><script nomodule src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin=anonymous></script></body></html>