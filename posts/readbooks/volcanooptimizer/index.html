<!doctype html><html lang=zh-Hans x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>VolcanoOptimizer | Askyx's Blog</title><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>🌱</text></svg>"></link>
<link rel=canonical href=https://askyx.github.io/posts/readbooks/volcanooptimizer/><meta name=author content="Askyx"><meta name=description content="NOTE 论文阅读笔记The Volcano Optimizer Generator: Extensibility and Efficient Search 可扩展
面向对象
自顶向下
剪枝
原型是EXODUS， Volcano是对他的改进
可以单独使用的优化器 优化搜索时间和搜索空间 可扩展 可以使用启发式算法和有效的代价模型来扩展和减少搜索空间，【剪枝】 灵活的成本计算模型 一个框架，优化器生成器，可以由“optimizer implementor”自行实现关键函数，整个优化器框架的输入是AST，输出是一个执行计划，算子的集合
"><meta name=keywords content><meta name=generator content="Hugo 0.148.1"><meta property="og:url" content="https://askyx.github.io/posts/readbooks/volcanooptimizer/"><meta property="og:site_name" content="Askyx's Blog"><meta property="og:title" content="VolcanoOptimizer"><meta property="og:description" content="NOTE 论文阅读笔记The Volcano Optimizer Generator: Extensibility and Efficient Search 可扩展
面向对象
自顶向下
剪枝
原型是EXODUS， Volcano是对他的改进
可以单独使用的优化器 优化搜索时间和搜索空间 可扩展 可以使用启发式算法和有效的代价模型来扩展和减少搜索空间，【剪枝】 灵活的成本计算模型 一个框架，优化器生成器，可以由“optimizer implementor”自行实现关键函数，整个优化器框架的输入是AST，输出是一个执行计划，算子的集合"><meta property="og:locale" content="zh_Hans"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-04T22:10:50+08:00"><meta property="article:modified_time" content="2025-07-18T17:05:11+08:00"><meta property="og:image" content="https://askyx.github.io/img/global-background.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://askyx.github.io/img/global-background.jpg"><meta name=twitter:title content="VolcanoOptimizer"><meta name=twitter:description content="NOTE 论文阅读笔记The Volcano Optimizer Generator: Extensibility and Efficient Search 可扩展
面向对象
自顶向下
剪枝
原型是EXODUS， Volcano是对他的改进
可以单独使用的优化器 优化搜索时间和搜索空间 可扩展 可以使用启发式算法和有效的代价模型来扩展和减少搜索空间，【剪枝】 灵活的成本计算模型 一个框架，优化器生成器，可以由“optimizer implementor”自行实现关键函数，整个优化器框架的输入是AST，输出是一个执行计划，算子的集合"><link rel=stylesheet href=/css/output.min.css><style>pre{padding:1em;overflow:auto}</style><link rel=stylesheet href=/css/custom.css><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js integrity="sha256-PtHu0lJIiSHfZeNj1nFd6wTX+Squ255SGZ/fc8seCtM=" crossorigin=anonymous></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!"><div class="h-10 rounded-full"><img src=/img/personal/avatar.jpg alt="Askyx's Blog"></div></div><div><a href=https://askyx.github.io/ class="text-lg font-semibold cursor-pointer">Askyx's Blog</a><div class="text-base-content/60 text-sm">life is short, use Python</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md"><li><div role=link tabindex=0 class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title=About><ion-icon name=information-circle></ion-icon>About</div></li><li><a class="group inline-flex items-center p-2 cursor-pointer" href=/search title=Search><ion-icon name=search></ion-icon>Search</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=https://github.com/askyx target=_blank title=GitHub><ion-icon name=logo-github></ion-icon>GitHub</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><div role=link tabindex=0 class="text-sm font-semibold cursor-pointer hover:underline" @click="flip = !flip" title=About>About</div><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/search title=Search><ion-icon class=group-hover:text-primary-content name=search></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=https://github.com/askyx target=_blank title=GitHub><ion-icon class=group-hover:text-primary-content name=logo-github></ion-icon></a><div class="dropdown dropdown-end dropdown-hover"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option"><ion-icon class="group-hover:text-primary-content text-xl" name=menu></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-xl"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li></ul></div></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="lg:grid lg:grid-cols-4 gap-4 mt-4 px-4"><div class="hidden lg:block"></div><div class=lg:col-span-2><article class="mx-auto prose prose-quoteless dark:prose-invert" id=dream-single-post-main itemscope itemtype=http://schema.org/Article><meta itemprop=name content="VolcanoOptimizer"><meta itemprop=description content="NOTE 论文阅读笔记The Volcano Optimizer Generator: Extensibility and Efficient Search 可扩展
面向对象
自顶向下
剪枝
原型是EXODUS， Volcano是对他的改进
可以单独使用的优化器 优化搜索时间和搜索空间 可扩展 可以使用启发式算法和有效的代价模型来扩展和减少搜索空间，【剪枝】 灵活的成本计算模型 一个框架，优化器生成器，可以由“optimizer implementor”自行实现关键函数，整个优化器框架的输入是AST，输出是一个执行计划，算子的集合"><meta itemprop=datePublished content="2022-04-04T22:10:50+08:00"><meta itemprop=dateModified content="2025-07-18T17:05:11+08:00"><meta itemprop=wordCount content="2874"><meta itemprop=image content="https://askyx.github.io/img/global-background.jpg"><header><h1 itemprop=headline>VolcanoOptimizer</h1><p class=text-sm><span data-format=luxon>2022-04-04T22:10:50+08:00</span>
| <span>6 minute read</span>
| <span>Updated at
<span data-format=luxon>2025-07-18T17:05:11+08:00</span></span></p></header><section id=dream-single-post-content itemprop=articleBody><h1 id=note>NOTE</h1><p>论文阅读笔记<a href=http://www.cse.iitb.ac.in/infolab/Data/Courses/CS632/Papers/Volcano-graefe.pdf target=_blank>The Volcano Optimizer Generator: Extensibility and Efficient Search</a></p><ul><li><p>可扩展</p></li><li><p>面向对象</p></li><li><p>自顶向下</p></li><li><p>剪枝</p></li><li><p>原型是EXODUS， Volcano是对他的改进</p><ul><li>可以单独使用的优化器</li><li>优化搜索时间和搜索空间</li><li>可扩展</li><li>可以使用启发式算法和有效的代价模型来扩展和减少搜索空间，【剪枝】</li><li>灵活的成本计算模型</li></ul></li><li><p>一个框架，优化器生成器，可以由“optimizer implementor”自行实现关键函数，整个优化器框架的输入是AST，输出是一个执行计划，算子的集合</p></li><li><p>SQL是基于关系代数，Volcano把关系表达式分为逻辑表达式和物理表达式，逻辑表达式之间使用transformation进行转换，物理表达式使用基于代价的implementation和逻辑表达式映射的，关系不一定是意义对应的，例如scan可以同时一起实现projection</p></li><li><p>在表达式进行转换的时候可以使用condition进行模式判断，满足条件的时候可以进行变换</p></li><li><p>表达式使用特征描述输出，</p></li><li><p>enforcers会强制添加某属性，用于指导优化器进行优化，例如指定表的scan方式</p></li></ul><p>Logical Operator<br>Operator set，也就是可以描述在目标data model上可以执行的代数运算合<br>Transformation rules + Condition，对每条等价变换规则，在满足condition时才可以应用<br>Logical properties : 逻辑属性，用来描述代数运算的输出所具有的一些特征，这些特征与运算的具体执行方式无关，是逻辑的，例如输出的行数，结果集的schema等</p><p>Physical Operator<br>Algorithm + Enforcer set，即可应用的物理实现算法 + 可添加的Enforcer集合<br>Implementation rules + Condition，满足Condition的前提下，可以尝试该物理算法<br>Cost model + Cost formula，基于cost选择最优的物理算法<br>Physical property，与logical property对应，物理属性是选择了特定的算法实现后，输出的数据所具有的物理上的特性，例如数据是否有序、是否具有唯一性，数据在多机上的分布情况等，不同的物理算法，会决定执行该operator产生的物理属性，例如sort merge join会在join key上产生有序属性<br>Applicability function : 决定一个物理算法，其输出是否可以满足要求父算子对自身的physical property要求，且决定它对自身的输入具有什么样的physical property要求<br>Enforcer是search engine中一个重要的概念，它用来强制产生某种物理属性。例如上层是join算子，在枚举时会考虑使用sort merge join的物理执行方式(Implementation），但当递归到下层时，子节点可以选择table scan（无序输出），或者index scan（目标序输出），当选择table scan时，由于输出不满足父算子对自身输出的物理属性要求，就可以通过Order Enforcer来产生目标输出，Enforcer表示了排序这个操作，同时也包含了排序操作会产生的代价。</p><h2 id=the--search--engine>The Search Engine</h2><p>搜索实现</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c++ data-lang=c++><span style=display:flex><span><span style=color:#75715e>// PhysProp：： 此LogExpr锁具有的物理属性的要求
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>FindBestPlan (LogExpr, PhysProp, Limit) 
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 如果可以在look-up table找到满足的计划，则代表以及算过，直接返回
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> the pair LogExpr and PhysProp is in the look<span style=color:#f92672>-</span>up table 
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>if</span> the cost in the look<span style=color:#f92672>-</span>up table <span style=color:#f92672>&lt;</span> Limit 
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> Plan and Cost 
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>else</span> 
</span></span><span style=display:flex><span>          <span style=color:#66d9ef>return</span> failure 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* else: optimization required */</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 否则进行优化，由三种优化方式
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//  1. 使用转换方法转换为等价的逻辑表达式，且使用相同物理属性计算
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//  2. 使用实现方法生成物理表达式，此处是本层的物理表达式，所以会递归调用，且计算本层代价TotalCost，此时是使用
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//        代价模型计算代价且使用剪枝
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//        Applicability functio决定Implementation是否满足PhysProp
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#75715e>//  3. 使用enforcer，计算enforcer的代价，且修改PhysProp为满足enforcer的PhysProp，使用新的PhysProp计算LogExpr
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    create the set of possible <span style=color:#e6db74>&#34;moves&#34;</span> from 
</span></span><span style=display:flex><span>        <span style=color:#f92672>-</span> applicable transformations 
</span></span><span style=display:flex><span>        <span style=color:#f92672>-</span> algorithms that give the required PhysProp 
</span></span><span style=display:flex><span>        <span style=color:#f92672>-</span> enforcers <span style=color:#66d9ef>for</span> required PhysProp 
</span></span><span style=display:flex><span>    order the set of moves by promise 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> the most promising moves 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> the move uses a  transformation 
</span></span><span style=display:flex><span>            apply the transformation creating NewLogExpr 
</span></span><span style=display:flex><span>            call FindBestPlan (NewLogExpr, PhysProp, Limit) 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> the move uses an algorithm
</span></span><span style=display:flex><span>            TotalCost :<span style=color:#f92672>=</span> cost of the algorithm 
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> each input I <span style=color:#66d9ef>while</span> TotalCost <span style=color:#f92672>&lt;</span> Limit 
</span></span><span style=display:flex><span>                determine required physical properties PP <span style=color:#66d9ef>for</span> I 
</span></span><span style=display:flex><span>                Cost <span style=color:#f92672>=</span> FindBestPlan (I, PP, Limit <span style=color:#f92672>-</span>  TotalCost) 
</span></span><span style=display:flex><span>                add Cost to TotalCost 
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span><span style=color:#75715e>/* move uses an enforcer */</span> 
</span></span><span style=display:flex><span>            TotalCost :<span style=color:#f92672>=</span> cost of the enforcer 
</span></span><span style=display:flex><span>            modify PhysProp <span style=color:#66d9ef>for</span> enforced property 
</span></span><span style=display:flex><span>            call FindBestPlan <span style=color:#66d9ef>for</span> LogExpr with <span style=color:#66d9ef>new</span> PhysProp 
</span></span><span style=display:flex><span>        <span style=color:#75715e>/* maintain the look-up table of explored facts */</span> 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//  如果没有在look-up table找到满足的计划，则insert
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> LogExpr is not in the look<span style=color:#f92672>-</span>up table 
</span></span><span style=display:flex><span>        insert LogExpr into the look<span style=color:#f92672>-</span>up table 
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//  记录左右执行计划
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    insert PhysProp and best plan found into look<span style=color:#f92672>-</span>up table 
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> best Plan and Cost
</span></span></code></pre></div><p>自定向下的搜索，使用三种规则向下扩展搜索空间，使用look-up table记录已搜索的表达式，在表达式没有新的扩展方法，或者达到代价阈值的时候停止搜索，</p><h2 id=自顶向下和自底向上>自顶向下和自底向上</h2><ul><li>自顶向下
volcano，cascades等<ol><li>在等价变形的范围不仅仅限于join，关系代数的等价变换都可以实现，所以理论上，这里可以使用一些启发式的算法，而不必要进行分层</li><li>可以在优化的过程中基于代价模型进行剪枝</li></ol></li><li>自底向上
几乎会枚举所有的执行计划，由更大的搜索空间，且由于在优化的过程中更多的只是为了搜索join order 的执行计划，所以需要提前进行一些启发式的算法，或优化语句结构便于优化器优化，或提前搜索到执行计划结束优化过程。</li></ul><h1 id=the-cascades-framework-for-query-optimization><a href=https://15721.courses.cs.cmu.edu/spring2018/papers/15-optimizer1/xu-columbia-thesis1998.pdf target=_blank>The Cascades Framework for Query Optimization</a></h1><p>对于volcano的改进和优化</p><ul><li>把原来的搜索流程拆分为单个的task，使用栈来实现，task之间使用一个DGA来维护调度关系</li><li>不区分逻辑表达式和物理表达式是</li><li>rule抽象为task，是具体的对象，apply 的时候区分表达类型</li></ul><p>group：
等价表达式的集合
expr：
表达式，等价表达式使用特征输入和特征输出来表示，表达式的输入可以是表达式，也可以是group，可以视为执行计划中的一个片段。
rule
抽象实现，分为逻辑表达式的转换rule和逻辑表达式转换到物理表达式的Implementation rule
是否可以适用某个rule需要判断表达式可以满足rule的某些要求的规则，这个规则抽象为pattern，如果满足pattern，则可以使用此转换方法转换表达式，转换之后的表达式称为Substitution</p><ul><li>OptimizeGroupTask
优化任务的入口，初始化的时候是整个ast的集合</li><li>OptimizeExprTask
对于group中的所有的表达式，一个表达式可能只是单纯的表达式，也有可能是由其他group作为输入的表达式，所以<ol><li>都表达式使用ApplyRuleTask入栈</li><li>对于所有表达式中的group，使用ExploreGroupTask入栈，此时对于此节点，会先完成ExploreGroupTask，然后再使用ApplyRuleTask</li><li>如果是物理表达式，则使用CreatePlanTask</li></ol></li><li>ApplyRuleTask
对表达式使用rule转换，使用nextSubstitute之后得到Substitution，可以对新的表达式使用<ol><li>ExploreExprTask</li><li>OptimizeExprTask</li><li>CreatePlanTask 如果是逻辑表达式，则使用CreatePlanTask</li></ol></li><li>ExploreGroupTask
对group中的所有表达式调用ExploreExprTask</li><li>ExploreExprTask
对所有的表达式，调用ApplyRuleTask，在表达式使用ApplyRuleTask之前，会先使用ExploreGroupTask扩展表达式的group</li><li>CreatePlanTask
对应的是implementation rule，转换表达式为物理表达式</li></ul><p>其中ApplyRuleTask某个表达式的时候，会先递归的使用ExploreGroupTask处理表达式的所有group，所以在transformation某个规则的时候，是整体的引用到整个表达式上</p></section><div class=divider></div><div class="flex flex-col md:flex-row justify-between gap-4 py-4"><a role=button class="btn btn-outline h-12" href=/posts/readbooks/leveldb/ title=LevelDB源码阅读><ion-icon name=chevron-back></ion-icon><div class="inline-flex flex-col items-start"><span class="text-base-content/60 text-xs font-normal">Previous page</span>
<span class="max-w-48 truncate">LevelDB源码阅读</span></div></a><a role=button class="btn btn-outline h-12" href=/posts/readbooks/columbia-optimizer/ title="Columbia Optimizer"><div class="inline-flex flex-col items-end"><span class="text-base-content/60 text-xs font-normal">Next page</span>
<span class="max-w-48 truncate">Columbia Optimizer</span></div><ion-icon name=chevron-forward></ion-icon></a></div></article></div><div x-data=tocHighlighter() @scroll.window=debouncedScroll class="hidden lg:flex lg:flex-col lg:items-end lg:self-start"><nav id=TableOfContents><ul><li><a href=#the--search--engine>The Search Engine</a></li><li><a href=#自顶向下和自底向上>自顶向下和自底向上</a></li></ul></nav></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2016 - 2025 Askyx's Blog</p><p class=text-sm>🌱
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"><div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column"><article class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"><div class=card-body><div class=card-title>About Me</div><div class="prose dark:prose-invert"><p>Hi, my name is Yue Yang.</p><p>This is my blog.</p><h2 id=ヾωo>ヾ(•ω•`)o</h2><p>比较胆小，出门都得贴墙走</p></div></div></article></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>© 2016 - 2025 Askyx's Blog</p><p class=text-sm>🌱
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0 integrity="sha256-4sbTzmCCW9LGrIh5OsN8V5Pfdad1F1MwhLAOyXKnsE0=" crossorigin=anonymous></script><script>format();function format(){document.querySelectorAll('span[data-format="luxon"]').forEach(e=>{const t=e.textContent;e.textContent=luxon.DateTime.fromISO(t,{locale:"en"}).toFormat("yyyy年MM月dd日")})}</script><script src=/js/toc.min.js></script><script type=module>
      import mediumZoom from 'https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/+esm';
      mediumZoom('#dream-single-post-content img', {
        background: 'oklch(var(--b1))',
        margin: 24,
      })
    </script><script type=module src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin=anonymous></script><script nomodule src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin=anonymous></script></body></html>