<!doctype html><html lang=zh-Hans x-data :class=$store.darkMode.class() :data-theme=$store.darkMode.theme()><head><meta charset=UTF-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Search | Askyx's Blog</title><link rel=icon href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%2210 0 100 100%22><text y=%22.90em%22 font-size=%2290%22>ğŸŒ±</text></svg>"></link>
<link rel=canonical href=https://askyx.github.io/search/><meta name=author content="Askyx"><meta name=description content="My personal blog"><meta name=generator content="Hugo 0.148.1"><meta property="og:url" content="https://askyx.github.io/search/"><meta property="og:site_name" content="Askyx's Blog"><meta property="og:title" content="Askyx's Blog"><meta property="og:description" content="My personal blog"><meta property="og:locale" content="zh_Hans"><meta property="og:type" content="website"><meta property="og:image" content="https://askyx.github.io/img/global-background.jpg"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://askyx.github.io/img/global-background.jpg"><meta name=twitter:title content="Askyx's Blog"><meta name=twitter:description content="My personal blog"><link rel=stylesheet href=/css/output.min.css><link rel=stylesheet href=/css/custom.css><script defer src=https://cdn.jsdelivr.net/npm/alpinejs@3/dist/cdn.min.js integrity="sha256-PtHu0lJIiSHfZeNj1nFd6wTX+Squ255SGZ/fc8seCtM=" crossorigin=anonymous></script></head><body x-data="{
    flip: false,
  }"><div id=dream-global-bg></div><nav x-data="{ isSticky: false }" x-init="window.addEventListener('scroll', () => { isSticky = window.scrollY > 30 })" class="sticky top-0 z-30 mt-4 lg:mt-8 py-4" :class="{ 'bg-base-100 shadow-lg dark:border-b dark:border-base-content/30': isSticky }"><div class="container flex justify-between px-4"><section class="flex items-center gap-4"><div class="avatar cursor-pointer hover:avatar-online" @click="flip = !flip" title="Flip it!"><div class="h-10 rounded-full"><img src=/img/personal/avatar.jpg alt="Askyx's Blog"></div></div><div><a href=https://askyx.github.io/ class="text-lg font-semibold cursor-pointer">Askyx's Blog</a><div class="text-base-content/60 text-sm">life is short, use Python</div></div></section><div class="dropdown dropdown-end sm:hidden"><div tabindex=0 role=button class="btn btn-ghost btn-square" aria-label="Select an option"><ion-icon name=menu class=text-2xl></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-md"><li><div role=link tabindex=0 class="inline-flex items-center p-2 cursor-pointer" @click="flip = !flip" title=About><ion-icon name=information-circle></ion-icon>About</div></li><li><a class="group inline-flex items-center p-2 cursor-pointer" href=/search title=Search><ion-icon name=search></ion-icon>Search</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=https://github.com/askyx target=_blank title=GitHub><ion-icon name=logo-github></ion-icon>GitHub</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li></ul></div><section class="hidden sm:flex sm:items-center sm:gap-2 md:gap-4"><div role=link tabindex=0 class="text-sm font-semibold cursor-pointer hover:underline" @click="flip = !flip" title=About>About</div><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=/search title=Search><ion-icon class=group-hover:text-primary-content name=search></ion-icon></a><a class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" href=https://github.com/askyx target=_blank title=GitHub><ion-icon class=group-hover:text-primary-content name=logo-github></ion-icon></a><div class="dropdown dropdown-end dropdown-hover"><div tabindex=0 role=button class="group inline-flex items-center p-2 rounded-full cursor-pointer hover:bg-primary" aria-label="Select an option"><ion-icon class="group-hover:text-primary-content text-xl" name=menu></ion-icon></div><ul tabindex=0 class="dropdown-content menu w-36 bg-base-100 rounded-box z-1 shadow-xl"><li><a class="inline-flex items-center p-2 cursor-pointer" href=/posts title=Archives><ion-icon name=archive></ion-icon>Archives</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/tags title="All Tags"><ion-icon name=pricetags></ion-icon>All Tags</a></li><li><a class="inline-flex items-center p-2 cursor-pointer" href=/index.xml title=RSS><ion-icon name=logo-rss></ion-icon>RSS</a></li></ul></div></section></div></nav><div class=flip-container :class="{ 'flip-it': flip }"><div class=flipper><div class=front><div class=container><div class="mt-8 lg:mt-12 px-4" x-data="{
  search: '',
  get posts() { return this.search !== '' ? window.fuse.search(this.search) : [] },
}"><label for=search class="input w-full"><input id=search name=search type=text class=grow placeholder=Search x-model.debounce=search>
<ion-icon name=search></ion-icon></label><div class="mt-8 space-y-4"><template x-for="post in posts"><a class="card bg-base-100 hover:bg-base-content/10 cursor-pointer border border-base-content/30" :href=post.item.url><div class=card-body><h2 class=card-title x-text=post.item.title></h2><div x-html=post.item.description></div><div class="card-actions justify-between items-center mt-4"><div class="flex items-center"><template x-if=post.item.avatar><div class="avatar mr-1"><div class="w-8 rounded-full"><img class=my-0 :src=post.item.avatar :alt=post.item.author></div></div></template><template x-if=!post.item.avatar><span>@</span>
</template><template x-if=post.item.author><span x-text=post.item.author></span>
</template><template x-if=!post.item.author><span>Askyx</span></template></span></div><div class="inline-flex items-center"><ion-icon name=time class=mr-1></ion-icon><span><span x-text=post.item.readingTime></span> minute read</span></div></div></div></a></template></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>Â© 2016 - 2025 Askyx's Blog</p><p class=text-sm>ğŸŒ±
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div><div class=back><div class=container><div class="dream-grid dream-grid-about"><div class="w-full md:w-1/2 lg:w-1/3 xl:w-1/4 p-4 dream-column"><article class="card bg-base-100 hover:bg-base-content/10 shadow-xl dark:border dark:border-base-content/30"><div class=card-body><div class=card-title>About Me</div><div class="prose dark:prose-invert"><p>Hi, my name is Yue Yang.</p><p>This is my blog.</p><h2 id=ãƒ¾Ï‰o>ãƒ¾(â€¢Ï‰â€¢`)o</h2><p>æ¯”è¾ƒèƒ†å°ï¼Œå‡ºé—¨éƒ½å¾—è´´å¢™èµ°</p></div></div></article></div></div><footer class="flex justify-between items-center gap-2 px-4 py-12"><div><p>Â© 2016 - 2025 Askyx's Blog</p><p class=text-sm>ğŸŒ±
<span class=text-base-content/60>Powered by <a class=hover:underline href=https://gohugo.io/ target=_blank>Hugo</a> with theme
<a class=hover:underline href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</span></p></div><div x-data="{ icons: [
    { name: 'sunny', status: 'n' },
    { name: 'moon', status: 'y' },
    { name: 'desktop', status: 'auto' }
  ] }" class="flex items-center gap-2 h-[32px] px-2 bg-base-100 border border-base-content/30 rounded-full"><template x-for="icon in icons"><div role=button tabindex=0 :aria-label="'Select ' + icon.name + ' mode'" class="group inline-flex justify-center items-center p-1 rounded-full cursor-pointer hover:bg-primary" :class="$store.darkMode.icon() === icon.name && 'bg-primary'" @click=$store.darkMode.toggle(icon.status)><ion-icon :name="`${icon.name}-outline`" class=group-hover:text-primary-content :class="$store.darkMode.icon() === icon.name && 'text-primary-content'"></ion-icon></div></template></div></footer></div></div></div></div><script>window.lightTheme="emerald",window.darkTheme="forest"</script><script src=https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin=anonymous></script><script src=/js/grid.min.js></script><script src=/js/main.min.js></script><script src=https://cdn.jsdelivr.net/npm/fuse.js@7.0.0/dist/fuse.min.js integrity="sha256-42IbU8t3tOwwbexB7ZVRHm3YDRf65aBPPjRtIUufj5I=" crossorigin=anonymous></script><script>var fuseData=[{author:null,avatar:null,categories:null,description:`<h2 id="wsl-å†…æ ¸ç‰ˆæœ¬å‡çº§">WSL å†…æ ¸ç‰ˆæœ¬å‡çº§</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/community/content/wsl-user-msft-kernel-v6" target="_blank">How to use the Microsoft Linux kernel v6 on Windows Subsystem for Linux version 2 (WSL2)</a>
</li>
<li><a href="https://blog.yurzi.net/posts/a-try-to-upgrade-wsl-kernel/#cite-3" target="_blank">è®°å½•ä¸€æ¬¡å‡çº§WSL2å†…æ ¸çš„ç»å†</a>
</li>
</ul>
<h2 id="wsl-ç£ç›˜ç©ºé—´é‡Šæ”¾">WSL ç£ç›˜ç©ºé—´é‡Šæ”¾</h2>
<p>è¿™æ˜¯è®°å½•wslè¿è¡Œä¸­çš„å¼‚å¸¸æ–‡ä»¶</p>
<pre tabindex="0"><code>rm -rf /mnt/c/Users/wlky/AppData/Local/Temp/wsl-crashes/*
</code></pre><h2 id="2-zsk-powerlevel10k">2. zsk powerlevel10k</h2>
<pre tabindex="0"><code>sh -c &#34;$(curl -fsSL https://gitee.com/shmhlsy/oh-my-zsh-install.sh/raw/master/install.sh)&#34;

git clone --depth=1 https://gitee.com/fkamrk/zsh-autosuggestions.git $ZSH_CUSTOM/plugins/zsh-autosuggestions

git clone --depth=1 https://gitee.com/romkatv/powerlevel10k.git \${ZSH_CUSTOM:-$HOME/.oh-my-zsh/custom}/themes/powerlevel10k

ZSH_THEME=&#34;powerlevel10k/powerlevel10k&#34;

p10k configure
</code></pre><h2 id="3-docker">3. docker</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo apt install docker.io
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Got permission denied <span style="color:#66d9ef">while</span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get <span style="color:#e6db74">&#34;http://%2Fvar%2Frun%2Fdocker.sock/v1.39/containers/json&#34;</span>: dial unix /var/run/docker.sock: connect: permission denied
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>sudo groupadd docker         <span style="color:#75715e">#æ·»åŠ dockerç”¨æˆ·ç»„</span>
</span></span><span style="display:flex;"><span>sudo gpasswd -a $USER docker <span style="color:#75715e">#å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ°dockerç”¨æˆ·ç»„</span>
</span></span><span style="display:flex;"><span>newgrp docker                <span style="color:#75715e">#æ›´æ–°dockerç”¨æˆ·ç»„</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>-- å¯èƒ½å¯ç”¨çš„é•œåƒï¼Œä¸€ä¸ªä¸€ä¸ªè¯•
</span></span><span style="display:flex;"><span>docker pull  registry.docker-cn.com/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  hub-mirror.c.163.com/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker.mirrors.ustc.edu.cn/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  yxzrazem.mirror.aliyuncs.com/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker.kubesre.xyz/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  dc.j8.work/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker.registry.cyou/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker.hlyun.org/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker.chenby.cn/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker.jsdelivr.fyi/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker-mirrors.mjjman.com/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  huecker.io/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  dockerhub.timeweb.cloud/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  docker-cf.registry.cyou/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  dockercf.jsdelivr.fyi/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull  dockertest.jsdelivr.fyi/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker pull dockerhub.azk8s.cn/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull mirror.ccs.tencentyun.com/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull registry.cn-hangzhou.aliyuncs.com/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>docker pull docker.m.daocloud.io/library/ubuntu:24.04
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker tag 8a3cdc4d1ad3 ubuntu:24.04
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>docker rmi docker.jsdelivr.fyi/library/ubuntu:24.04
</span></span></code></pre></div>`,readingTime:1,tags:["wsl2","Ubuntu24.04","perf"],title:"wsl é—®é¢˜è®°å½•ï¼Œç ”å‘ç¯å¢ƒåˆå§‹åŒ–",url:"/posts/note/wsl/"},{author:null,avatar:null,categories:null,description:"Postgre hash join æ€»ç»“",readingTime:4,tags:null,title:"Postgres Hash Join",url:"/posts/postgres/hashjoin/"},{author:null,avatar:null,categories:null,description:"docker OpenTenBase æºç ç¼–è¯‘",readingTime:3,tags:["æ•°æ®åº“","Postgres","OpenTenBase","æºç ç¼–è¯‘"],title:"æºç ç¼–è¯‘ OpenTenBase é€Ÿé€šç‰ˆ",url:"/posts/database/tbase/build/"},{author:null,avatar:null,categories:null,description:"cmake é€ŸæŸ¥æ¨¡æ¿ï¼Œè‡ªç”¨",readingTime:4,tags:["C/C++","cmake","æ¨¡æ¿åº“"],title:"cmake é€ŸæŸ¥æ¨¡æ¿",url:"/posts/others/cmake/"},{author:null,avatar:null,categories:null,description:"gdb ä¸­çš„ä¸€äº›å¸¸ç”¨æ–¹æ³•ï¼Œä¸€äº›å¸¸ç”¨çš„å‘½ä»¤ï¼Œè®°å¿† gdb çš„ python æ‰©å±•çš„ä½¿ç”¨æ–¹æ³•",readingTime:11,tags:null,title:"gdb è¦ç‚¹ç®€è®°",url:"/posts/others/gdb/"},{author:null,avatar:null,categories:null,description:"æ·±åº¦ä¼˜åŒ–æ¢ç´¢æ–‡ç« çš„è¯»ä¹¦ç¬”è®°",readingTime:1,tags:null,title:"Postgres æŠ€æœ¯å†…å¹•ï¼ŒOptimizerè¿‡ç¨‹åˆ†æ",url:"/posts/postgres/optimizer/"},{author:null,avatar:null,categories:null,description:"å®æ¨¡æ¿ï¼Œè‡ªç”¨",readingTime:1,tags:["C/C++","å®","æ—¥å¿—"],title:"å®ä½¿ç”¨æ¨¡æ¿é€ŸæŸ¥",url:"/posts/postgres/defineinc/"},{author:null,avatar:null,categories:null,description:"pgä¸­å„ä¸ªç®—å­çš„ä»£ä»·è®¡ç®—",readingTime:13,tags:null,title:"æ‰§è¡Œè®¡åˆ’ä»£ä»·è®¡ç®—è§„åˆ™æ¢³ç†",url:"/posts/postgres/cost/"},{author:null,avatar:null,categories:null,description:"äº‹åŠ¡åˆ†æè®°å½•ï¼Œæºç åˆ†æï¼Œå…³é”®æŠ€æœ¯ç‚¹ç®€è®°ï¼Œå”¬äººä¸“ç”¨",readingTime:11,tags:null,title:"äº‹åŠ¡çŸ¥è¯†ç®€è®°",url:"/posts/postgres/tx/"},{author:null,avatar:null,categories:null,description:"bison æ–‡æ¡£é‡ç‚¹è®°å½•",readingTime:1,tags:null,title:"Bison Note",url:"/posts/course/15441/note/"},{author:null,avatar:null,categories:null,description:`<p>è¯­å¥</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">prepare</span> s3(int, int) <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">select</span> no_o_id <span style="color:#66d9ef">from</span> bmsql_new_order <span style="color:#66d9ef">where</span> no_w_id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#ae81ff">1</span> <span style="color:#66d9ef">and</span> no_d_id <span style="color:#f92672">=</span> <span style="color:#960050;background-color:#1e0010">$</span><span style="color:#ae81ff">2</span> <span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span> no_o_id <span style="color:#66d9ef">asc</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                            QUERY PLAN                                             
</span></span><span style="display:flex;"><span><span style="color:#75715e">---------------------------------------------------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">Cluster</span> Gather  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">291</span>.<span style="color:#ae81ff">52</span>..<span style="color:#ae81ff">430</span>.<span style="color:#ae81ff">37</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">459</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>   Remote node: <span style="color:#ae81ff">16386</span>
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">-&gt;</span>  Sort  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">291</span>.<span style="color:#ae81ff">52</span>..<span style="color:#ae81ff">292</span>.<span style="color:#ae81ff">67</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">459</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">Output</span>: no_o_id
</span></span><span style="display:flex;"><span>         Sort <span style="color:#66d9ef">Key</span>: bmsql_new_order.no_o_id
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">-&gt;</span>  Bitmap Heap Scan <span style="color:#66d9ef">on</span> <span style="color:#66d9ef">public</span>.bmsql_new_order  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">13</span>.<span style="color:#ae81ff">46</span>..<span style="color:#ae81ff">271</span>.<span style="color:#ae81ff">23</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">459</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>               <span style="color:#66d9ef">Output</span>: no_o_id
</span></span><span style="display:flex;"><span>               <span style="color:#66d9ef">Recheck</span> Cond: ((bmsql_new_order.no_w_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">AND</span> (bmsql_new_order.no_d_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">-&gt;</span>  Bitmap <span style="color:#66d9ef">Index</span> Scan <span style="color:#66d9ef">on</span> bmsql_new_order_pkey  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">13</span>.<span style="color:#ae81ff">34</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">918</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>                     <span style="color:#66d9ef">Index</span> Cond: ((bmsql_new_order.no_w_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">AND</span> (bmsql_new_order.no_d_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>))
</span></span><span style="display:flex;"><span>                     Remote node: <span style="color:#ae81ff">16386</span>
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">11</span> <span style="color:#66d9ef">rows</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                     QUERY PLAN                                                     
</span></span><span style="display:flex;"><span><span style="color:#75715e">--------------------------------------------------------------------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">Data</span> Node Scan <span style="color:#66d9ef">on</span> <span style="color:#e6db74">&#34;__REMOTE_SORT_QUERY__&#34;</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">Output</span>: bmsql_new_order.no_o_id
</span></span><span style="display:flex;"><span>   Node<span style="color:#f92672">/</span>s: data_1
</span></span><span style="display:flex;"><span>   Remote query: <span style="color:#66d9ef">SELECT</span> no_o_id <span style="color:#66d9ef">FROM</span> <span style="color:#66d9ef">ONLY</span> <span style="color:#66d9ef">public</span>.bmsql_new_order <span style="color:#66d9ef">WHERE</span> ((no_w_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>) <span style="color:#66d9ef">AND</span> (no_d_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)) <span style="color:#66d9ef">ORDER</span> <span style="color:#66d9ef">BY</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">4</span> <span style="color:#66d9ef">rows</span>)
</span></span></code></pre></div><p>æœ€ç›´æ¥åŸå› æ˜¯ä¼˜åŒ–å™¨ä»£ç å˜åŠ¨ï¼Œantdbä½¿ç”¨çš„å†…æ ¸ä»£ç æ¯”xcçš„æ–°ï¼Œantdbåœ¨æ·»åŠ remote query åŠŸèƒ½çš„æ—¶å€™ç”±äºä»£ç å˜åŠ¨ï¼Œæœ‰éƒ¨åˆ†å‡½æ•°ç”±äºä»£ç å˜åŠ¨ï¼Œå¯èƒ½æ²¡æœ‰è¦†ç›–åˆ°ï¼Œ
ä»¥ä¸Šé¢çš„ä¾‹å­ä¸ºä¾‹
åœ¨pgxcä¸­ï¼Œgrouping_plannerä¸­å¯¹sortçš„å¤„ç†é€»è¾‘å¦‚ä¸‹ï¼Œç›´æ¥ä½¿ç”¨åˆ›å»ºsortçš„pathä¹‹åä½¿ç”¨create_remotesort_planï¼Œåœ¨å¤„ç†åçš„æ‰§è¡Œè®¡åˆ’ä¸­æœ‰ä¸€ä¸ª<code>__REMOTE_SORT_QUERY__</code>çš„rteï¼Œè¿™é‡ŒæŠ“å–äº†pgxcå’Œantdbå…³é”®èŠ‚ç‚¹çš„æ‰§è¡Œè®¡åˆ’ï¼Œå¯ä»¥ç›´æ¥å¯¹æ¯”<code>grouping_planner</code>å‰åçš„æ‰§è¡Œè®¡åˆ’çš„å˜åŒ–</p>`,readingTime:16,tags:null,title:"xx",url:"/posts/others/log/"},{author:null,avatar:null,categories:null,description:"libpqxxåˆ†æ",readingTime:3,tags:null,title:"Libpqxx",url:"/posts/readcode/libpqxx/"},{author:null,avatar:null,categories:null,description:`<h2 id="å†…å­˜ä¸Šä¸‹æ–‡">å†…å­˜ä¸Šä¸‹æ–‡</h2>
<ul>
<li><a href="https://smartkeyerror.com/PostgreSQL-MemoryContext" target="_blank">https://smartkeyerror.com/PostgreSQL-MemoryContext</a>
</li>
</ul>
<p>æºç ä¸»è¦åœ¨<code>mctx.c</code>ä¸­ï¼Œä¸»è¦æ˜¯ç›®çš„æ˜¯è®¾ç½®å·¥ä½œç©ºé—´ï¼Œé¿å…é‡å¤çš„åœ¨ç³»ç»Ÿä¸Šç”³è¯·èµ„æºï¼Œä¸”ä¸ºäº†é¿å…å¼‚å¸¸æƒ…å†µä¸‹çš„å†…å­˜æ³„éœ²é—®é¢˜ï¼Œæ‰€ä»¥å®ç°äº†å†…å­˜ä¸Šä¸‹æ–‡</p>
<ul>
<li>ç›®å‰æœ‰ä¸‰ç§åº•å±‚çš„å®ç°
<ol>
<li>AllocSet(å¸¸è§„çš„å†…å­˜åˆ†é…æœºåˆ¶ï¼Œå…ˆåˆ†é…blockï¼Œä¹‹åå†ä»blockä¸Šåˆ†é…chunkï¼Œåˆ†é…å¾—å†…å­˜ä¸€èˆ¬ä¸ä¼šé‡Šæ”¾ï¼Œè€Œæ˜¯ä½¿ç”¨ç©ºé—²é“¾è¡¨ç®¡ç†)</li>
<li>Generation(æ–°åŠ ï¼Œå†…å­˜ç”Ÿå‘½å‘¨æœŸç›¸è¿‘çš„æ—¶å€™ä½¿ç”¨ï¼Œç›®å‰åªåœ¨gist å’Œ replication æ¨¡å—ä½¿ç”¨)</li>
<li>Slab(åˆ†é…å¤§å°ç­‰å¤§çš„chunkï¼Œç›®å‰åªåœ¨replication æ¨¡å—ä½¿ç”¨)</li>
</ol>
</li>
<li>æ›´å¤šçš„æ˜¯å› ä¸ºé¢‘ç¹çš„mallocä¼šå¯¼è‡´å†…å­˜ç¢ç‰‡ï¼Œä¸”ç”±äºmallocéœ€è¦é¢å¤–çš„ç©ºé—´è®°å½•headå’Œfootçš„ä½ç½®ï¼Œæ‰€ä»¥è¿˜å­˜åœ¨çš„é—®é¢˜å°±æ˜¯ç©ºé—´çš„æµªè´¹ï¼Œå¦å¤–æœ€å¤§çš„é—®é¢˜æ˜¯å†…å­˜æ³„æ¼é—®é¢˜ï¼Œä½¿ç”¨æŒ‡é’ˆåœ¨æ–¹æ³•é—´ä¼ é€’ä¸å®¹æ˜“ç®¡ç†</li>
<li>å¤§æ¦‚ç±»ä¼¼c++çš„å†…å­˜ç®¡ç†æ–¹æ³•ï¼ŒæŠŠ</li>
</ul>
<h2></h2>`,readingTime:1,tags:null,title:"å†…å­˜ç®¡ç†",url:"/posts/postgres/memctx/"},{author:null,avatar:null,categories:null,description:"RocksDB æºç æ€»ç»“åˆ†æ",readingTime:2,tags:["æºç é˜…è¯»","RocksDB","å­˜å‚¨å¼•æ“"],title:"RocksDBæºç åˆ†æ",url:"/posts/readcode/rocksdb/"},{author:null,avatar:null,categories:null,description:"Postgres parser æ¨¡å—è§£æï¼Œç›®çš„æ˜¯ä¸ºäº†å­¦ä¹ parserå®ç°æœºåˆ¶ã€‚ç¼–è¯‘åŸç†ä»¥åŠbisonå’Œflexçš„ä½¿ç”¨",readingTime:1,tags:["æ•°æ®åº“","Postgres","Parser","ç¼–è¯‘åŸç†"],title:"postgres Parser",url:"/posts/postgres/parser/"},{author:null,avatar:null,categories:null,description:"PG ä¸­é”çš„åˆ†æ",readingTime:2,tags:["æ•°æ®åº“","Postgres","LOCK"],title:"Locks",url:"/posts/postgres/locks/"},{author:null,avatar:null,categories:null,description:"Postgres_xc æºç ç¼–è¯‘ï¼Œé›†ç¾¤ç¯å¢ƒæ­å»º",readingTime:9,tags:null,title:"Postgres_xc æºç ç¼–è¯‘åŠç¯å¢ƒæ­å»º",url:"/posts/database/gp/postgres_xc_build/"},{author:null,avatar:null,categories:null,description:"æœ¬æ–‡ä»æºç çº§åˆ«è¿›è¡Œä¼˜åŒ–å™¨çš„åˆ†æï¼Œå¯¹Postgresä¼˜åŒ–å™¨ä»£ç è°ƒç ”ï¼Œå…·ä½“åŒ…æ‹¬ä»–çš„æ•°æ®ç»“æ„ï¼Œä»¥åŠå…·ä½“çš„ä»£ç æ¶æ„å®ç°ä»¥åŠæ ¸å¿ƒç®—æ³•ç­‰",readingTime:38,tags:["æ•°æ®åº“","Postgres","ä¼˜åŒ–å™¨"],title:"Postgres Optimizer",url:"/posts/postgres/opt/"},{author:null,avatar:null,categories:null,description:`<h2 id="å­˜å‚¨">å­˜å‚¨</h2>
<h3 id="å†…å­˜">å†…å­˜</h3>
<ul>
<li>
<p>å…±äº«å†…å­˜</p>
</li>
<li>
<p>æœ¬åœ°å†…å­˜</p>
</li>
<li>
<p>ç¼“å­˜</p>
</li>
<li>
<p>å†…å­˜ä¸Šä¸‹æ–‡</p>
</li>
<li>
<p>ç¼“å­˜ç©ºé—´ç®¡ç†<br>
æ•°æ®å—çš„ç¼“å­˜ï¼Œå‡å°‘ç£ç›˜IOï¼Œæœ‰å…±äº«ç¼“å­˜å’Œè¿›ç¨‹ç¼“å­˜</p>
</li>
<li>
<p>Cache<br>
æ•°æ®å—ä¹‹å¤–çš„ç¼“å­˜ï¼Œä¾‹å¦‚ç³»ç»Ÿè¡¨</p>
<ul>
<li>ç³»ç»Ÿè¡¨ç¼“å­˜ä¸ä¼šç¼“å­˜æ•´ä¸ªè¡¨ï¼Œæ˜¯ä»¥blockä¸ºå•ä½ç¼“å­˜ï¼Ÿ</li>
</ul>
</li>
<li>
<p>è™šæ‹Ÿæ–‡ä»¶æè¿°ç¬¦<br>
ç³»ç»Ÿä¸­æ–‡ä»¶æœ‰æ‰“å¼€çš„ä¸Šé™ï¼Œä½¿ç”¨VFDå¯ä»¥çªç ´è¿™ç§é™åˆ¶ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªLRUç¼“å­˜</p>`,readingTime:14,tags:["æ•°æ®åº“","Postgres","å­˜å‚¨"],title:"Postgres Storage",url:"/posts/postgres/storage/"},{author:null,avatar:null,categories:null,description:`<h2 id="çˆ¬è™«">çˆ¬è™«</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#f92672">import</span> requests
</span></span><span style="display:flex;"><span><span style="color:#f92672">from</span> bs4 <span style="color:#f92672">import</span> BeautifulSoup
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>prefix <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;http://mysql.taobao.org&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–æ–‡ç« åå’Œurlï¼ˆæ–‡ç« å,urlï¼‰</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query_name_url</span>(url: str):
</span></span><span style="display:flex;"><span>    resp <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(url)
</span></span><span style="display:flex;"><span>    soup <span style="color:#f92672">=</span> BeautifulSoup(resp<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#39;utf-8&#39;</span>), <span style="color:#e6db74">&#34;html.parser&#34;</span>)
</span></span><span style="display:flex;"><span>    tags <span style="color:#f92672">=</span> soup<span style="color:#f92672">.</span>findAll(<span style="color:#e6db74">&#39;a&#39;</span>, {<span style="color:#e6db74">&#39;target&#39;</span>: {<span style="color:#e6db74">&#39;_top&#39;</span>}})
</span></span><span style="display:flex;"><span>    urls <span style="color:#f92672">=</span> [v <span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> tags <span style="color:#66d9ef">if</span> v[<span style="color:#e6db74">&#39;href&#39;</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;/monthly/&#39;</span>) <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [(str(v<span style="color:#f92672">.</span>string)<span style="color:#f92672">.</span>strip(), prefix <span style="color:#f92672">+</span> v[<span style="color:#e6db74">&#39;href&#39;</span>]) <span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> urls]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–æ‰€æœ‰æœˆæŠ¥é“¾æ¥ï¼ˆæœˆæŠ¥å,urlï¼‰</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query_monthly_url</span>():
</span></span><span style="display:flex;"><span>    resp <span style="color:#f92672">=</span> requests<span style="color:#f92672">.</span>get(<span style="color:#e6db74">&#39;http://mysql.taobao.org/monthly/&#39;</span>)
</span></span><span style="display:flex;"><span>    soup <span style="color:#f92672">=</span> BeautifulSoup(resp<span style="color:#f92672">.</span>content<span style="color:#f92672">.</span>decode(<span style="color:#e6db74">&#39;utf-8&#39;</span>), <span style="color:#e6db74">&#34;html.parser&#34;</span>)
</span></span><span style="display:flex;"><span>    tags <span style="color:#f92672">=</span> soup<span style="color:#f92672">.</span>findAll(<span style="color:#e6db74">&#39;a&#39;</span>, {<span style="color:#e6db74">&#39;class&#39;</span>: {<span style="color:#e6db74">&#39;main&#39;</span>}})
</span></span><span style="display:flex;"><span>    urls <span style="color:#f92672">=</span> [v <span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> tags <span style="color:#66d9ef">if</span> v[<span style="color:#e6db74">&#39;href&#39;</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;/monthly/&#39;</span>) <span style="color:#f92672">!=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>]
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> [(str(v<span style="color:#f92672">.</span>string)<span style="color:#f92672">.</span>strip(), prefix <span style="color:#f92672">+</span> v[<span style="color:#e6db74">&#39;href&#39;</span>]) <span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> urls]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># è·å–æ‰€æœ‰æ–‡ç« åã€URLå’Œå¯¹åº”çš„æœˆæŠ¥é“¾æ¥ï¼ˆæ–‡ç« ç±»å‹ï¼Œæ–‡ç« åï¼Œurlï¼ŒæœˆæŠ¥åï¼Œurlï¼‰</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">query_all_name_url</span>():
</span></span><span style="display:flex;"><span>    result <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    monthly_urls <span style="color:#f92672">=</span> query_monthly_url()
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> data1 <span style="color:#f92672">in</span> monthly_urls:
</span></span><span style="display:flex;"><span>        name_urls <span style="color:#f92672">=</span> query_name_url(data1[<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> data2 <span style="color:#f92672">in</span> name_urls:
</span></span><span style="display:flex;"><span>            result<span style="color:#f92672">.</span>append((data2[<span style="color:#ae81ff">0</span>][<span style="color:#ae81ff">0</span>:data2[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39;Â·&#39;</span>)]<span style="color:#f92672">.</span>strip(), data2[<span style="color:#ae81ff">0</span>], data2[<span style="color:#ae81ff">1</span>], data1[<span style="color:#ae81ff">0</span>], data1[<span style="color:#ae81ff">1</span>]))
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> result
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ä¸‹è½½æ‰€æœ‰æ•°æ®åº“æœˆæŠ¥ï¼Œå¹¶æŒ‰ç…§ç±»åˆ«è¿›è¡Œåˆ†ç±»ï¼Œå†™å…¥åˆ°mysql.mdæ–‡ä»¶ä¸­</span>
</span></span><span style="display:flex;"><span>name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>
</span></span><span style="display:flex;"><span>data <span style="color:#f92672">=</span> []
</span></span><span style="display:flex;"><span>result <span style="color:#f92672">=</span> query_all_name_url()
</span></span><span style="display:flex;"><span>result<span style="color:#f92672">.</span>sort(key<span style="color:#f92672">=</span><span style="color:#66d9ef">lambda</span> v: v[<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> result:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> v[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">!=</span> name:
</span></span><span style="display:flex;"><span>        name <span style="color:#f92672">=</span> v[<span style="color:#ae81ff">0</span>]
</span></span><span style="display:flex;"><span>        data<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;## </span><span style="color:#e6db74">{}</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(v[<span style="color:#ae81ff">0</span>]))
</span></span><span style="display:flex;"><span>    data<span style="color:#f92672">.</span>append(<span style="color:#e6db74">&#39;[</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">](</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">) [[</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">](</span><span style="color:#e6db74">{}</span><span style="color:#e6db74">)]</span><span style="color:#ae81ff">\\n</span><span style="color:#e6db74">&#39;</span><span style="color:#f92672">.</span>format(v[<span style="color:#ae81ff">1</span>], v[<span style="color:#ae81ff">2</span>], v[<span style="color:#ae81ff">3</span>][v[<span style="color:#ae81ff">3</span>]<span style="color:#f92672">.</span>find(<span style="color:#e6db74">&#39; ï¼ &#39;</span>) <span style="color:#f92672">+</span> <span style="color:#ae81ff">3</span>:], v[<span style="color:#ae81ff">4</span>]))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">with</span> open(<span style="color:#e6db74">&#39;mysql.md&#39;</span>, <span style="color:#e6db74">&#39;w&#39;</span>) <span style="color:#66d9ef">as</span> file:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">for</span> v <span style="color:#f92672">in</span> data:
</span></span><span style="display:flex;"><span>        print(v)
</span></span><span style="display:flex;"><span>        file<span style="color:#f92672">.</span>write(v <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\\n</span><span style="color:#e6db74">&#39;</span>)
</span></span></code></pre></div>`,readingTime:1,tags:["èµ„æº","æ•°æ®åº“"],title:"æ•°æ®åº“æ–‡ç« èµ„æºæ±‡æ€»",url:"/posts/static/note/"},{author:null,avatar:null,categories:null,description:`<p><a href="https://15445.courses.cs.cmu.edu/fall2021/notes/02-advancedsql.pdf" target="_blank">https://15445.courses.cs.cmu.edu/fall2021/notes/02-advancedsql.pdf</a>
</p>
<ul>
<li>output control
æ§åˆ¶è¾“å‡ºç»“æœï¼Œä¾‹å¦‚orderï¼Œlimitç­‰</li>
<li>çª—å£å‡½æ•°</li>
<li>CTE
Common Table Expressionsï¼ŒæŠŠä¸€ä¸ªè¯­å¥çš„è¾“å‡ºè§†ä¸ºä¸€å¼ ä¸´æ—¶è¡¨å‚ä¸ä¸‹é¢çš„è¯­å¥çš„è¿ç®—
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">WITH</span> cte1 (col1) <span style="color:#66d9ef">AS</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">1</span>), cte2 (col2) <span style="color:#66d9ef">AS</span> (<span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> cte1, cte2;
</span></span></code></pre></div></li>
</ul>
<h3 id="database-storage">Database Storage</h3>
<ul>
<li>æ•°æ®åº“çš„å­˜å‚¨ä»‹è´¨å½“å‰è¿˜æ˜¯ç£ç›˜ï¼ŒIOæ…¢</li>
<li>æ•°æ®åº“å­˜å‚¨è¦ç‚¹ä¹‹ä¸€æ˜¯ä½¿ç”¨ç¼“å­˜ç»´æŠ¤æ•°æ®åœ¨ç£ç›˜å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®äº¤æ¢ï¼Œä»¥å®ç°æ•°æ®çš„å¿«é€Ÿè¯»å†™</li>
<li>é¡ºåºè¯»å†™å’Œéšæœºè¯»å†™
<ol>
<li>é¡ºåºè¯»å†™çš„æ„æ€æ˜¯éœ€è¦å®šä½åˆ°è¯»å†™çš„ä½ç½®æ‰èƒ½æ“ä½œï¼Œä¾‹å¦‚é“¾è¡¨ã€‚</li>
<li>éšæœºè¯»å†™çš„æ„æ€æ˜¯å¯ä»¥ç›´æ¥å®šä½åˆ°è¯»å†™çš„ä½ç½®ï¼Œä¾‹å¦‚æ•°ç»„ã€‚</li>
<li>ç”±äºç£ç›˜ä¸Šéšæœºè¯»å†™é€Ÿåº¦ä¸å¦‚é¡ºåºè¯»å†™ï¼Œæ‰€ä»¥å½“å‰æ•°æ®åº“è¿˜æ˜¯éœ€è¦æƒ³åŠæ³•ä½¿ç”¨é¡ºåºè¯»å†™ï¼Œä¾‹å¦‚LSMï¼ŒGFSç­‰æ¶æ„éƒ½æ˜¯å› ä¸ºè¿™ä¸ªåŸå› å¯¼è‡´çš„</li>
</ol>
</li>
</ul>
<h3 id="ç£ç›˜å’Œå†…å­˜ä¸­æ•°æ®çš„ç»„ç»‡æ ¼å¼">ç£ç›˜å’Œå†…å­˜ä¸­æ•°æ®çš„ç»„ç»‡æ ¼å¼</h3>
<ul>
<li>
<p>æ•°æ®å…¨éƒ¨åœ¨ç£ç›˜ä¸Šï¼ŒæŒ‰pageç»„ç»‡æ•°æ®ï¼Œå†…å­˜ä¸­ä½¿ç”¨buffer poolç»´æŠ¤ç¼“å­˜ï¼Œç£ç›˜ä¸­æœ‰ä¸€ä¸ªpageä¸“é—¨ç»´æŠ¤pageçš„ä½ç½®ä¿¡æ¯ï¼Œä½¿ç”¨çš„æ—¶å€™å…ˆè¯»å–æ­¤pageåˆ°å†…å­˜ï¼Œç„¶å
ç„¶åè¯»å–å…¶ä»–pageåˆ°buffer poolï¼Œä½¿ç”¨buffer poolç»´æŠ¤pageçš„ç½®æ¢æƒ…å†µï¼Œä¾‹å¦‚LRUï¼Œæˆ–è€…å…¶ä»–ç®—æ³•<br>
å¯ä»¥å‚è€ƒlab1å’Œslideï¼Œè¿˜æ˜¯æ¯”è¾ƒæ˜æ˜¾çš„<br>
buffer poolä¸­çš„pageå¯ä»¥ç”¨äºä¸Šå±‚çš„æ•°æ®è¿ç®—</p>`,readingTime:6,tags:["è¯¾ç¨‹","æ•°æ®åº“","15445"],title:"15445è¯¾ç¨‹ç¬”è®°",url:"/posts/course/15445/note/"},{author:null,avatar:null,categories:null,description:`<blockquote>
    <ul>
<li><a href="https://college.blog.csdn.net/article/details/53671783?spm=1001.2101.3001.6650.4&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-4-53671783-blog-42742105.pc_relevant_paycolumn_v3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-4-53671783-blog-42742105.pc_relevant_paycolumn_v3&amp;utm_relevant_index=8" target="_blank">è¯‘æ–‡</a>
</li>
<li><a href="https://pdos.csail.mit.edu/6.824/papers/raft-extended.pdf" target="_blank">åŸæ–‡</a>
</li>
<li><a href="https://hardcore.feishu.cn/docs/doccnMRVFcMWn1zsEYBrbsDf8De#" target="_blank">æœ‰ç”¨çš„é£ä¹¦æ–‡æ¡£</a>
</li>
</ul>
  </blockquote>

<ul>
<li>å’Œå…¶ä»–çš„ç®—æ³•ç›¸æ¯”
<ol>
<li>Strong leader<br>
æ—¥å¿—åªèƒ½ä»é¢†å¯¼è€…å‘é€åˆ°å…¶ä»–èŠ‚ç‚¹</li>
<li>Leader election<br>
éšæœºè®¡æ—¶å™¨é€‰ä¸¾é¢†å¯¼ï¼Œåœ¨å¿ƒè·³æœºåˆ¶ä¸ŠåŠ ä¸Šä¸€äº›é¢å¤–çš„å·¥ä½œ</li>
<li>Membership changes<br>
è§’è‰²å˜æ¢</li>
</ol>
</li>
</ul>
<h2 id="replicated-state-machines">Replicated state machines</h2>
<p>å¤åˆ¶çŠ¶æ€æœºä¸€èˆ¬åŸºäºæ—¥å¿—å®ç°ï¼Œé€šä¿—çš„ç†è§£åªè¦æ‰€æœ‰çš„æœºå™¨æŒ‰ç…§ç›¸åŒçš„é¡ºåºæ‰§è¡ŒæŒ‡ä»¤ï¼Œé‚£ä¹ˆæ¯ä¸ªèŠ‚ç‚¹çš„çŠ¶æ€éƒ½æ˜¯ç¡®å®šçš„ï¼Œæ‰€ä»¥éœ€è¦æŠŠæŒ‡ä»¤æ—¥å¿—å¤åˆ¶åˆ°å…¶ä»–èŠ‚ç‚¹ä¸Šå»ï¼Œè¿™å°±æ˜¯ä¸€è‡´æ€§ç®—æ³•çš„å·¥ä½œ</p>`,readingTime:11,tags:["è®ºæ–‡","Raft","6.824"],title:"Raft",url:"/posts/course/6.824/raft/"},{author:null,avatar:null,categories:null,description:`<p>GFSæ˜¯ä¸€ä¸ªå¤§è§„æ¨¡å¯æ‰©å±•çš„å¯å®¹é”™çš„åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿã€‚Googleä¸‰å¤§ç¯‡è®ºæ–‡ä¹‹ä¸€</p>



  <blockquote>
    <p>ç¿»è¯‘æ–‡ç« åœ¨<a href="https://nxwz51a5wp.feishu.cn/docs/doccnNYeo3oXj6cWohseo6yB4id#Tar9b7" target="_blank">è¿™é‡Œ</a>
<br>
è®ºæ–‡åœ¨<a href="https://pdos.csail.mit.edu/6.824/papers/gfs.pdf" target="_blank">è¿™é‡Œ</a>
<br>
<a href="https://pdos.csail.mit.edu/6.824/papers/gfs-faq.txt" target="_blank">6.824 Q&amp;A</a>
</p>
  </blockquote>

<ul>
<li>GFSçš„ç‰¹ç‚¹
<ol>
<li>è¿è¡Œåœ¨å»‰ä»·çš„æœºå™¨ä¸Šï¼ŒèŠ‚çº¦æˆæœ¬</li>
<li>çµæ´»æ€§å¼ºï¼Œå¯éšæ„æ‰©å±•ï¼Œå®¹é”™æ€§å¼º</li>
<li>æ–‡ä»¶å°¾éƒ¨è¿½åŠ æ•°æ®ï¼Œä¸ä¼šæœ‰å¤ªå¤šçš„æ•°æ®å˜åŠ¨</li>
</ol>
</li>
</ul>
<h2 id="æ¶æ„">æ¶æ„</h2>
<p>ä¸€ä¸ªå•ç‹¬çš„masterèŠ‚ç‚¹å’Œå¤šä¸ªdatachunkèŠ‚ç‚¹ï¼Œmasteç®¡ç†å…ƒæ•°æ®ä¿¡æ¯ï¼ŒåŒ…æ‹¬chunkhandleä¿¡æ¯ï¼Œæ–‡ä»¶å’Œchunkçš„æ˜ å°„ä¿¡æ¯ï¼Œä»¥åŠchunkserverçš„å˜åŠ¨ä¿¡æ¯ç­‰ã€‚masterä½¿ç”¨å¿ƒè·³å®šæ—¶å’ŒchunkserveråŒæ­¥å…³é”®ä¿¡æ¯ã€‚ä½¿ç”¨å•ä¸ªmasterçš„ç›®çš„æ˜¯ä¸ºäº†ç®€åŒ–è®¾è®¡ï¼ŒåŒæ—¶ä¸ºäº†é¿å…å•ç‚¹æ•…éšœï¼ŒmasterèŠ‚ç‚¹æ¯æ¬¡æ“ä½œéƒ½å’Œbackup masteråŒæ­¥æ•°æ®ï¼Œmasterå­˜å‚¨çš„3ç§å…³é”®å…ƒæ•°æ®ä¸º</p>`,readingTime:3,tags:["è®ºæ–‡","GFS","6.824"],title:"GFS",url:"/posts/course/6.824/gfs/"},{author:null,avatar:null,categories:null,description:`<p>åˆ©ç”¨æ™®é€šæœºå™¨ç»„æˆçš„å¤§è§„æ¨¡è®¡ç®—é›†ç¾¤è¿›è¡Œå¹¶è¡Œçš„,é«˜å®¹é”™,é«˜æ€§èƒ½çš„æ•°æ®å¤„ç†å‡½æ•°æ¡†æ¶</p>
<p>åŸå§‹è®ºæ–‡ç‚¹<a href="https://pdos.csail.mit.edu/6.824/papers/mapreduce.pdf" target="_blank">è¿™é‡Œ</a>
,è®ºæ–‡ç¿»è¯‘ç‚¹<a href="https://hardcore.feishu.cn/docs/doccn1XcAYOjDLG7PtY3DIh0q4d#kv8eLv" target="_blank">è¿™é‡Œ</a>
ï¼Œæœ‰æ—¶é—´çš„è¯ï¼Œè‡ªè¡Œå¯¹æ¯”ç¿»è¯‘å’ŒåŸæ–‡</p>
<p>æœ€ç»ˆå®ç°çš„ç›®æ ‡æ˜¯&ndash;å®ç°ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¯¹ç¨‹åºå‘˜éšè—åº•å±‚åˆ†å¸ƒå¼ç»†èŠ‚ï¼Œç¨‹åºå‘˜åªéœ€è¦å®šä¹‰mapå’Œreduce å‡½æ•°å³å¯ã€‚</p>`,readingTime:5,tags:["è®ºæ–‡","Mapreduce","6.824"],title:"Mapreduce",url:"/posts/course/6.824/mapreduce/"},{author:null,avatar:null,categories:null,description:`<h2 id="éšå ‚ç¬”è®°">éšå ‚ç¬”è®°</h2>
<p>Why do people build distributed systems?
to increase capacity via parallel processing
to tolerate faults via replication
to match distribution of physical devices e.g. sensors
to achieve security via isolation</p>
<p>åˆ†å¸ƒå¼çš„å›°éš¾ç‚¹ï¼š</p>
<ol>
<li>å¤§é‡çš„å¹¶å‘æ“ä½œ</li>
<li>å…·æœ‰å®¹é”™æ€§</li>
<li>éš¾äºå®ç°</li>
</ol>
<p>Lab 1: distributed big-data framework (like MapReduce)
Lab 2: fault tolerance library using replication (Raft)
Lab 3: a simple fault-tolerant database
Lab 4: scalable database performance via sharding</p>`,readingTime:2,tags:null,title:"Coursenote",url:"/posts/course/6.824/coursenote/"},{author:null,avatar:null,categories:null,description:"leveldb æºç æ€»ç»“åˆ†æ",readingTime:16,tags:["æºç é˜…è¯»","LevelDB","å­˜å‚¨å¼•æ“"],title:"LevelDBæºç é˜…è¯»",url:"/posts/readbooks/leveldb/"},{author:null,avatar:null,categories:null,description:`<h1 id="note">NOTE</h1>
<p>è®ºæ–‡é˜…è¯»ç¬”è®°<a href="http://www.cse.iitb.ac.in/infolab/Data/Courses/CS632/Papers/Volcano-graefe.pdf" target="_blank">The Volcano Optimizer Generator: Extensibility and Efficient Search</a>
</p>
<ul>
<li>
<p>å¯æ‰©å±•</p>
</li>
<li>
<p>é¢å‘å¯¹è±¡</p>
</li>
<li>
<p>è‡ªé¡¶å‘ä¸‹</p>
</li>
<li>
<p>å‰ªæ</p>
</li>
<li>
<p>åŸå‹æ˜¯EXODUSï¼Œ Volcanoæ˜¯å¯¹ä»–çš„æ”¹è¿›</p>
<ul>
<li>å¯ä»¥å•ç‹¬ä½¿ç”¨çš„ä¼˜åŒ–å™¨</li>
<li>ä¼˜åŒ–æœç´¢æ—¶é—´å’Œæœç´¢ç©ºé—´</li>
<li>å¯æ‰©å±•</li>
<li>å¯ä»¥ä½¿ç”¨å¯å‘å¼ç®—æ³•å’Œæœ‰æ•ˆçš„ä»£ä»·æ¨¡å‹æ¥æ‰©å±•å’Œå‡å°‘æœç´¢ç©ºé—´ï¼Œã€å‰ªæã€‘</li>
<li>çµæ´»çš„æˆæœ¬è®¡ç®—æ¨¡å‹</li>
</ul>
</li>
<li>
<p>ä¸€ä¸ªæ¡†æ¶ï¼Œä¼˜åŒ–å™¨ç”Ÿæˆå™¨ï¼Œå¯ä»¥ç”±â€œoptimizer implementorâ€è‡ªè¡Œå®ç°å…³é”®å‡½æ•°ï¼Œæ•´ä¸ªä¼˜åŒ–å™¨æ¡†æ¶çš„è¾“å…¥æ˜¯ASTï¼Œè¾“å‡ºæ˜¯ä¸€ä¸ªæ‰§è¡Œè®¡åˆ’ï¼Œç®—å­çš„é›†åˆ</p>`,readingTime:6,tags:null,title:"VolcanoOptimizer",url:"/posts/readbooks/volcanooptimizer/"},{author:null,avatar:null,categories:null,description:`<h1 id="start">start</h1>
<p>EFFICIENCY IN THE COLUMBIA DATABASE QUERY OPTIMIZER</p>
<h2 id="ä¼˜åŒ–å™¨å‘å±•ç‰ˆæœ¬">ä¼˜åŒ–å™¨å‘å±•ç‰ˆæœ¬</h2>
<ul>
<li>
<p>ç¬¬ä¸€ä»£</p>
<ul>
<li>æ¨¡å—åŒ–çš„ï¼Œåˆ†å±‚çš„ï¼Œå¯æ‰©å±•çš„ï¼ŒåŸºäºè§„åˆ™çš„ä¼˜åŒ–å™¨</li>
<li>æ‰©å±•çš„å¤æ‚æ€§ï¼Œæœç´¢æ€§èƒ½</li>
</ul>
</li>
<li>
<p>ç¬¬äºŒä»£</p>
<ul>
<li>ç±»ä¼¼Volcanoï¼Œæ›´åŠ ä¼˜ç§€çš„ä¼˜åŒ–è§„åˆ™ï¼Œä¸”ä½¿ç”¨ç‰©ç†å±æ€§å‚ä¸ä¼˜åŒ–ï¼Œä½¿ç”¨æ–°çš„æœç´¢æ–¹å¼</li>
<li>æ›´åŠ çµæ´»ï¼Œä½†æ˜¯è¿˜æ˜¯éš¾ä¸æ‰©å±•</li>
</ul>
</li>
<li>
<p>ç¬¬ä¸‰ä»£</p>`,readingTime:1,tags:null,title:"Columbia Optimizer",url:"/posts/readbooks/columbia-optimizer/"},{author:null,avatar:null,categories:null,description:`<h2 id="è¯»è€…åº">è¯»è€…åº</h2>
<p>ä¹‹å‰æ²¡æœ‰å¥½å¥½çš„é˜…è¯»è¿‡ä¸€æœ¬ä»»ä½•æŠ€æœ¯ä¹¦ç±ï¼Œä¸€èˆ¬éƒ½æ˜¯æ‰“å¼€å‰å‡ å¼ ï¼Œç„¶åæ…¢æ…¢çš„å¤±å»è€å¿ƒï¼Œæ‰€æœ‰é€ æˆçš„é—®é¢˜æ˜¯ä¸€äº›ä¹¦ç±ä¸Šçš„çŸ¥è¯†ï¼Œåªä¼šå¯¹å‰é¢çš„ç« èŠ‚æœ‰è®°å¿†ï¼Œè€Œå¤§å¤šæ•°çš„ä¹¦ç±å‰é¢çš„ç« èŠ‚ä¹Ÿåªæ˜¯ä»–ä¹¦ç±çš„å…¥é—¨ä»‹ç»è€Œå·²ï¼Œæ‰€ä»¥æˆ‘æ˜¯ä¸ªåŠåŠå­ç¨‹åºå‘˜ï¼Œå·¥ä½œä¸¤å¹´åŠä¹‹åï¼Œè¿™ä¸ªé—®é¢˜è¶Šæ¥è¶Šå›°æ‰°ç€æˆ‘ï¼Œæœ‰æ—¶å€™çœ‹è§åˆ«äººçš„é¢å¸–ï¼Œæ„Ÿè§‰é‚£äº›é—®é¢˜å…¶å®éƒ½å› è¯¥æ˜¯çŸ¥é“ç­”æ¡ˆçš„ï¼Œä½†æ˜¯å½“æˆ‘æƒ³è¦åœ¨è„‘æµ·ä¸­æŠŠç­”æ¡ˆæ•´ç†å‡ºæ¥çš„æ—¶å€™å´æ— ä»è¯´èµ·ï¼Œç®€å•çš„æ¥è¯´å°±æ˜¯æœ‰çš„ä¸œè¥¿æˆ‘æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯æ— æ³•è¡¨ç¤ºå‡ºæ¥ï¼Œä¸æˆä½“ç³»ï¼Œè¿™ç»™æˆ‘ä¸€ä¸ªé”™è§‰å°±æ˜¯æˆ‘æ„Ÿè§‰æˆ‘èƒ½åŠ›å¯ä»¥ï¼Œä½†æ˜¯è½åˆ°å®åœ°çš„æ—¶å€™å´å•¥ä¹Ÿåšä¸äº†ï¼Œè„±ç¦»äº†è°·æ­Œç™¾åº¦æˆ–è€…å…¶ä»–æˆ‘ä¹‹å‰çš„èµ„æ–™ï¼Œæˆ‘å•¥éƒ½ä¸è¡Œã€‚</p>`,readingTime:4,tags:["è¯»ä¹¦ç¬”è®°","C++"],title:"ç°ä»£C++ç™½çš®ä¹¦",url:"/posts/readbooks/%E7%8E%B0%E4%BB%A3c++%E7%99%BD%E7%9A%AE%E4%B9%A6/"},{author:null,avatar:null,categories:null,description:`<h2 id="hugo">hugo</h2>
<p>wget <a href="https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb" target="_blank">https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb</a>

<a href="https://github.91chi.fun/https://github.com//gohugoio/hugo/releases/download/v0.92.2/hugo_extended_0.92.2_Linux-64bit.deb" target="_blank">https://github.91chi.fun/https://github.com//gohugoio/hugo/releases/download/v0.92.2/hugo_extended_0.92.2_Linux-64bit.deb</a>

sudo dpkg -i hugo*.deb</p>
<p>140.82.113.3</p>
<p>aria2c -s 5 <a href="https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb" target="_blank">https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb</a>
</p>
<p><a href="https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb" target="_blank">https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb</a>
</p>
<p>å¯ä»¥ä½¿ç”¨aria2ä¸‹è½½ï¼Œubuntuä½¿ç”¨<code>apt install aria2</code>ç›´æ¥å®‰è£…å·¥å…·ï¼Œä½¿ç”¨-så¼€å¯å¤šè·¯ä¸‹è½½
aria2c -s 5 <a href="https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb" target="_blank">https://github.com/gohugoio/hugo/releases/download/v0.92.1/hugo_0.92.1_Linux-64bit.deb</a>
</p>
<p>managerç”¨æˆ·</p>
<p><a href="https://www.jianshu.com/p/a76a93e8c662" target="_blank">https://www.jianshu.com/p/a76a93e8c662</a>
</p>
<h2 id="unix">Unix</h2>
<p>åˆ†åŒºé—®é¢˜ï¼Œé›†ç¾¤ä¸Šå¤šå—ç£ç›˜åˆ†åŒºæŒ‚è½½åˆ°æŒ‡å®šç›®å½•</p>`,readingTime:2,tags:null,title:"Envs",url:"/posts/others/envs/"},{author:null,avatar:null,categories:null,description:"docker å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥ï¼Œç§ç”¨",readingTime:3,tags:["Docker"],title:"Docker",url:"/posts/others/docker/"},{author:null,avatar:null,categories:null,description:`<p>predicate_refuted_by å’Œ make_new_qual_listçš„è¿è¡Œé€»è¾‘ä»¥åŠPARAM æ— æ³•é€‰å‡ºä¸€ä¸ªèŠ‚ç‚¹çš„åŸå› </p>
<p>make_new_qual_listéœ€è¦ä½¿ç”¨è¡¨è¾¾å¼å’Œåˆ†åŒºä¿¡æ¯æ„é€ æ–°çš„è¡¨è¾¾å¼ï¼Œä½†æ˜¯PARAMä¸æ˜¯å¸¸é‡ï¼Œæ‰€ä»¥æ— æ³•æ„é€ ï¼Œ
æ‰€ä»¥predicate_refuted_byåˆ¤å®šå˜å¤§æ—¶å’Œçº¦æŸçš„æ—¶å€™æ— æ³•æ­£ç¡®çš„é€‰æ‹©èŠ‚ç‚¹ï¼ŒåŠ¨æ€è¯­å¥åªè¦ä½¿ç”¨åˆ°åˆ†åŒºé”®éƒ½ä¸è¡Œ</p>`,readingTime:3,tags:null,title:"",url:"/posts/others/%E5%87%BD%E6%95%B0%E8%BF%90%E8%A1%8C%E9%80%BB%E8%BE%91/"},{author:null,avatar:null,categories:null,description:`<h1 id="æ–‡ç£Š">æ–‡ç£Š</h1>
<h2 id="ä¸ªäººä¿¡æ¯">ä¸ªäººä¿¡æ¯</h2>
<p>æ€§ åˆ«ï¼šç”·      																									å¹´ é¾„ï¼š29
æ‰‹ æœºï¼š18705169510  																					é‚® ç®±ï¼š404061090@qq.com</p>
<h2 id="å·¥ä½œåŠæ•™è‚²ç»å†">å·¥ä½œåŠæ•™è‚²ç»å†</h2>
<ul>
<li>
<p>æ¹–å—äºšä¿¡å®‰æ…§ç§‘æŠ€æœ‰é™å…¬å¸               2022.7~now                             AntDB-T SQLå†…æ ¸ç ”å‘å·¥ç¨‹å¸ˆ</p>
<ul>
<li>ä¸»è¦è´Ÿè´£ä¼˜åŒ–å™¨å¯¹åˆ†å¸ƒå¼æ‰§è¡Œè®¡åˆ’çš„ä¼˜åŒ–</li>
</ul>
</li>
<li>
<p>æ˜Ÿç¯ç§‘æŠ€æœ‰é™å…¬å¸                              2022.2~2022.3                         åŸºç¡€æ¶æ„éƒ¨-æ•°æ®åº“ç ”å‘å·¥ç¨‹å¸ˆ</p>`,readingTime:3,tags:null,title:"",url:"/posts/personal/%E7%AE%80%E5%8E%86/"},{author:null,avatar:null,categories:null,description:`<h1 id="æ‰§è¡Œè®¡åˆ’">æ‰§è¡Œè®¡åˆ’</h1>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> enable_mergejoin<span style="color:#f92672">=</span><span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">set</span> enable_nestloop<span style="color:#f92672">=</span><span style="color:#66d9ef">off</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">select</span>
</span></span><span style="display:flex;"><span>  s_acctbal,
</span></span><span style="display:flex;"><span>  s_name,
</span></span><span style="display:flex;"><span>  n_name,
</span></span><span style="display:flex;"><span>  p_partkey,
</span></span><span style="display:flex;"><span>  p_mfgr,
</span></span><span style="display:flex;"><span>  s_address,
</span></span><span style="display:flex;"><span>  s_phone,
</span></span><span style="display:flex;"><span>  s_comment
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">from</span>
</span></span><span style="display:flex;"><span>  part,
</span></span><span style="display:flex;"><span>  supplier,
</span></span><span style="display:flex;"><span>  partsupp,
</span></span><span style="display:flex;"><span>  nation,
</span></span><span style="display:flex;"><span>  region
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">where</span>
</span></span><span style="display:flex;"><span>  p_partkey <span style="color:#f92672">=</span> ps_partkey
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> s_suppkey <span style="color:#f92672">=</span> ps_suppkey
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> p_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> p_type <span style="color:#66d9ef">like</span> <span style="color:#e6db74">&#39;%BRASS&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> s_nationkey <span style="color:#f92672">=</span> n_nationkey
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> n_regionkey <span style="color:#f92672">=</span> r_regionkey
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> r_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;EUROPE&#39;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">and</span> ps_supplycost <span style="color:#f92672">=</span> (
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">select</span>
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">min</span>(ps_supplycost)
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">from</span>
</span></span><span style="display:flex;"><span>      partsupp,
</span></span><span style="display:flex;"><span>      supplier,
</span></span><span style="display:flex;"><span>      nation,
</span></span><span style="display:flex;"><span>      region
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">where</span>
</span></span><span style="display:flex;"><span>      p_partkey <span style="color:#f92672">=</span> ps_partkey
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">and</span> s_suppkey <span style="color:#f92672">=</span> ps_suppkey
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">and</span> s_nationkey <span style="color:#f92672">=</span> n_nationkey
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">and</span> n_regionkey <span style="color:#f92672">=</span> r_regionkey
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">and</span> r_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;EUROPE&#39;</span>
</span></span><span style="display:flex;"><span>  )
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">order</span> <span style="color:#66d9ef">by</span>
</span></span><span style="display:flex;"><span>  s_acctbal <span style="color:#66d9ef">desc</span>,
</span></span><span style="display:flex;"><span>  n_name,
</span></span><span style="display:flex;"><span>  s_name,
</span></span><span style="display:flex;"><span>  p_partkey <span style="color:#66d9ef">limit</span> <span style="color:#ae81ff">100</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                                        QUERY PLAN                                                                         
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------------------------------------------------------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">Limit</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">3351813</span>.<span style="color:#ae81ff">70</span>..<span style="color:#ae81ff">3351813</span>.<span style="color:#ae81ff">71</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">5</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Cluster</span> Merge Gather  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">3351813</span>.<span style="color:#ae81ff">70</span>..<span style="color:#ae81ff">3351813</span>.<span style="color:#ae81ff">71</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">5</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>         Sort <span style="color:#66d9ef">Key</span>: supplier.s_acctbal <span style="color:#66d9ef">DESC</span>, nation.n_name, supplier.s_name, part.p_partkey
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Limit</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">3350813</span>.<span style="color:#ae81ff">60</span>..<span style="color:#ae81ff">3350813</span>.<span style="color:#ae81ff">61</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">193</span>)
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">-&gt;</span>  Sort  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">3350813</span>.<span style="color:#ae81ff">60</span>..<span style="color:#ae81ff">3350813</span>.<span style="color:#ae81ff">61</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">193</span>)
</span></span><span style="display:flex;"><span>                     Sort <span style="color:#66d9ef">Key</span>: supplier.s_acctbal <span style="color:#66d9ef">DESC</span>, nation.n_name, supplier.s_name, part.p_partkey
</span></span><span style="display:flex;"><span>                     <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">745359</span>.<span style="color:#ae81ff">38</span>..<span style="color:#ae81ff">3350813</span>.<span style="color:#ae81ff">59</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">0</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">193</span>)
</span></span><span style="display:flex;"><span>                           Hash Cond: ((partsupp.ps_partkey <span style="color:#f92672">=</span> part.p_partkey) <span style="color:#66d9ef">AND</span> (partsupp.ps_supplycost <span style="color:#f92672">=</span> (SubPlan <span style="color:#ae81ff">1</span>)))
</span></span><span style="display:flex;"><span>                           <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">35483</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">2640803</span>.<span style="color:#ae81ff">16</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">25603</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">173</span>)
</span></span><span style="display:flex;"><span>                                 Hash Cond: (partsupp.ps_suppkey <span style="color:#f92672">=</span> supplier.s_suppkey)
</span></span><span style="display:flex;"><span>                                 <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> partsupp  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">2544033</span>.<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">16001650</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>)
</span></span><span style="display:flex;"><span>                                 <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">35383</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">35383</span>.<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">167</span>)
</span></span><span style="display:flex;"><span>                                       <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Cluster</span> Reduce  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">35383</span>.<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">167</span>)
</span></span><span style="display:flex;"><span>                                             <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">33012</span>.<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1600</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">167</span>)
</span></span><span style="display:flex;"><span>                                                   Hash Cond: (supplier.s_nationkey <span style="color:#f92672">=</span> nation.n_nationkey)
</span></span><span style="display:flex;"><span>                                                   <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> supplier  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">32180</span>.<span style="color:#ae81ff">00</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">200000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">145</span>)
</span></span><span style="display:flex;"><span>                                                   <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">35</span>..<span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">35</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>)
</span></span><span style="display:flex;"><span>                                                         <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">07</span>..<span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">35</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>)
</span></span><span style="display:flex;"><span>                                                               Hash Cond: (nation.n_regionkey <span style="color:#f92672">=</span> region.r_regionkey)
</span></span><span style="display:flex;"><span>                                                               <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> nation  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">25</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">5</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">34</span>)
</span></span><span style="display:flex;"><span>                                                               <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">06</span>..<span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">06</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                     <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> region  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">06</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                           Filter: (r_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;EUROPE&#39;</span>::bpchar)
</span></span><span style="display:flex;"><span>                           <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">709609</span>.<span style="color:#ae81ff">29</span>..<span style="color:#ae81ff">709609</span>.<span style="color:#ae81ff">29</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">17782</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>)
</span></span><span style="display:flex;"><span>                                 <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> part  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">709609</span>.<span style="color:#ae81ff">29</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">17782</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>)
</span></span><span style="display:flex;"><span>                                       Filter: (((p_type)::text <span style="color:#f92672">~~</span> <span style="color:#e6db74">&#39;%BRASS&#39;</span>::text) <span style="color:#66d9ef">AND</span> (p_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>))
</span></span><span style="display:flex;"><span>                                 SubPlan <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                                   <span style="color:#f92672">-&gt;</span>  Materialize  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">28851255</span>.<span style="color:#ae81ff">69</span>..<span style="color:#ae81ff">28851255</span>.<span style="color:#ae81ff">71</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">32</span>)
</span></span><span style="display:flex;"><span>                                         <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Aggregate</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">28851255</span>.<span style="color:#ae81ff">69</span>..<span style="color:#ae81ff">28851255</span>.<span style="color:#ae81ff">70</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">32</span>)
</span></span><span style="display:flex;"><span>                                               <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">35610</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">28851255</span>.<span style="color:#ae81ff">69</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">6</span>)
</span></span><span style="display:flex;"><span>                                                     Hash Cond: (partsupp_1.ps_suppkey <span style="color:#f92672">=</span> supplier_1.s_suppkey)
</span></span><span style="display:flex;"><span>                                                     <span style="color:#f92672">-&gt;</span>  Reduce Scan  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">28509214</span>.<span style="color:#ae81ff">73</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">80008250</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">10</span>)
</span></span><span style="display:flex;"><span>                                                           Filter: (part.p_partkey <span style="color:#f92672">=</span> ps_partkey)
</span></span><span style="display:flex;"><span>                                                           <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Cluster</span> Reduce  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">27718507</span>.<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">80008250</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>)
</span></span><span style="display:flex;"><span>                                                                 <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> partsupp partsupp_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">2544033</span>.<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">16001650</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>)
</span></span><span style="display:flex;"><span>                                                     <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">35509</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">35509</span>.<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                           <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Cluster</span> Reduce  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">35509</span>.<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">8000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                 <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">33012</span>.<span style="color:#ae81ff">36</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1600</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                       Hash Cond: (supplier_1.s_nationkey <span style="color:#f92672">=</span> nation_1.n_nationkey)
</span></span><span style="display:flex;"><span>                                                                       <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> supplier supplier_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">32180</span>.<span style="color:#ae81ff">00</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">200000</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>                                                                       <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">35</span>..<span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">35</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                             <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">07</span>..<span style="color:#ae81ff">2</span>.<span style="color:#ae81ff">35</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                                   Hash Cond: (nation_1.n_regionkey <span style="color:#f92672">=</span> region_1.r_regionkey)
</span></span><span style="display:flex;"><span>                                                                                   <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> nation nation_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">25</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">5</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>                                                                                   <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">06</span>..<span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">06</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                                         <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> region region_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">1</span>.<span style="color:#ae81ff">06</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                                                               Filter: (r_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;EUROPE&#39;</span>::bpchar)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">47</span> <span style="color:#66d9ef">rows</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                                                         QUERY PLAN
</span></span><span style="display:flex;"><span><span style="color:#75715e">-----------------------------------------------------------------------------------------------------------------------------
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span> <span style="color:#66d9ef">Limit</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">85</span>.<span style="color:#ae81ff">86</span>..<span style="color:#ae81ff">85</span>.<span style="color:#ae81ff">87</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">716</span>)
</span></span><span style="display:flex;"><span>   <span style="color:#f92672">-&gt;</span>  Sort  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">85</span>.<span style="color:#ae81ff">86</span>..<span style="color:#ae81ff">85</span>.<span style="color:#ae81ff">87</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">716</span>)
</span></span><span style="display:flex;"><span>         Sort <span style="color:#66d9ef">Key</span>: supplier.s_acctbal <span style="color:#66d9ef">DESC</span>, nation.n_name, supplier.s_name, part.p_partkey
</span></span><span style="display:flex;"><span>         <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">95</span>..<span style="color:#ae81ff">85</span>.<span style="color:#ae81ff">73</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">716</span>)
</span></span><span style="display:flex;"><span>               Hash Cond: ((part.p_partkey <span style="color:#f92672">=</span> partsupp.ps_partkey) <span style="color:#66d9ef">AND</span> ((SubPlan <span style="color:#ae81ff">1</span>) <span style="color:#f92672">=</span> partsupp.ps_supplycost))
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> part  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">40</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">108</span>)
</span></span><span style="display:flex;"><span>                     Filter: (((p_type)::text <span style="color:#f92672">~~</span> <span style="color:#e6db74">&#39;%BRASS&#39;</span>::text) <span style="color:#66d9ef">AND</span> (p_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">15</span>))
</span></span><span style="display:flex;"><span>               <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">93</span>..<span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">93</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">630</span>)
</span></span><span style="display:flex;"><span>                     <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">36</span>.<span style="color:#ae81ff">58</span>..<span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">93</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">630</span>)
</span></span><span style="display:flex;"><span>                           Hash Cond: (partsupp.ps_suppkey <span style="color:#f92672">=</span> supplier.s_suppkey)
</span></span><span style="display:flex;"><span>                           <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> partsupp  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">11</span>.<span style="color:#ae81ff">70</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">170</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">26</span>)
</span></span><span style="display:flex;"><span>                           <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">36</span>.<span style="color:#ae81ff">57</span>..<span style="color:#ae81ff">36</span>.<span style="color:#ae81ff">57</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">612</span>)
</span></span><span style="display:flex;"><span>                                 <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">50</span>..<span style="color:#ae81ff">36</span>.<span style="color:#ae81ff">57</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">612</span>)
</span></span><span style="display:flex;"><span>                                       Hash Cond: (supplier.s_nationkey <span style="color:#f92672">=</span> nation.n_nationkey)
</span></span><span style="display:flex;"><span>                                       <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> supplier  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">11</span>.<span style="color:#ae81ff">50</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">150</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">512</span>)
</span></span><span style="display:flex;"><span>                                       <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">48</span>..<span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">108</span>)
</span></span><span style="display:flex;"><span>                                             <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">14</span>..<span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">48</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">108</span>)
</span></span><span style="display:flex;"><span>                                                   Hash Cond: (nation.n_regionkey <span style="color:#f92672">=</span> region.r_regionkey)
</span></span><span style="display:flex;"><span>                                                   <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> nation  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">11</span>.<span style="color:#ae81ff">70</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">170</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">112</span>)
</span></span><span style="display:flex;"><span>                                                   <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                         <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> region  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                                               Filter: (r_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;EUROPE&#39;</span>::bpchar)
</span></span><span style="display:flex;"><span>               SubPlan <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>                 <span style="color:#f92672">-&gt;</span>  <span style="color:#66d9ef">Aggregate</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">72</span>..<span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">73</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">32</span>)
</span></span><span style="display:flex;"><span>                       <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">36</span>.<span style="color:#ae81ff">36</span>..<span style="color:#ae81ff">48</span>.<span style="color:#ae81ff">72</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">18</span>)
</span></span><span style="display:flex;"><span>                             Hash Cond: (nation_1.n_regionkey <span style="color:#f92672">=</span> region_1.r_regionkey)
</span></span><span style="display:flex;"><span>                             <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">22</span>..<span style="color:#ae81ff">36</span>.<span style="color:#ae81ff">57</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">22</span>)
</span></span><span style="display:flex;"><span>                                   Hash Cond: (nation_1.n_nationkey <span style="color:#f92672">=</span> supplier_1.s_nationkey)
</span></span><span style="display:flex;"><span>                                   <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> nation nation_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">11</span>.<span style="color:#ae81ff">70</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">170</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>                                   <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">21</span>..<span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">21</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">22</span>)
</span></span><span style="display:flex;"><span>                                         <span style="color:#f92672">-&gt;</span>  Hash <span style="color:#66d9ef">Join</span>  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">14</span>..<span style="color:#ae81ff">24</span>.<span style="color:#ae81ff">21</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">22</span>)
</span></span><span style="display:flex;"><span>                                               Hash Cond: (supplier_1.s_suppkey <span style="color:#f92672">=</span> partsupp_1.ps_suppkey)
</span></span><span style="display:flex;"><span>                                               <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> supplier supplier_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">11</span>.<span style="color:#ae81ff">50</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">150</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">8</span>)
</span></span><span style="display:flex;"><span>                                               <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">22</span>)
</span></span><span style="display:flex;"><span>                                                     <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> partsupp partsupp_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">22</span>)
</span></span><span style="display:flex;"><span>                                                           Filter: (part.p_partkey <span style="color:#f92672">=</span> ps_partkey)
</span></span><span style="display:flex;"><span>                             <span style="color:#f92672">-&gt;</span>  Hash  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                   <span style="color:#f92672">-&gt;</span>  Seq Scan <span style="color:#66d9ef">on</span> region region_1  (cost<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>.<span style="color:#ae81ff">00</span>..<span style="color:#ae81ff">12</span>.<span style="color:#ae81ff">12</span> <span style="color:#66d9ef">rows</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span> width<span style="color:#f92672">=</span><span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span>                                         Filter: (r_name <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;EUROPE&#39;</span>::bpchar)
</span></span><span style="display:flex;"><span>(<span style="color:#ae81ff">39</span> <span style="color:#66d9ef">rows</span>)
</span></span></code></pre></div><p>pgå•æœºæ‰§è¡Œè®¡åˆ’å’Œantdbåˆ†å¸ƒå¼æ‰§è¡Œè®¡åˆ’å¤§è‡´ä¸€æ ·ï¼Œå’Œä¹‹å‰gpçš„ç»“è®ºæœ‰</p>`,readingTime:15,tags:null,title:"",url:"/posts/postgres/adb_cluster_plan/"},{author:null,avatar:null,categories:null,description:`<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">typedef</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">SubPlan</span>
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>  pg_node_attr(no_query_jumble)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  Expr    xpr;
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Fields copied from original SubLink: */</span>
</span></span><span style="display:flex;"><span>  SubLinkType subLinkType;  <span style="color:#75715e">/* see above */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* The combining operators, transformed to an executable expression: */</span>
</span></span><span style="display:flex;"><span>  Node     <span style="color:#f92672">*</span>testexpr;       <span style="color:#75715e">/* OpExpr or RowCompareExpr expression tree */</span>
</span></span><span style="display:flex;"><span>  List     <span style="color:#f92672">*</span>paramIds;       <span style="color:#75715e">/* IDs of Params embedded in the above */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Identification of the Plan tree to use: */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">int</span>      plan_id;         <span style="color:#75715e">/* Index (from 1) in PlannedStmt.subplans */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Identification of the SubPlan for EXPLAIN and debugging purposes: */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">char</span>     <span style="color:#f92672">*</span>plan_name;      <span style="color:#75715e">/* A name assigned during planning */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Extra data useful for determining subplan&#39;s output type: */</span>
</span></span><span style="display:flex;"><span>  Oid      firstColType;    <span style="color:#75715e">/* Type of first column of subplan result */</span>
</span></span><span style="display:flex;"><span>  int32    firstColTypmod;  <span style="color:#75715e">/* Typmod of first column of subplan result */</span>
</span></span><span style="display:flex;"><span>  Oid      firstColCollation;  <span style="color:#75715e">/* Collation of first column of subplan result */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Information about execution strategy: */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">bool</span>    useHashTable;   <span style="color:#75715e">/* true to store subselect output in a hash table (implies we are doing &#34;IN&#34;) */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">bool</span>    unknownEqFalse; <span style="color:#75715e">/* true if it&#39;s okay to return FALSE when the
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">                 * spec result is UNKNOWN; this allows much
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">                 * simpler handling of null values */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">bool</span>    parallel_safe;  <span style="color:#75715e">/* is the subplan parallel-safe? */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Note: parallel_safe does not consider contents of testexpr or args */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Information for passing params into and out of the subselect: */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* setParam and parParam are lists of integers (param IDs) */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//  å¦‚æœå­˜åœ¨ setParam ï¼Œåœ¨åˆå§‹åŒ– SubPlanState çš„æ—¶å€™ï¼Œä¼šæŠŠ SubPlanState æ·»åŠ åˆ° paramid å¯¹åº”çš„ prm ä¸­å»ï¼Œåœ¨æ‰§è¡Œçš„æ—¶å€™ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//  é‡åˆ° Param çš„æ—¶å€™ä¼šæ‰§è¡Œ ExecEvalParamExec å‡½æ•°ï¼Œæ­¤æ—¶ç”±äºå­˜åœ¨ SubPlanState ï¼Œä¼šå»æ‰§è¡Œ ExecSetParamPlan ï¼Œ å»æ‰§è¡Œinitplan
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//  ä½†æ˜¯ åˆå§‹åŒ–çš„æ—¶å€™è¦æ±‚ parParam ä¸º nilï¼Œ æ­¤æ—¶ä¸ä¼šè®¾ç½®çš„ SubPlanState ï¼Œ ExecEvalParamExec ä¹Ÿä¸ä¼šæ‰§è¡Œ ExecSetParamPlan ï¼Œè€Œæ˜¯ç›´æ¥è·å– prm 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//  ä¸­ æå‰è®¾ç½®çš„å€¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//  åœ¨ initplan æ‰§è¡Œè¿‡ä¹‹åï¼Œä¼šè®¾ç½® execPlan ä¸ºnullï¼Œ ä¹‹åç›´æ¥ä½¿ç”¨ prm ä¸­å¾— å€¼å³å¯ï¼Œ è¿™ä¹Ÿä»£è¡¨ init plan åªä¼šè¿”å›ä¸€è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  List     <span style="color:#f92672">*</span>setParam;     <span style="color:#75715e">/* initplan and MULTIEXPR subqueries have to set these Params for parent plan */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//  parParam å’Œ args æ˜¯ä¸€ä¸€å¯¹åº”çš„ï¼Œargs æ˜¯ Var listï¼Œåœ¨ ExecScanSubPlan ä¸­ï¼Œ ä¼šä½¿ç”¨ args å» slot ä¸­è·å–å¯¹åº”çš„å€¼ï¼Œ
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//  ç„¶å ä½¿ç”¨ parParam è·å–å¯¹åº”ä¸‹æ ‡ çš„ prmï¼Œ ç„¶åè®¾ç½®å€¼ï¼Œ æ­¤æ—¶ parent å‚æ•°å‡†å¤‡å®Œæ¯•ï¼Œåœ¨åç»­æ‰§è¡Œä¸­é‡åˆ° Param ï¼Œ æ‰§è¡Œ ExecEvalParamExec çš„æ—¶å€™ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ prm çš„å€¼å³å¯ï¼Œ 
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#75715e">//  å¦‚æœ å­˜åœ¨ testexpr ï¼Œ åˆ™éœ€è¦ å†æ‰§è¡Œ testexpr ï¼Œ å¦åˆ™ç›´æ¥è¾“å‡º å­æŸ¥è¯¢çš„ç»“æœï¼Œç„¶åå† æ‰§è¡Œå¯¹åº”çš„æ¯”è¾ƒè¡¨è¾¾å¼
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  List     <span style="color:#f92672">*</span>parParam;     <span style="color:#75715e">/* indices of input Params from parent plan */</span>
</span></span><span style="display:flex;"><span>  List     <span style="color:#f92672">*</span>args;         <span style="color:#75715e">/* exprs to pass as parParam values */</span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">/* Estimated execution costs: */</span>
</span></span><span style="display:flex;"><span>  Cost    startup_cost;   <span style="color:#75715e">/* one-time setup cost */</span>
</span></span><span style="display:flex;"><span>  Cost    per_call_cost;  <span style="color:#75715e">/* cost for each subplan evaluation */</span>
</span></span><span style="display:flex;"><span>} SubPlan;
</span></span></code></pre></div><ul>
<li>SS_replace_correlation_vars
éå†å­æŸ¥è¯¢ä¸­çš„ï¼Œä¸Šå±‚å¼•ç”¨ï¼Œæ›¿æ¢ä¸º param ï¼Œå¹¶ä¸” å¯¹åº” å±‚çº§ å¾— root çš„ plan_params ä¼šè®°å½•æ›¿æ¢çš„ è¡¨è¾¾å¼,</li>
</ul>
<p>$150 = [opno: 96, opfuncid: 65, opresulttype: 16, opretset false, opcollid 0, inputcollid 0] = {
args = List with 2 elements = {
0 = [varno: 1, varattno: 1, vartype: 23, vartypmod: -1, varcollid: 0, varlevelsup: 0, varnosyn: 1, varattnosyn: 1],
1 = [varno: 1, varattno: 1, vartype: 23, vartypmod: -1, varcollid: 0, varlevelsup: 1, varnosyn: 1, varattnosyn: 1]
}
}</p>`,readingTime:3,tags:null,title:"",url:"/posts/postgres/sublink/"},{author:null,avatar:null,categories:null,description:"",readingTime:0,tags:null,title:"",url:"/posts/static/mysql/"}],fuseOptions={keys:["title"]},fuse=new Fuse(fuseData,fuseOptions)</script><script type=module src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.esm.js integrity="sha256-/IFmi82bIhdYWctu0UddSlJqpnzWm7Vh2C4CM32wF/k=" crossorigin=anonymous></script><script nomodule src=https://cdn.jsdelivr.net/npm/ionicons@7.4.0/dist/ionicons/ionicons.js integrity="sha256-mr7eJMX3VC3F7G32mk4oWp1C6a2tlMYxUdptfT7uKI8=" crossorigin=anonymous></script></body></html>